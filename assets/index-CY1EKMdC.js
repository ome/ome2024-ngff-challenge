const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Ir=Object.defineProperty;var ui=t=>{throw TypeError(t)};var Tr=(t,e,n)=>e in t?Ir(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var oe=(t,e,n)=>Tr(t,typeof e!="symbol"?e+"":e,n),Cn=(t,e,n)=>e.has(t)||ui("Cannot "+n);var ne=(t,e,n)=>(Cn(t,e,"read from private field"),n?n.call(t):e.get(t)),Te=(t,e,n)=>e.has(t)?ui("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),Ee=(t,e,n,i)=>(Cn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),Sn=(t,e,n)=>(Cn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ke(){}function zr(t,e){for(const n in e)t[n]=e[n];return t}function ur(t){return t()}function ci(){return Object.create(null)}function Ye(t){t.forEach(ur)}function _n(t){return typeof t=="function"}function Be(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let un;function Bt(t,e){return t===e?!0:(un||(un=document.createElement("a")),un.href=e,t===un.href)}function Rr(t){return Object.keys(t).length===0}function Or(t,...e){if(t==null){for(const i of e)i(void 0);return ke}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function Nt(t){let e;return Or(t,n=>e=n)(),e}function Tn(t,e,n,i){if(t){const r=cr(t,e,n,i);return t[0](r)}}function cr(t,e,n,i){return t[1]&&i?zr(n.ctx.slice(),t[1](i(e))):n.ctx}function zn(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],o=Math.max(e.dirty.length,r.length);for(let a=0;a<o;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Rn(t,e,n,i,r,s){if(r){const o=cr(e,n,i,s);t.p(o,r)}}function On(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function fi(t){return t??""}function d(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function Ct(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function w(t){return document.createElement(t)}function j(t){return document.createTextNode(t)}function B(){return j(" ")}function vn(){return j("")}function me(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function Lr(t){return Array.from(t.childNodes)}function pe(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ce(t,e){t.value=e??""}function le(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ot(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function cn(t){const e=t.querySelector(":checked");return e&&e.__value}function at(t,e,n){t.classList.toggle(e,!!n)}function Mr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let jt;function Ut(t){jt=t}function qn(){if(!jt)throw new Error("Function called outside component initialization");return jt}function en(t){qn().$$.on_mount.push(t)}function xn(t){qn().$$.on_destroy.push(t)}function Fr(){const t=qn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=Mr(e,n,{cancelable:i});return r.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}const Et=[],Tt=[];let St=[];const hi=[],Dr=Promise.resolve();let Ln=!1;function Nr(){Ln||(Ln=!0,Dr.then(De))}function st(t){St.push(t)}const An=new Set;let yt=0;function De(){if(yt!==0)return;const t=jt;do{try{for(;yt<Et.length;){const e=Et[yt];yt++,Ut(e),Pr(e.$$)}}catch(e){throw Et.length=0,yt=0,e}for(Ut(null),Et.length=0,yt=0;Tt.length;)Tt.pop()();for(let e=0;e<St.length;e+=1){const n=St[e];An.has(n)||(An.add(n),n())}St.length=0}while(Et.length);for(;hi.length;)hi.pop()();Ln=!1,An.clear(),Ut(t)}function Pr(t){if(t.fragment!==null){t.update(),Ye(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(st)}}function Ur(t){const e=[],n=[];St.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),St=e}const hn=new Set;let _t;function zt(){_t={r:0,c:[],p:_t}}function Rt(){_t.r||Ye(_t.c),_t=_t.p}function re(t,e){t&&t.i&&(hn.delete(t),t.i(e))}function he(t,e,n,i){if(t&&t.o){if(hn.has(t))return;hn.add(t),_t.c.push(()=>{hn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Ne(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Br(t,e){t.d(1),e.delete(t.key)}function jr(t,e){he(t,1,1,()=>{e.delete(t.key)})}function fr(t,e,n,i,r,s,o,a,l,h,u,g){let m=t.length,p=s.length,_=m;const y={};for(;_--;)y[t[_].key]=_;const D=[],E=new Map,M=new Map,q=[];for(_=p;_--;){const T=g(r,s,_),f=n(T);let c=o.get(f);c?q.push(()=>c.p(T,e)):(c=h(f,T),c.c()),E.set(f,D[_]=c),f in y&&M.set(f,Math.abs(_-y[f]))}const ee=new Set,H=new Set;function K(T){re(T,1),T.m(a,u),o.set(T.key,T),u=T.first,p--}for(;m&&p;){const T=D[p-1],f=t[m-1],c=T.key,k=f.key;T===f?(u=T.first,m--,p--):E.has(k)?!o.has(c)||ee.has(c)?K(T):H.has(k)?m--:M.get(c)>M.get(k)?(H.add(c),K(T)):(ee.add(k),m--):(l(f,o),m--)}for(;m--;){const T=t[m];E.has(T.key)||l(T,o)}for(;p;)K(D[p-1]);return Ye(q),D}function Ke(t){t&&t.c()}function Ve(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),st(()=>{const s=t.$$.on_mount.map(ur).filter(_n);t.$$.on_destroy?t.$$.on_destroy.push(...s):Ye(s),t.$$.on_mount=[]}),r.forEach(st)}function We(t,e){const n=t.$$;n.fragment!==null&&(Ur(n.after_update),Ye(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function qr(t,e){t.$$.dirty[0]===-1&&(Et.push(t),Nr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ze(t,e,n,i,r,s,o=null,a=[-1]){const l=jt;Ut(t);const h=t.$$={fragment:null,ctx:[],props:s,update:ke,not_equal:r,bound:ci(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:ci(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(h.root);let u=!1;if(h.ctx=n?n(t,e.props||{},(g,m,...p)=>{const _=p.length?p[0]:m;return h.ctx&&r(h.ctx[g],h.ctx[g]=_)&&(!h.skip_bound&&h.bound[g]&&h.bound[g](_),u&&qr(t,g)),m}):[],h.update(),u=!0,Ye(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const g=Lr(e.target);h.fragment&&h.fragment.l(g),g.forEach(x)}else h.fragment&&h.fragment.c();e.intro&&re(t.$$.fragment),Ve(t,e.target,e.anchor),De()}Ut(l)}class Je{constructor(){oe(this,"$$");oe(this,"$$set")}$destroy(){We(this,1),this.$destroy=ke}$on(e,n){if(!_n(n))return ke;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Rr(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const xr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(xr);const kt=[];function Mn(t,e=ke){let n;const i=new Set;function r(a){if(Be(t,a)&&(t=a,n)){const l=!kt.length;for(const h of i)h[1](),kt.push(h,t);if(l){for(let h=0;h<kt.length;h+=2)kt[h][0](kt[h+1]);kt.length=0}}}function s(a){r(a(t))}function o(a,l=ke){const h=[a,l];return i.add(h),i.size===1&&(n=e(r,s)||ke),a(t),()=>{i.delete(h),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:o}}var Hr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Vr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var hr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(Hr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,o={},a=0,l={parse:function(f,c){var k=(c=c||{}).dynamicTyping||!1;if(T(k)&&(c.dynamicTypingFunction=k,k={}),c.dynamicTyping=k,c.transform=!!T(c.transform)&&c.transform,c.worker&&l.WORKERS_SUPPORTED){var R=function(){if(!l.WORKERS_SUPPORTED)return!1;var F=(X=i.URL||i.webkitURL||null,$=n.toString(),l.BLOB_URL||(l.BLOB_URL=X.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",$,")();"],{type:"text/javascript"})))),N=new i.Worker(F),X,$;return N.onmessage=M,N.id=a++,o[N.id]=N}();return R.userStep=c.step,R.userChunk=c.chunk,R.userComplete=c.complete,R.userError=c.error,c.step=T(c.step),c.chunk=T(c.chunk),c.complete=T(c.complete),c.error=T(c.error),delete c.worker,void R.postMessage({input:f,config:c,workerId:R.id})}var O=null;return l.NODE_STREAM_INPUT,typeof f=="string"?(f=function(F){return F.charCodeAt(0)===65279?F.slice(1):F}(f),O=c.download?new g(c):new p(c)):f.readable===!0&&T(f.read)&&T(f.on)?O=new _(c):(i.File&&f instanceof File||f instanceof Object)&&(O=new m(c)),O.stream(f)},unparse:function(f,c){var k=!1,R=!0,O=",",F=`\r
`,N='"',X=N+N,$=!1,v=null,A=!1;(function(){if(typeof c=="object"){if(typeof c.delimiter!="string"||l.BAD_DELIMITERS.filter(function(L){return c.delimiter.indexOf(L)!==-1}).length||(O=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(k=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||($=c.skipEmptyLines),typeof c.newline=="string"&&(F=c.newline),typeof c.quoteChar=="string"&&(N=c.quoteChar),typeof c.header=="boolean"&&(R=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");v=c.columns}c.escapeChar!==void 0&&(X=c.escapeChar+N),(typeof c.escapeFormulae=="boolean"||c.escapeFormulae instanceof RegExp)&&(A=c.escapeFormulae instanceof RegExp?c.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var z=new RegExp(D(N),"g");if(typeof f=="string"&&(f=JSON.parse(f)),Array.isArray(f)){if(!f.length||Array.isArray(f[0]))return U(null,f,$);if(typeof f[0]=="object")return U(v||Object.keys(f[0]),f,$)}else if(typeof f=="object")return typeof f.data=="string"&&(f.data=JSON.parse(f.data)),Array.isArray(f.data)&&(f.fields||(f.fields=f.meta&&f.meta.fields||v),f.fields||(f.fields=Array.isArray(f.data[0])?f.fields:typeof f.data[0]=="object"?Object.keys(f.data[0]):[]),Array.isArray(f.data[0])||typeof f.data[0]=="object"||(f.data=[f.data])),U(f.fields||[],f.data||[],$);throw new Error("Unable to serialize unrecognized input");function U(L,Q,I){var C="";typeof L=="string"&&(L=JSON.parse(L)),typeof Q=="string"&&(Q=JSON.parse(Q));var G=Array.isArray(L)&&0<L.length,W=!Array.isArray(Q[0]);if(G&&R){for(var ie=0;ie<L.length;ie++)0<ie&&(C+=O),C+=Z(L[ie],ie);0<Q.length&&(C+=F)}for(var P=0;P<Q.length;P++){var Y=G?L.length:Q[P].length,ue=!1,de=G?Object.keys(Q[P]).length===0:Q[P].length===0;if(I&&!G&&(ue=I==="greedy"?Q[P].join("").trim()==="":Q[P].length===1&&Q[P][0].length===0),I==="greedy"&&G){for(var te=[],be=0;be<Y;be++){var ge=W?L[be]:be;te.push(Q[P][ge])}ue=te.join("").trim()===""}if(!ue){for(var ce=0;ce<Y;ce++){0<ce&&!de&&(C+=O);var Pe=G&&W?L[ce]:ce;C+=Z(Q[P][Pe],ce)}P<Q.length-1&&(!I||0<Y&&!de)&&(C+=F)}}return C}function Z(L,Q){if(L==null)return"";if(L.constructor===Date)return JSON.stringify(L).slice(1,25);var I=!1;A&&typeof L=="string"&&A.test(L)&&(L="'"+L,I=!0);var C=L.toString().replace(z,X);return(I=I||k===!0||typeof k=="function"&&k(L,Q)||Array.isArray(k)&&k[Q]||function(G,W){for(var ie=0;ie<W.length;ie++)if(-1<G.indexOf(W[ie]))return!0;return!1}(C,l.BAD_DELIMITERS)||-1<C.indexOf(O)||C.charAt(0)===" "||C.charAt(C.length-1)===" ")?N+C+N:C}}};if(l.RECORD_SEP="",l.UNIT_SEP="",l.BYTE_ORDER_MARK="\uFEFF",l.BAD_DELIMITERS=["\r",`
`,'"',l.BYTE_ORDER_MARK],l.WORKERS_SUPPORTED=!r&&!!i.Worker,l.NODE_STREAM_INPUT=1,l.LocalChunkSize=10485760,l.RemoteChunkSize=5242880,l.DefaultDelimiter=",",l.Parser=E,l.ParserHandle=y,l.NetworkStreamer=g,l.FileStreamer=m,l.StringStreamer=p,l.ReadableStreamStreamer=_,i.jQuery){var h=i.jQuery;h.fn.parse=function(f){var c=f.config||{},k=[];return this.each(function(F){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var N=0;N<this.files.length;N++)k.push({file:this.files[N],inputElem:this,instanceConfig:h.extend({},c)})}),R(),this;function R(){if(k.length!==0){var F,N,X,$,v=k[0];if(T(f.before)){var A=f.before(v.file,v.inputElem);if(typeof A=="object"){if(A.action==="abort")return F="AbortError",N=v.file,X=v.inputElem,$=A.reason,void(T(f.error)&&f.error({name:F},N,X,$));if(A.action==="skip")return void O();typeof A.config=="object"&&(v.instanceConfig=h.extend(v.instanceConfig,A.config))}else if(A==="skip")return void O()}var z=v.instanceConfig.complete;v.instanceConfig.complete=function(U){T(z)&&z(U,v.file,v.inputElem),O()},l.parse(v.file,v.instanceConfig)}else T(f.complete)&&f.complete()}function O(){k.splice(0,1),R()}}}function u(f){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var k=H(c);k.chunkSize=parseInt(k.chunkSize),c.step||c.chunk||(k.chunkSize=null),this._handle=new y(k),(this._handle.streamer=this)._config=k}).call(this,f),this.parseChunk=function(c,k){if(this.isFirstChunk&&T(this._config.beforeFirstChunk)){var R=this._config.beforeFirstChunk(c);R!==void 0&&(c=R)}this.isFirstChunk=!1,this._halted=!1;var O=this._partialLine+c;this._partialLine="";var F=this._handle.parse(O,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var N=F.meta.cursor;this._finished||(this._partialLine=O.substring(N-this._baseIndex),this._baseIndex=N),F&&F.data&&(this._rowCount+=F.data.length);var X=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:F,workerId:l.WORKER_ID,finished:X});else if(T(this._config.chunk)&&!k){if(this._config.chunk(F,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);F=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(F.data),this._completeResults.errors=this._completeResults.errors.concat(F.errors),this._completeResults.meta=F.meta),this._completed||!X||!T(this._config.complete)||F&&F.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),X||F&&F.meta.paused||this._nextChunk(),F}this._halted=!0},this._sendError=function(c){T(this._config.error)?this._config.error(c):s&&this._config.error&&i.postMessage({workerId:l.WORKER_ID,error:c,finished:!1})}}function g(f){var c;(f=f||{}).chunkSize||(f.chunkSize=l.RemoteChunkSize),u.call(this,f),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(k){this._input=k,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),r||(c.onload=K(this._chunkLoaded,this),c.onerror=K(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var k=this._config.downloadRequestHeaders;for(var R in k)c.setRequestHeader(R,k[R])}if(this._config.chunkSize){var O=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+O)}try{c.send(this._config.downloadRequestBody)}catch(F){this._chunkError(F.message)}r&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:c.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(k){var R=k.getResponseHeader("Content-Range");return R===null?-1:parseInt(R.substring(R.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(k){var R=c.statusText||k;this._sendError(new Error(R))}}function m(f){var c,k;(f=f||{}).chunkSize||(f.chunkSize=l.LocalChunkSize),u.call(this,f);var R=typeof FileReader<"u";this.stream=function(O){this._input=O,k=O.slice||O.webkitSlice||O.mozSlice,R?((c=new FileReader).onload=K(this._chunkLoaded,this),c.onerror=K(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var O=this._input;if(this._config.chunkSize){var F=Math.min(this._start+this._config.chunkSize,this._input.size);O=k.call(O,this._start,F)}var N=c.readAsText(O,this._config.encoding);R||this._chunkLoaded({target:{result:N}})},this._chunkLoaded=function(O){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(O.target.result)},this._chunkError=function(){this._sendError(c.error)}}function p(f){var c;u.call(this,f=f||{}),this.stream=function(k){return c=k,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var k,R=this._config.chunkSize;return R?(k=c.substring(0,R),c=c.substring(R)):(k=c,c=""),this._finished=!c,this.parseChunk(k)}}}function _(f){u.call(this,f=f||{});var c=[],k=!0,R=!1;this.pause=function(){u.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){u.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(O){this._input=O,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){R&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):k=!0},this._streamData=K(function(O){try{c.push(typeof O=="string"?O:O.toString(this._config.encoding)),k&&(k=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(F){this._streamError(F)}},this),this._streamError=K(function(O){this._streamCleanUp(),this._sendError(O)},this),this._streamEnd=K(function(){this._streamCleanUp(),R=!0,this._streamData("")},this),this._streamCleanUp=K(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(f){var c,k,R,O=Math.pow(2,53),F=-O,N=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,X=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,$=this,v=0,A=0,z=!1,U=!1,Z=[],L={data:[],errors:[],meta:{}};if(T(f.step)){var Q=f.step;f.step=function(P){if(L=P,G())C();else{if(C(),L.data.length===0)return;v+=P.data.length,f.preview&&v>f.preview?k.abort():(L.data=L.data[0],Q(L,$))}}}function I(P){return f.skipEmptyLines==="greedy"?P.join("").trim()==="":P.length===1&&P[0].length===0}function C(){return L&&R&&(ie("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+l.DefaultDelimiter+"'"),R=!1),f.skipEmptyLines&&(L.data=L.data.filter(function(P){return!I(P)})),G()&&function(){if(!L)return;function P(ue,de){T(f.transformHeader)&&(ue=f.transformHeader(ue,de)),Z.push(ue)}if(Array.isArray(L.data[0])){for(var Y=0;G()&&Y<L.data.length;Y++)L.data[Y].forEach(P);L.data.splice(0,1)}else L.data.forEach(P)}(),function(){if(!L||!f.header&&!f.dynamicTyping&&!f.transform)return L;function P(ue,de){var te,be=f.header?{}:[];for(te=0;te<ue.length;te++){var ge=te,ce=ue[te];f.header&&(ge=te>=Z.length?"__parsed_extra":Z[te]),f.transform&&(ce=f.transform(ce,ge)),ce=W(ge,ce),ge==="__parsed_extra"?(be[ge]=be[ge]||[],be[ge].push(ce)):be[ge]=ce}return f.header&&(te>Z.length?ie("FieldMismatch","TooManyFields","Too many fields: expected "+Z.length+" fields but parsed "+te,A+de):te<Z.length&&ie("FieldMismatch","TooFewFields","Too few fields: expected "+Z.length+" fields but parsed "+te,A+de)),be}var Y=1;return!L.data.length||Array.isArray(L.data[0])?(L.data=L.data.map(P),Y=L.data.length):L.data=P(L.data,0),f.header&&L.meta&&(L.meta.fields=Z),A+=Y,L}()}function G(){return f.header&&Z.length===0}function W(P,Y){return ue=P,f.dynamicTypingFunction&&f.dynamicTyping[ue]===void 0&&(f.dynamicTyping[ue]=f.dynamicTypingFunction(ue)),(f.dynamicTyping[ue]||f.dynamicTyping)===!0?Y==="true"||Y==="TRUE"||Y!=="false"&&Y!=="FALSE"&&(function(de){if(N.test(de)){var te=parseFloat(de);if(F<te&&te<O)return!0}return!1}(Y)?parseFloat(Y):X.test(Y)?new Date(Y):Y===""?null:Y):Y;var ue}function ie(P,Y,ue,de){var te={type:P,code:Y,message:ue};de!==void 0&&(te.row=de),L.errors.push(te)}this.parse=function(P,Y,ue){var de=f.quoteChar||'"';if(f.newline||(f.newline=function(ge,ce){ge=ge.substring(0,1048576);var Pe=new RegExp(D(ce)+"([^]*?)"+D(ce),"gm"),ve=(ge=ge.replace(Pe,"")).split("\r"),je=ge.split(`
`),Ge=1<je.length&&je[0].length<ve[0].length;if(ve.length===1||Ge)return`
`;for(var ze=0,se=0;se<ve.length;se++)ve[se][0]===`
`&&ze++;return ze>=ve.length/2?`\r
`:"\r"}(P,de)),R=!1,f.delimiter)T(f.delimiter)&&(f.delimiter=f.delimiter(P),L.meta.delimiter=f.delimiter);else{var te=function(ge,ce,Pe,ve,je){var Ge,ze,se,we;je=je||[",","	","|",";",l.RECORD_SEP,l.UNIT_SEP];for(var Qe=0;Qe<je.length;Qe++){var ae=je[Qe],tt=0,qe=0,Xe=0;se=void 0;for(var Oe=new E({comments:ve,delimiter:ae,newline:ce,preview:10}).parse(ge),Se=0;Se<Oe.data.length;Se++)if(Pe&&I(Oe.data[Se]))Xe++;else{var Le=Oe.data[Se].length;qe+=Le,se!==void 0?0<Le&&(tt+=Math.abs(Le-se),se=Le):se=Le}0<Oe.data.length&&(qe/=Oe.data.length-Xe),(ze===void 0||tt<=ze)&&(we===void 0||we<qe)&&1.99<qe&&(ze=tt,Ge=ae,we=qe)}return{successful:!!(f.delimiter=Ge),bestDelimiter:Ge}}(P,f.newline,f.skipEmptyLines,f.comments,f.delimitersToGuess);te.successful?f.delimiter=te.bestDelimiter:(R=!0,f.delimiter=l.DefaultDelimiter),L.meta.delimiter=f.delimiter}var be=H(f);return f.preview&&f.header&&be.preview++,c=P,k=new E(be),L=k.parse(c,Y,ue),C(),z?{meta:{paused:!0}}:L||{meta:{paused:!1}}},this.paused=function(){return z},this.pause=function(){z=!0,k.abort(),c=T(f.chunk)?"":c.substring(k.getCharIndex())},this.resume=function(){$.streamer._halted?(z=!1,$.streamer.parseChunk(c,!0)):setTimeout($.resume,3)},this.aborted=function(){return U},this.abort=function(){U=!0,k.abort(),L.meta.aborted=!0,T(f.complete)&&f.complete(L),c=""}}function D(f){return f.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function E(f){var c,k=(f=f||{}).delimiter,R=f.newline,O=f.comments,F=f.step,N=f.preview,X=f.fastMode,$=c=f.quoteChar===void 0||f.quoteChar===null?'"':f.quoteChar;if(f.escapeChar!==void 0&&($=f.escapeChar),(typeof k!="string"||-1<l.BAD_DELIMITERS.indexOf(k))&&(k=","),O===k)throw new Error("Comment character same as delimiter");O===!0?O="#":(typeof O!="string"||-1<l.BAD_DELIMITERS.indexOf(O))&&(O=!1),R!==`
`&&R!=="\r"&&R!==`\r
`&&(R=`
`);var v=0,A=!1;this.parse=function(z,U,Z){if(typeof z!="string")throw new Error("Input must be a string");var L=z.length,Q=k.length,I=R.length,C=O.length,G=T(F),W=[],ie=[],P=[],Y=v=0;if(!z)return Me();if(f.header&&!U){var ue=z.split(R)[0].split(k),de=[],te={},be=!1;for(var ge in ue){var ce=ue[ge];T(f.transformHeader)&&(ce=f.transformHeader(ce,ge));var Pe=ce,ve=te[ce]||0;for(0<ve&&(be=!0,Pe=ce+"_"+ve),te[ce]=ve+1;de.includes(Pe);)Pe=Pe+"_"+ve;de.push(Pe)}if(be){var je=z.split(R);je[0]=de.join(k),z=je.join(R)}}if(X||X!==!1&&z.indexOf(c)===-1){for(var Ge=z.split(R),ze=0;ze<Ge.length;ze++){if(P=Ge[ze],v+=P.length,ze!==Ge.length-1)v+=R.length;else if(Z)return Me();if(!O||P.substring(0,C)!==O){if(G){if(W=[],Xe(P.split(k)),ft(),A)return Me()}else Xe(P.split(k));if(N&&N<=ze)return W=W.slice(0,N),Me(!0)}}return Me()}for(var se=z.indexOf(k,v),we=z.indexOf(R,v),Qe=new RegExp(D($)+D(c),"g"),ae=z.indexOf(c,v);;)if(z[v]!==c)if(O&&P.length===0&&z.substring(v,v+C)===O){if(we===-1)return Me();v=we+I,we=z.indexOf(R,v),se=z.indexOf(k,v)}else if(se!==-1&&(se<we||we===-1))P.push(z.substring(v,se)),v=se+Q,se=z.indexOf(k,v);else{if(we===-1)break;if(P.push(z.substring(v,we)),Le(we+I),G&&(ft(),A))return Me();if(N&&W.length>=N)return Me(!0)}else for(ae=v,v++;;){if((ae=z.indexOf(c,ae+1))===-1)return Z||ie.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:W.length,index:v}),Se();if(ae===L-1)return Se(z.substring(v,ae).replace(Qe,c));if(c!==$||z[ae+1]!==$){if(c===$||ae===0||z[ae-1]!==$){se!==-1&&se<ae+1&&(se=z.indexOf(k,ae+1)),we!==-1&&we<ae+1&&(we=z.indexOf(R,ae+1));var tt=Oe(we===-1?se:Math.min(se,we));if(z.substr(ae+1+tt,Q)===k){P.push(z.substring(v,ae).replace(Qe,c)),z[v=ae+1+tt+Q]!==c&&(ae=z.indexOf(c,v)),se=z.indexOf(k,v),we=z.indexOf(R,v);break}var qe=Oe(we);if(z.substring(ae+1+qe,ae+1+qe+I)===R){if(P.push(z.substring(v,ae).replace(Qe,c)),Le(ae+1+qe+I),se=z.indexOf(k,v),ae=z.indexOf(c,v),G&&(ft(),A))return Me();if(N&&W.length>=N)return Me(!0);break}ie.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:W.length,index:v}),ae++}}else ae++}return Se();function Xe(Ie){W.push(Ie),Y=v}function Oe(Ie){var nt=0;if(Ie!==-1){var $e=z.substring(ae+1,Ie);$e&&$e.trim()===""&&(nt=$e.length)}return nt}function Se(Ie){return Z||(Ie===void 0&&(Ie=z.substring(v)),P.push(Ie),v=L,Xe(P),G&&ft()),Me()}function Le(Ie){v=Ie,Xe(P),P=[],we=z.indexOf(R,v)}function Me(Ie){return{data:W,errors:ie,meta:{delimiter:k,linebreak:R,aborted:A,truncated:!!Ie,cursor:Y+(U||0)}}}function ft(){F(Me()),W=[],ie=[]}},this.abort=function(){A=!0},this.getCharIndex=function(){return v}}function M(f){var c=f.data,k=o[c.workerId],R=!1;if(c.error)k.userError(c.error,c.file);else if(c.results&&c.results.data){var O={abort:function(){R=!0,q(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:ee,resume:ee};if(T(k.userStep)){for(var F=0;F<c.results.data.length&&(k.userStep({data:c.results.data[F],errors:c.results.errors,meta:c.results.meta},O),!R);F++);delete c.results}else T(k.userChunk)&&(k.userChunk(c.results,O,c.file),delete c.results)}c.finished&&!R&&q(c.workerId,c.results)}function q(f,c){var k=o[f];T(k.userComplete)&&k.userComplete(c),k.terminate(),delete o[f]}function ee(){throw new Error("Not implemented.")}function H(f){if(typeof f!="object"||f===null)return f;var c=Array.isArray(f)?[]:{};for(var k in f)c[k]=H(f[k]);return c}function K(f,c){return function(){f.apply(c,arguments)}}function T(f){return typeof f=="function"}return s&&(i.onmessage=function(f){var c=f.data;if(l.WORKER_ID===void 0&&c&&(l.WORKER_ID=c.workerId),typeof c.input=="string")i.postMessage({workerId:l.WORKER_ID,results:l.parse(c.input,c.config),finished:!0});else if(i.File&&c.input instanceof File||c.input instanceof Object){var k=l.parse(c.input,c.config);k&&i.postMessage({workerId:l.WORKER_ID,results:k,finished:!0})}}),(g.prototype=Object.create(u.prototype)).constructor=g,(m.prototype=Object.create(u.prototype)).constructor=m,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(u.prototype)).constructor=_,l})})(hr);var Wr=hr.exports;const Gr=Vr(Wr),Kr="https://ome.github.io/ome2024-ngff-challenge/idr-mark.svg",Zr="https://ome.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Jr="https://ome.github.io/ome2024-ngff-challenge/ssbd-logo.png",mn="https://raw.githubusercontent.com/ome/ome2024-ngff-challenge/main/samples/ngff_samples.csv";let Yr={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://webknossos.org",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/"};function di(t){if(t==="IDR")return Kr;if(t==="SSBD")return Jr;let e=Yr[t];return e?e==="https://nfdi4bioimage.de/"?Zr:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function dr(t,e,n={}){Gr.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let o=i.data.map(p=>{let _={...n};for(let y=0;y<r.length;y++)_[r[y]]=p[y];return _}),a=o.filter(p=>{var _;return!((_=p.url)!=null&&_.endsWith(".csv"))}),l={};a.forEach(p=>{if(l[p.url]){console.warn("Removing duplicate URL:",p.url);return}l[p.url]=p}),a=Object.values(l);let h=o.filter(p=>{var _;return(_=p.url)==null?void 0:_.includes(".csv")}),u=a.reduce((p,_)=>_.wells?p+1:p,0),g=a.reduce((p,_)=>p+parseInt(_.written||0),0),m=a.length;u>0&&(m=a.reduce((p,_)=>p+parseInt(_.images||1),0)),e.addCsv(t,h,m,u,g),e.addRows(a),h.forEach(p=>{let _=p.url;p.csv=_,dr(_,e,p)})}})}async function Qr(t){return await fetch(t).then(e=>e.json())}function ct(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function Xr(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function $r(t,e,n){const i=t[0].shape,r=i[0],s=i[1],o=r*s;e||(e=t.map(gr));let a=performance.now(),l=new Uint8ClampedArray(4*r*s).fill(0),h=0;for(let u=0;u<o;u++){for(let g=0;g<t.length;g++){let m=n[g],p=t[g].data,_=e[g],D=(p[u]-_[0])/(_[1]-_[0]);for(let E=0;E<3;E++){let M=D*m[E]<<0;l[h*4+E]=Math.max(l[h*4+E],M)}}l[h*4+3]=255,h+=1}return performance.now()-a<100&&ts(l,5)[4]<1&&(l=es(l,2)),l}function es(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function ts(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let o=t[s*4];o=Math.max(t[s*4+1],o),o=Math.max(t[s*4+2],o);let a=Math.floor(o/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function gr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let o=e[s];n=Math.max(n,o),i=Math.min(i,o)}return[i,n]}const dn=4,ut={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},ns=[ut.magenta,ut.green],is=[ut.red,ut.green,ut.blue],gi=Object.values(ut).slice(0,-2);function rs(t){let e;return t<=dn?e=Array(t).fill(!0):e=[...Array(dn).fill(!0),...Array(t-dn).fill(!1)],e}function ss(t,e){let n=[];if(t==1)n=[ut.white];else if(t==2)n=ns;else if(t===3)n=is;else if(t<=dn)n=gi.slice(0,t);else{n=Array(t).fill(ut.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=gi[r]}return n.map(_r)}function _r(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class mr{constructor(){this.store=Mn({})}async lookupOntologyTerm(e){let n="",i="";e.includes("NCBITaxon")|e.includes("NCBI:txid")&&(n=e.replace("NCBI:txid",""),n=n.replace("obo:NCBITaxon_",""),i="NCBITaxon"),e.includes("FBbi")&&(n=e.replace("obo:FBbi_",""),n=n.replace("obo:FBbi:",""),n=n.replace("FBbi:",""),i="FBbi"),e.includes("NCIT_")&&(n=e.replace("NCIT_",""),i="NCIT"),e.includes("obo:MI_")&&(n=e.replace("obo:MI_",""),i="MI"),e.includes("obo:OBI_")&&(n=e.replace("obo:OBI_",""),i="OBI");let r=i+"_"+n,o=`https://www.ebi.ac.uk/ols4/api/ontologies/${i.toLowerCase()}/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${r}`;return(await Qr(o)).label||e}addTerms(e){let n=Nt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}const pr=new mr,br=new mr,_i=5;async function qt(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],o=`${t}/${s.path}/0`,[a,l]=await qt(o);return[a,l,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await qt(s)}}class os{constructor(e="index",n=!0){this.store=Mn([]),this.selectedRow=Mn(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let o of s.child_csv)if(o.source===e){n=o;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0,o=r.plate_count||0,a=r.bytes||0;for(let l of r.child_csv)s+=l.image_count||0,o+=l.plate_count||0,a+=l.bytes||0;return{...r,image_count:s,plate_count:o,bytes:a}}):[]}addCsv(e,n,i,r,s){n=n.map(a=>({...a,child_csv:[]}));let o;for(let a of this.csvFiles){if(a.url===e){o=a;break}for(let l of a.child_csv){if(l.url===e){o=l;break}for(let h of l.child_csv)if(h.url===e){o=h;break}}}o?(o.image_count=i,o.plate_count=r,o.bytes=s,o.child_csv=n):(o={url:e,image_count:i,plate_count:r,bytes:s,child_csv:n},this.csvFiles.push(o))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let o=r.shape.split(",").map(l=>parseInt(l)),a;r.dimension_names?a=r.dimension_names.split(","):o.length==5&&(a=["t","c","z","y","x"]),a&&a.length==o.length&&a.forEach((l,h)=>r["size_"+l]=o[h]),r.dim_count=o.reduce((l,h)=>l+(h>1?1:0),0)}if(r.chunks){let o=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=o.reduce((a,l)=>a*l,1)}if(r.shards){let o=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=o.reduce((a,l)=>a*l,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,o)=>this.compareRows(s,o,!0)),r));let n=e.map(r=>r.organismId);pr.addTerms(n);let i=e.map(r=>r.fbbiId);br.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var m;const[n,i,r]=await qt(e);let s=[],o=0,a=0,l=!1,h=!0,u={multiscales:n},g=i;if(r&&(o=r.wells.length,a=r.field_count||1),n){const p=(m=n[0])==null?void 0:m.datasets[0],_=p==null?void 0:p.path;if(_){const y=await fetch(`${i}/${_}/zarr.json`).then(D=>D.json()).catch(D=>{console.log(`----> Failed to parse ${i}/${_}/zarr.json`,D)});s=y==null?void 0:y.shape}}else console.log("No multiscales found"),l=!0,s=[0];this.populateRow(e,{image_attrs:u,image_url:g,shape:s,well_count:o,field_count:a,load_failed:l,loaded:h})}async loadRocrateJsonAllRows(){let e=Nt(this.store);for(let n=0;n<e.length;n=n+_i){let i=Xr(n,Math.min(n+_i,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let o=0;return i?o=r-s:o=r.localeCompare(s),this.sortAscending?o:-o}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,o)=>this.compareRows(s,o,i)),r))}isColumnNumeric(e){let n=Nt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return Nt(this.store)}getRow(e){return Nt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Ae=new os;function ls(t){let e,n,i,r,s,o;return{c(){e=w("button"),n=w("span"),n.textContent="^",i=B(),r=w("span"),r.textContent="^",b(n,"class","acc svelte-17vd65t"),at(n,"strong",t[1]),b(r,"class","dec svelte-17vd65t"),at(r,"strong",!t[1]),b(e,"class","svelte-17vd65t")},m(a,l){V(a,e,l),d(e,n),d(e,i),d(e,r),s||(o=me(e,"click",t[2]),s=!0)},p(a,[l]){l&2&&at(n,"strong",a[1]),l&2&&at(r,"strong",!a[1])},i:ke,o:ke,d(a){a&&x(e),s=!1,o()}}}function as(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=o=>{"toggleAscending"in o&&n(0,i=o.toggleAscending),"sortAscending"in o&&n(1,r=o.sortAscending)},[i,r,s]}class us extends Je{constructor(e){super(),Ze(this,e,as,ls,Be,{toggleAscending:0,sortAscending:1})}}const fn={AUTO:"auto",START:"start",CENTER:"center",END:"end"},rt={HORIZONTAL:"horizontal",VERTICAL:"vertical"},Ft={OBSERVED:0,REQUESTED:1},cs={[rt.VERTICAL]:"top",[rt.HORIZONTAL]:"left"},mi={[rt.VERTICAL]:"scrollTop",[rt.HORIZONTAL]:"scrollLeft"};class fs{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=fn.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),o=s.offset,a=o-n+s.size;let l;switch(e){case fn.END:l=a;break;case fn.CENTER:l=o-(n-s.size)/2;break;case fn.START:l=o;break;default:l=Math.max(a,Math.min(o,i))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,l))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let o=this.findNearestItem(n);if(o===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(o);n=a.offset+a.size;let l=o;for(;n<s&&l<this.itemCount-1;)l++,n+=this.getSizeAndPositionForIndex(l).size;return i&&(o=Math.max(0,o-i),l=Math.min(l+i,this.itemCount-1)),{start:o,stop:l}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const hs=t=>({}),pi=t=>({});function bi(t,e,n){const i=t.slice();return i[37]=e[n],i}const ds=t=>({style:t[0]&4,index:t[0]&4}),vi=t=>({style:t[37].style,index:t[37].index}),gs=t=>({}),wi=t=>({});function yi(t,e){let n,i;const r=e[21].item,s=Tn(r,e,e[20],vi);return{key:t,first:null,c(){n=vn(),s&&s.c(),this.first=n},m(o,a){V(o,n,a),s&&s.m(o,a),i=!0},p(o,a){e=o,s&&s.p&&(!i||a[0]&1048580)&&Rn(s,r,e,e[20],i?zn(r,e[20],a,ds):On(e[20]),vi)},i(o){i||(re(s,o),i=!0)},o(o){he(s,o),i=!1},d(o){o&&x(n),s&&s.d(o)}}}function _s(t){let e,n,i,r=[],s=new Map,o,a;const l=t[21].header,h=Tn(l,t,t[20],wi);let u=Ne(t[2]);const g=_=>_[0]?_[0](_[37].index):_[37].index;for(let _=0;_<u.length;_+=1){let y=bi(t,u,_),D=g(y);s.set(D,r[_]=yi(D,y))}const m=t[21].footer,p=Tn(m,t,t[20],pi);return{c(){e=w("div"),h&&h.c(),n=B(),i=w("div");for(let _=0;_<r.length;_+=1)r[_].c();o=B(),p&&p.c(),b(i,"class","virtual-list-inner svelte-dwpad5"),b(i,"style",t[4]),b(e,"class","virtual-list-wrapper svelte-dwpad5"),b(e,"style",t[3])},m(_,y){V(_,e,y),h&&h.m(e,null),d(e,n),d(e,i);for(let D=0;D<r.length;D+=1)r[D]&&r[D].m(i,null);d(e,o),p&&p.m(e,null),t[22](e),a=!0},p(_,y){h&&h.p&&(!a||y[0]&1048576)&&Rn(h,l,_,_[20],a?zn(l,_[20],y,gs):On(_[20]),wi),y[0]&1048581&&(u=Ne(_[2]),zt(),r=fr(r,y,g,1,_,u,s,i,jr,yi,null,bi),Rt()),(!a||y[0]&16)&&b(i,"style",_[4]),p&&p.p&&(!a||y[0]&1048576)&&Rn(p,m,_,_[20],a?zn(m,_[20],y,hs):On(_[20]),pi),(!a||y[0]&8)&&b(e,"style",_[3])},i(_){if(!a){re(h,_);for(let y=0;y<u.length;y+=1)re(r[y]);re(p,_),a=!0}},o(_){he(h,_);for(let y=0;y<r.length;y+=1)he(r[y]);he(p,_),a=!1},d(_){_&&x(e),h&&h.d(_);for(let y=0;y<r.length;y+=1)r[y].d();p&&p.d(_),t[22](null)}}}const ms=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function ps(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:o="100%"}=e,{itemCount:a}=e,{itemSize:l}=e,{estimatedItemSize:h=null}=e,{stickyIndices:u=null}=e,{getKey:g=null}=e,{scrollDirection:m=rt.VERTICAL}=e,{scrollOffset:p=null}=e,{scrollToIndex:_=null}=e,{scrollToAlignment:y=null}=e,{scrollToBehaviour:D="instant"}=e,{overscanCount:E=3}=e;const M=Fr(),q=new fs({itemCount:a,itemSize:l,estimatedItemSize:Z()});let ee=!1,H,K=[],T={offset:p||_!=null&&K.length&&A(_)||0,scrollChangeReason:Ft.REQUESTED},f=T,c={scrollToIndex:_,scrollToAlignment:y,scrollOffset:p,itemCount:a,itemSize:l,estimatedItemSize:h},k={},R="",O="";X(),en(()=>{n(18,ee=!0),H.addEventListener("scroll",z,ms),p!=null?$(p):_!=null&&$(A(_))}),xn(()=>{ee&&H.removeEventListener("scroll",z)});function F(){if(!ee)return;const I=c.scrollToIndex!==_||c.scrollToAlignment!==y,C=c.itemCount!==a||c.itemSize!==l||c.estimatedItemSize!==h;C&&(q.updateConfig({itemSize:l,itemCount:a,estimatedItemSize:Z()}),v()),c.scrollOffset!==p?n(19,T={offset:p||0,scrollChangeReason:Ft.REQUESTED}):typeof _=="number"&&(I||C)&&n(19,T={offset:A(_,y,a),scrollChangeReason:Ft.REQUESTED}),c={scrollToIndex:_,scrollToAlignment:y,scrollOffset:p,itemCount:a,itemSize:l,estimatedItemSize:h}}function N(){if(!ee)return;const{offset:I,scrollChangeReason:C}=T;(f.offset!==I||f.scrollChangeReason!==C)&&X(),f.offset!==I&&C===Ft.REQUESTED&&$(I),f=T}function X(){const{offset:I}=T,{start:C,stop:G}=q.getVisibleRange({containerSize:m===rt.VERTICAL?s:o,offset:I,overscanCount:E});let W=[];const ie=q.getTotalSize();m===rt.VERTICAL?(n(3,R=`height:${s}${typeof s=="number"?"px":""};width:${o};`),n(4,O=`flex-direction:column;height:${ie}px;`)):(n(3,R=`height:${s};width:${o}${typeof o=="number"?"px":""}`),n(4,O=`min-height:100%;width:${ie}px;`));const P=u!=null&&u.length!==0;if(P)for(let Y=0;Y<u.length;Y++){const ue=u[Y];W.push({index:ue,style:L(ue,!0)})}if(C!==void 0&&G!==void 0){for(let Y=C;Y<=G;Y++)P&&u.includes(Y)||W.push({index:Y,style:L(Y,!1)});M("itemsUpdated",{start:C,end:G})}n(2,K=W)}function $(I){"scroll"in H?H.scroll({[cs[m]]:I,behavior:D}):n(1,H[mi[m]]=I,H)}function v(I=0){k={},q.resetItem(I),X()}function A(I,C=y,G=a){return(I<0||I>=G)&&(I=0),q.getUpdatedOffsetForIndex({align:C,containerSize:m===rt.VERTICAL?s:o,currentOffset:T.offset||0,targetIndex:I})}function z(I){const C=U();C<0||T.offset===C||I.target!==H||(n(19,T={offset:C,scrollChangeReason:Ft.OBSERVED}),M("afterScroll",{offset:C,event:I}))}function U(){return H[mi[m]]}function Z(){return h||typeof l=="number"&&l||50}function L(I,C){if(k[I])return k[I];const{size:G,offset:W}=q.getSizeAndPositionForIndex(I);let ie;return m===rt.VERTICAL?(ie=`left:0;width:100%;height:${G}px;`,C?ie+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${W}px;margin-bottom:${-(W+G)}px;`:ie+=`position:absolute;top:${W}px;`):(ie=`top:0;width:${G}px;`,C?ie+=`position:sticky;z-index:1;left:0;margin-left:${W}px;margin-right:${-(W+G)}px;`:ie+=`position:absolute;height:100%;left:${W}px;`),k[I]=ie}function Q(I){Tt[I?"unshift":"push"](()=>{H=I,n(1,H)})}return t.$$set=I=>{"height"in I&&n(5,s=I.height),"width"in I&&n(6,o=I.width),"itemCount"in I&&n(7,a=I.itemCount),"itemSize"in I&&n(8,l=I.itemSize),"estimatedItemSize"in I&&n(9,h=I.estimatedItemSize),"stickyIndices"in I&&n(10,u=I.stickyIndices),"getKey"in I&&n(0,g=I.getKey),"scrollDirection"in I&&n(11,m=I.scrollDirection),"scrollOffset"in I&&n(12,p=I.scrollOffset),"scrollToIndex"in I&&n(13,_=I.scrollToIndex),"scrollToAlignment"in I&&n(14,y=I.scrollToAlignment),"scrollToBehaviour"in I&&n(15,D=I.scrollToBehaviour),"overscanCount"in I&&n(16,E=I.overscanCount),"$$scope"in I&&n(20,r=I.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&F(),t.$$.dirty[0]&524288&&N(),t.$$.dirty[0]&263264&&ee&&v(0)},[g,H,K,R,O,s,o,a,l,h,u,m,p,_,y,D,E,v,ee,T,r,i,Q]}class bs extends Je{constructor(e){super(),Ze(this,e,ps,_s,Be,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),De()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),De()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),De()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),De()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),De()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),De()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),De()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),De()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),De()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),De()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),De()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),De()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),De()}get recomputeSizes(){return this.$$.ctx[17]}}class tn extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Hn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const vs="modulepreload",ws=function(t){return"https://ome.github.io/ome2024-ngff-challenge/"+t},ki={},Dt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=ws(a),a in ki)return;ki[a]=!0;const l=a.endsWith(".css"),h=l?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const u=document.createElement("link");if(u.rel=l?"stylesheet":vs,l||(u.as="script"),u.crossOrigin="",u.href=a,o&&u.setAttribute("nonce",o),document.head.appendChild(u),l)return new Promise((g,m)=>{u.addEventListener("load",g),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s})};var He;class vr{constructor(e,n,i){Te(this,He);typeof e=="number"?Ee(this,He,new Uint8Array(e)):e instanceof ArrayBuffer?Ee(this,He,new Uint8Array(e,n,i)):Ee(this,He,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return ne(this,He).byteOffset}get byteLength(){return ne(this,He).byteLength}get buffer(){return ne(this,He).buffer}get length(){return ne(this,He).length}get(e){let n=ne(this,He)[e];return typeof n=="number"?n!==0:n}set(e,n){ne(this,He)[e]=n?1:0}fill(e){ne(this,He).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}He=new WeakMap;var At;class Vn{constructor(e,n,i,r){oe(this,"_data");oe(this,"chars");Te(this,At);if(this.chars=e,Ee(this,At,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let o=0;o<s.length;o++)this.set(o,s[o])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set(ne(this,At).encode(n))}fill(e){const n=ne(this,At).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}At=new WeakMap;var Re;const Yn=class Yn{constructor(e,n,i,r){Te(this,Re);oe(this,"chars");if(this.chars=e,typeof n=="number")Ee(this,Re,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),Ee(this,Re,new Int32Array(n,i,r));else{const s=n,o=new Yn(e,1);Ee(this,Re,new Int32Array(function*(){for(let a of s)o.set(0,a),yield*ne(o,Re)}()))}}get BYTES_PER_ELEMENT(){return ne(this,Re).BYTES_PER_ELEMENT*this.chars}get byteLength(){return ne(this,Re).byteLength}get byteOffset(){return ne(this,Re).byteOffset}get buffer(){return ne(this,Re).buffer}get length(){return ne(this,Re).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint(ne(this,Re)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=ne(this,Re).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=ne(this,Re).subarray(0,this.chars);for(let i=1;i<this.length;i++)ne(this,Re).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Re=new WeakMap;let xt=Yn;function nn(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Ei(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let o=0;o<n;o+=1)r=t[s+o],t[s+o]=t[s+i-o],t[s+i-o]=r}const ys={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:vr},ks=/v2:([US])(\d+)/;function wr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(ks);if(e){let[,i,r]=e;return(i==="U"?xt:Vn).bind(null,Number(r))}let n=ys[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function bt(t,e){return(e==="C"?Es:Cs)(t)}function Es(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function Cs(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function Ss({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Fn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const As=/^([<|>])(.*)$/;function Is(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(As);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Ts(t,e={}){let n=[],i=Is(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function zs(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Rs(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Os(t){return(t==null?void 0:t.name)==="sharding_indexed"}function yr(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const Ci=Ls();function Ls(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function Si(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Ht,lt,Vt,Wt,It;const Qn=class Qn{constructor(e,n){oe(this,"kind","array_to_bytes");Te(this,Ht);Te(this,lt);Te(this,Vt);Te(this,Wt);Te(this,It);Ee(this,It,e==null?void 0:e.endian),Ee(this,lt,wr(n.data_type)),Ee(this,Wt,n.shape),Ee(this,Ht,bt(n.shape,Fn(n.codecs)));const i=new(ne(this,lt))(0);Ee(this,Vt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new Qn(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return Ci&&ne(this,It)==="big"&&Ei(n,Si(ne(this,lt))),n}decode(e){return Ci&&ne(this,It)==="big"&&Ei(e,Si(ne(this,lt))),{data:new(ne(this,lt))(e.buffer,e.byteOffset,e.byteLength/ne(this,Vt)),shape:ne(this,Wt),stride:ne(this,Ht)}}};Ht=new WeakMap,lt=new WeakMap,Vt=new WeakMap,Wt=new WeakMap,It=new WeakMap;let pn=Qn;class Wn{constructor(){oe(this,"kind","bytes_to_bytes")}static fromConfig(){return new Wn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function Ms(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function Fs(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Gt,Kt;const Xn=class Xn{constructor(e={}){oe(this,"configuration");oe(this,"kind","array_to_bytes");Te(this,Gt);Te(this,Kt);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:o=!0,sort_keys:a=!0,indent:l,strict:h=!0}=e;let u=e.separators;u||(l?u=[", ",": "]:u=[",",":"]),Ee(this,Gt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:o,indent:l,separators:u,sort_keys:a}),Ee(this,Kt,{strict:h})}static fromConfig(e){return new Xn(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:o,sort_keys:a}=ne(this,Gt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const l=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");o||l.push(Ms),a&&l.push(Fs);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let u;l.length&&(u=(m,p)=>{let _=p;for(let y of l)_=y(m,_);return _});let g=JSON.stringify(h,u,n);return r&&(g=g.replace(/[\u007F-\uFFFF]/g,m=>{const p=`0000${m.charCodeAt(0).toString(16)}`;return`\\u${p.substring(p.length-4)}`})),new TextEncoder().encode(g)}decode(e){const{strict:n}=ne(this,Kt);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=nn(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=bt(r,"C");return{data:i,shape:r,stride:s}}};Gt=new WeakMap,Kt=new WeakMap;let Dn=Xn;function Ai(t){return t instanceof vr||t instanceof Vn||t instanceof xt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function Ds(t,e){let n;return t.data instanceof Vn||t.data instanceof xt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:bt(t.shape,e)}}function Ns(t,e){let n=Ds(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),o=Ai(t.data),a=Ai(n.data);for(let l=0;l<r;l++){let h=0;for(let u=0;u<i;u++)h+=s[u]*n.stride[u];a[h]=o[l],s[0]+=1;for(let u=0;u<i;u++)if(s[u]===t.shape[u]){if(u+1===i)break;s[u]=0,s[u+1]+=1}}return n}function Ps(t){if(!t.stride)return"C";let e=bt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Gn{constructor(e){oe(this,"configuration");oe(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Gn(e)}encode(e){var n,i;return Ps(e)===((n=this.configuration)==null?void 0:n.order)?e:Ns(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var Zt,Jt;const $n=class $n{constructor(e){oe(this,"kind","array_to_bytes");Te(this,Zt);Te(this,Jt);Ee(this,Zt,e),Ee(this,Jt,bt(e,"C"))}static fromConfig(e,n){return new $n(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let o=0;o<r.length;o++){let a=i.getUint32(s,!0);s+=4,r[o]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:ne(this,Zt),stride:ne(this,Jt)}}};Zt=new WeakMap,Jt=new WeakMap;let Nn=$n;function Us(){return new Map().set("blosc",()=>Dt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>Dt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>Dt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>Dt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>Dt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Gn).set("bytes",()=>pn).set("crc32c",()=>Wn).set("vlen-utf8",()=>Nn).set("json2",()=>Dn)}const Bs=Us();function Pn(t){let e;return{async encode(n){e||(e=await Ii(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Ii(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Ii(t){let e=t.codecs.map(async s=>{var a;let o=await((a=Bs.get(s.name))==null?void 0:a());if(!o)throw new Error(`Unknown codec: ${s.name}`);return{Codec:o,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:o}of e){let a=s.fromConfig(o.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!js(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=pn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function js(t){return t.data_type!=="v2:object"}const Ti=18446744073709551615n;function qs(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((l,h)=>l/i.chunk_shape[h]),o=Pn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async l=>{let h=l.map((M,q)=>Math.floor(M/s[q])),u=t.resolve(n(h)).path,g;if(u in a)g=a[u];else{let M=4,q=16*s.reduce((H,K)=>H*K,1),ee=await r(u,{suffixLength:q+M});g=a[u]=ee?await o.decode(ee):null}if(g===null)return;let{data:m,shape:p,stride:_}=g,y=l.map((M,q)=>M%p[q]).reduce((M,q,ee)=>M+q*_[ee],0),D=m[y],E=m[y+1];if(!(D===Ti&&E===Ti))return r(u,{offset:Number(D),length:Number(E)})}}class Ot{constructor(e,n="/"){oe(this,"store");oe(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Ot(this.store,new URL(e,n).pathname)}}var Yt;class Kn extends Ot{constructor(n,i,r){super(n,i);oe(this,"kind","group");Te(this,Yt);Ee(this,Yt,r)}get attrs(){return ne(this,Yt).attributes}}Yt=new WeakMap;const Pt=Symbol("zarrita.context");function xs(t){return t[Pt]}function Hs(t,e){let{configuration:n}=e.codecs.find(Os)??{},i={encode_chunk_key:Ss(e.chunk_key_encoding),TypedArray:wr(e.data_type),fill_value:e.fill_value};if(n){let s=Fn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:Pn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(o,a){return bt(o,a??s)},get_chunk_bytes:qs(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Fn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:Pn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,o){return bt(s,o??r)},async get_chunk_bytes(s,o){let a=i.encode_chunk_key(s),l=t.resolve(a).path;return t.store.get(l,o)}}}var or,lr,pt,ar;let bn=(ar=class extends(lr=Ot,or=Pt,lr){constructor(n,i,r){super(n,i);oe(this,"kind","array");Te(this,pt);oe(this,or);Ee(this,pt,{...r,fill_value:yr(r)}),this[Pt]=Hs(this,r)}get attrs(){return ne(this,pt).attributes}get shape(){return ne(this,pt).shape}get chunks(){return this[Pt].chunk_shape}get dtype(){return ne(this,pt).data_type}async getChunk(n,i){let r=this[Pt],s=await r.get_chunk_bytes(n,i);if(!s){let o=r.chunk_shape.reduce((l,h)=>l*h,1),a=new r.TypedArray(o);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Rs(this.dtype,n)}},pt=new WeakMap,ar),wn=Vs();function Vs(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function Ws(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?nn(e):{}}async function Gs(t,e={}){let n="store"in t?t:new Ot(t),i={};return(e.attrs??!0)&&(i=await Ws(n)),e.kind==="array"?zi(n,i):e.kind==="group"?Ri(n,i):zi(n,i).catch(r=>{if(r instanceof tn)return Ri(n,i);throw r})}async function zi(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new tn("v2 array",{cause:new Hn(n)});return wn.increment(t.store,"v2"),new bn(t.store,t.path,Ts(nn(i),e))}async function Ri(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new tn("v2 group",{cause:new Hn(n)});return wn.increment(t.store,"v2"),new Kn(t.store,t.path,zs(nn(i),e))}async function Ks(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new tn("v3 array or group",{cause:new Hn(n)});let r=nn(i);return r.node_type==="array"&&(r.fill_value=yr(r)),r.node_type==="array"?new bn(e,t.path,r):new Kn(e,t.path,r)}async function Zs(t,e={}){let n="store"in t?t:new Ot(t),i=await Ks(n);if(wn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof bn||e.kind==="group"&&i instanceof Kn)return i;let r=i instanceof bn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function mt(t,e={}){let n="store"in t?t.store:t,i=wn.version_max(n),r=i==="v2"?mt.v2:mt.v3,s=i==="v2"?mt.v3:mt.v2;return r(t,e).catch(o=>{if(o instanceof tn)return s(t,e);throw o})}mt.v2=Gs;mt.v3=Zs;function*Js(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*Ys(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function Qs({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,o]=r?[-1,i-1]:[0,i];return t===null?t=r?o:s:t<0?(t+=i,t<s&&(t=s)):t>o&&(t=o),e===null?e=r?s:o:e<0?(e+=i,e<s&&(e=s)):e>o&&(e=o),[t,e,n]}function Un(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function Xs(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class Zn extends Error{constructor(e){super(e),this.name="IndexError"}}function $s(t,e){throw new Zn(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function eo(t){throw new Zn(`index out of bounds for dimension with length ${t}`)}function to(){throw new Zn("only slices with step >= 1 are supported")}function no(t,e){t.length>e.length&&$s(t,e)}function io(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&eo(e),t}class ro{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"dim_sel");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");e=io(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Oi{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){oe(this,"start");oe(this,"stop");oe(this,"step");oe(this,"dim_len");oe(this,"dim_chunk_len");oe(this,"nitems");oe(this,"nchunks");const[r,s,o]=Qs(e,n);this.start=r,this.stop=s,this.step=o,this.step<1&&to(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of Js(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),o=s-r;let a=0,l=0;if(this.start<r){const p=(r-this.start)%this.step;p&&(l+=this.step-p),a=Math.ceil((r-this.start)/this.step)}else l=this.start-r;const h=this.stop>s?o:this.stop-r,u=[l,h,this.step],g=Math.ceil((h-l)/this.step),m=[a,a+g,1];yield{dim_chunk_ix:i,dim_chunk_sel:u,dim_out_sel:m}}}}function so(t,e){let n=[];return t===null?n=e.map(i=>Un(null)):Array.isArray(t)&&(n=t.map(i=>i??Un(null))),no(n,e),n}class oo{constructor({selection:e,shape:n,chunk_shape:i}){oe(this,"dim_indexers");oe(this,"shape");this.dim_indexers=so(e,n).map((r,s)=>new(typeof r=="number"?ro:Oi)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Oi).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of Ys(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function lo(t,e){return"get"in t?t.get(e):t[e]}async function ao(t,e,n,i){var l;let r=xs(t),s=new oo({selection:e,shape:t.shape,chunk_shape:t.chunks}),o=i.prepare(new r.TypedArray(s.shape.reduce((h,u)=>h*u,1)),s.shape,r.get_strides(s.shape,n.order)),a=((l=n.create_queue)==null?void 0:l.call(n))??Xs();for(const{chunk_coords:h,mapping:u}of s)a.add(async()=>{let{data:g,shape:m,stride:p}=await t.getChunk(h,n.opts),_=i.prepare(g,m,p);i.set_from_chunk(o,_,u)});return await a.onIdle(),s.shape.length===0?lo(o.data,0):o}function Jn(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return Jn(t,e+r,s-r)},set(r,s=0){for(let o=0;o<r.length;o++)t[e+s+o]=r.get(o)},get(r){return t[e+r]}}}function In(t){return globalThis.Array.isArray(t.data)?{data:Jn(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function uo(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function co(t,e){if(globalThis.Array.isArray(t.data))return Jn([e]);let n=uo(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const fo={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=In(t);Bn(i,e,co(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=In(t);gn(i,In(e),i.bytes_per_element,n)}};async function ho(t,e=null,n={}){return ao(t,e,n,fo)}function kr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Bn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[o,...a]=t.stride;if(typeof r=="number"){const m=t.data.subarray(o*r*i);Bn({data:m,stride:a},s,n,i);return}const[l,h,u]=r,g=kr(l,h,u);if(s.length===0){for(let m=0;m<g;m++)t.data.set(n,o*(l+u*m)*i);return}for(let m=0;m<g;m++){const p=t.data.subarray(o*(l+u*m)*i);Bn({data:p,stride:a},s,n,i)}}function gn(t,e,n,i){const[r,...s]=i,[o,...a]=t.stride,[l,...h]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}gn({data:t.data.subarray(o*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let E=r.from*n;t.data.set(e.data.subarray(E,E+n),0);return}gn(t,{data:e.data.subarray(l*r.from*n),stride:h},n,s);return}const[u,g,m]=r.to,[p,_,y]=r.from,D=kr(u,g,m);if(s.length===0){if(m===1&&y===1&&o===1&&l===1){let E=p*n,M=D*n;t.data.set(e.data.subarray(E,E+M),u*n);return}for(let E=0;E<D;E++){let M=l*(p+y*E)*n;t.data.set(e.data.subarray(M,M+n),o*(u+m*E)*n)}return}for(let E=0;E<D;E++)gn({data:t.data.subarray(o*(u+E*m)*n),stride:a},{data:e.data.subarray(l*(p+E*y)*n),stride:h},n,s)}function Er(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function go(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Li(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function Mi(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function _o(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),o=Number(s);return Er(t,o-e,o,n)}var Qt,Xt,$t,jn;class mo{constructor(e,n={}){Te(this,$t);oe(this,"url");Te(this,Qt);Te(this,Xt);this.url=e,Ee(this,Qt,n.overrides??{}),Ee(this,Xt,n.useSuffixRequest??!1)}async get(e,n={}){let i=Li(this.url,e).href,r=await fetch(i,Sn(this,$t,jn).call(this,n));return Mi(r)}async getRange(e,n,i={}){let r=Li(this.url,e),s=Sn(this,$t,jn).call(this,i),o;return"suffixLength"in n?o=await _o(r,n.suffixLength,s,ne(this,Xt)):o=await Er(r,n.offset,n.length,s),Mi(o)}}Qt=new WeakMap,Xt=new WeakMap,$t=new WeakSet,jn=function(e){return go(ne(this,Qt),e)};function po(t){let e,n;return{c(){e=w("div"),n=w("canvas"),le(n,"width",t[3]+"px"),le(n,"height",t[4]+"px"),le(n,"background-color","lightgrey"),b(n,"height",t[2]),b(n,"width",t[1]),b(n,"class","svelte-lwhhyg"),b(e,"class","canvasWrapper svelte-lwhhyg"),le(e,"width",t[3]+"px"),le(e,"height",t[4]+"px"),at(e,"spinner",t[5])},m(i,r){V(i,e,r),d(e,n),t[12](n)},p(i,[r]){r&8&&le(n,"width",i[3]+"px"),r&16&&le(n,"height",i[4]+"px"),r&4&&b(n,"height",i[2]),r&2&&b(n,"width",i[1]),r&8&&le(e,"width",i[3]+"px"),r&16&&le(e,"height",i[4]+"px"),r&32&&at(e,"spinner",i[5])},i:ke,o:ke,d(i){i&&x(e),t[12](null)}}}function bo(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:o=1}=e,{cssSize:a=120}=e,{max_size:l=512}=e,h,u=a,g=a;o>1?g=u/o:o<1&&(u=g*o);let m=u,p=g,_=!0;const y=new AbortController;async function D(){var z;let M=r.multiscales[0].datasets.map(U=>U.path),q=r.multiscales[0].axes.map(U=>U.name),ee=M.at(-1);s!=null&&s<M.length&&(ee=M[s]);const H=new mo(i+"/"+ee),K=await mt.v3(H,{kind:"array"});let T=q.indexOf("c"),f=K.shape;if(f.at(-1)*f.at(-2)>l*l){console.log("Lowest resolution too large for Thumbnail: ",f,i);return}let c=f.length,k=f[T]||1,R,O;(z=r==null?void 0:r.omero)!=null&&z.channels?(R=r.omero.channels.map(U=>U.active),O=r.omero.channels.map(U=>_r(U.color))):(R=rs(k),O=ss(k,R)),O=O.filter((U,Z)=>R[Z]);let N=R.reduce((U,Z,L)=>(Z&&U.push(L),U),[]).map(U=>{let Z=f.map((L,Q)=>Q==T?U:Q>=c-2?Un(0,L):q[Q]=="z"||q[Q]=="t"?parseInt(L/2+""):0);return ho(K,Z,{opts:{signal:y.signal}})}),X=await Promise.all(N),$=X.map(U=>gr(U)),v=$r(X,$,O);n(1,u=f.at(-1)),n(2,g=f.at(-2));let A=u/a;g>u&&(A=g/a),n(3,m=u/A),n(4,p=g/A),setTimeout(()=>{const U=h.getContext("2d");n(5,_=!1),U.putImageData(new ImageData(v,u,g),0,0)},100)}en(()=>{D()}),xn(()=>{y.abort()});function E(M){Tt[M?"unshift":"push"](()=>{h=M,n(0,h)})}return t.$$set=M=>{"source"in M&&n(6,i=M.source),"attrs"in M&&n(7,r=M.attrs),"thumbDatasetIndex"in M&&n(8,s=M.thumbDatasetIndex),"thumbAspectRatio"in M&&n(9,o=M.thumbAspectRatio),"cssSize"in M&&n(10,a=M.cssSize),"max_size"in M&&n(11,l=M.max_size)},[h,u,g,m,p,_,i,r,s,o,a,l,E]}class Cr extends Je{constructor(e){super(),Ze(this,e,bo,po,Be,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}const vo="https://ome.github.io/ome2024-ngff-challenge/copy.png",wo="https://ome.github.io/ome2024-ngff-challenge/ome-logomark.svg",yo="https://ome.github.io/ome2024-ngff-challenge/original-data.svg";function Fi(t,e,n){const i=t.slice();return i[15]=e[n],i}function Di(t){let e,n;return e=new Cr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function Ni(t){let e,n,i,r,s,o,a,l=t[0].source+"",h,u,g=t[0].csv&&Pi(t);return{c(){e=w("div"),n=w("span"),n.textContent="Data",i=B(),g&&g.c(),r=B(),s=w("span"),s.textContent="provided by",o=B(),a=w("strong"),h=j(l),u=j("."),b(n,"class","hideOnSmall svelte-16ztcjr"),b(s,"class","hideOnSmall svelte-16ztcjr"),le(a,"color","grey")},m(m,p){V(m,e,p),d(e,n),d(e,i),g&&g.m(e,null),d(e,r),d(e,s),d(e,o),d(e,a),d(a,h),d(e,u)},p(m,p){m[0].csv?g?g.p(m,p):(g=Pi(m),g.c(),g.m(e,r)):g&&(g.d(1),g=null),p&1&&l!==(l=m[0].source+"")&&pe(h,l)},d(m){m&&x(e),g&&g.d()}}}function Pi(t){var a;let e,n,i,r=((a=t[0].csv)==null?void 0:a.split("/").pop().replace(".csv",""))+"",s,o;return{c(){e=w("span"),e.textContent="from collection",n=B(),i=w("a"),s=j(r),b(e,"class","hideOnSmall svelte-16ztcjr"),b(i,"title","Show collection in a new tab"),b(i,"href",o=qi(t[0])),b(i,"target","_blank")},m(l,h){V(l,e,h),V(l,n,h),V(l,i,h),d(i,s)},p(l,h){var u;h&1&&r!==(r=((u=l[0].csv)==null?void 0:u.split("/").pop().replace(".csv",""))+"")&&pe(s,r),h&1&&o!==(o=qi(l[0]))&&b(i,"href",o)},d(l){l&&(x(e),x(n),x(i))}}}function Ui(t){let e,n,i,r,s;return{c(){e=w("a"),n=w("img"),b(n,"class","icon svelte-16ztcjr"),le(n,"opacity","0.9"),Bt(n.src,i=yo)||b(n,"src",i),b(e,"title",r="Link to original data: "+t[0].origin),b(e,"href",s=t[0].origin),b(e,"target","_blank")},m(o,a){V(o,e,a),d(e,n)},p(o,a){a&1&&r!==(r="Link to original data: "+o[0].origin)&&b(e,"title",r),a&1&&s!==(s=o[0].origin)&&b(e,"href",s)},d(o){o&&x(e)}}}function Bi(t){let e=t[15].toUpperCase()+"",n,i,r=t[0][`size_${t[15]}`]+"",s,o;return{c(){n=j(e),i=j(":"),s=j(r),o=j("  ")},m(a,l){V(a,n,l),V(a,i,l),V(a,s,l),V(a,o,l)},p(a,l){l&1&&r!==(r=a[0][`size_${a[15]}`]+"")&&pe(s,r)},d(a){a&&(x(n),x(i),x(s),x(o))}}}function ji(t){let e,n=t[0][`size_${t[15]}`]!==void 0&&Bi(t);return{c(){n&&n.c(),e=vn()},m(i,r){n&&n.m(i,r),V(i,e,r)},p(i,r){i[0][`size_${i[15]}`]!==void 0?n?n.p(i,r):(n=Bi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&x(e),n&&n.d(i)}}}function ko(t){let e,n,i=ct(t[0].written)+"",r;return{c(){e=w("div"),n=j("Data size: "),r=j(i)},m(s,o){V(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=ct(s[0].written)+"")&&pe(r,i)},d(s){s&&x(e)}}}function Eo(t){let e,n,i=t[0].shards+"",r;return{c(){e=w("div"),n=j("Shard shape: "),r=j(i)},m(s,o){V(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].shards+"")&&pe(r,i)},d(s){s&&x(e)}}}function Co(t){let e,n,i=t[0].chunks+"",r;return{c(){e=w("div"),n=j("Chunk shape: "),r=j(i)},m(s,o){V(s,e,o),d(e,n),d(e,r)},p(s,o){o&1&&i!==(i=s[0].chunks+"")&&pe(r,i)},d(s){s&&x(e)}}}function So(t){let e,n,i,r,s,o,a=t[10](t[0].url)+"",l,h,u,g=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",m,p,_,y=t[8].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",D,E,M,q,ee,H,K,T,f,c,k,R,O,F,N,X,$,v=t[3]&&Di(t),A=t[0].source&&Ni(t),z=t[0].origin&&Ui(t),U=Ne(["t","c","z","y","x"]),Z=[];for(let C=0;C<5;C+=1)Z[C]=ji(Fi(t,U,C));function L(C,G){return C[2]=="chunk_pixels"?Co:C[2]=="shard_pixels"?Eo:ko}let Q=L(t),I=Q(t);return{c(){e=w("div"),n=w("div"),v&&v.c(),i=B(),r=w("div"),s=w("div"),o=w("strong"),h=B(),u=w("div"),p=B(),_=w("div"),D=B(),A&&A.c(),E=B(),M=w("div"),q=w("button"),q.innerHTML=`<img class="icon svelte-16ztcjr" src="${vo}"/>`,ee=B(),H=w("a"),K=w("img"),c=B(),z&&z.c(),k=B(),R=w("div"),O=j(`Image size:
      `);for(let C=0;C<5;C+=1)Z[C].c();F=B(),I.c(),b(n,"class","thumbWrapper svelte-16ztcjr"),b(s,"title",l=t[0].url),b(u,"class",m=fi(t[1]==""?"hideOnSmall":"")+" svelte-16ztcjr"),b(q,"class","no_border svelte-16ztcjr"),b(q,"title","Copy S3 URL to clipboard"),at(q,"shake",t[7]),b(K,"class","icon svelte-16ztcjr"),le(K,"opacity","0.9"),Bt(K.src,T=wo)||b(K,"src",T),b(H,"title","Validate NGFF with 'ome-ngff-validator' in new browser tab"),b(H,"target","_blank"),b(H,"href",f="https://ome.github.io/ome-ngff-validator/?source="+t[0].url),b(e,"class","zarr-list-item svelte-16ztcjr")},m(C,G){V(C,e,G),d(e,n),v&&v.m(n,null),d(e,i),d(e,r),d(r,s),d(s,o),o.innerHTML=a,d(r,h),d(r,u),u.innerHTML=g,d(r,p),d(r,_),_.innerHTML=y,d(r,D),A&&A.m(r,null),d(r,E),d(r,M),d(M,q),d(M,ee),d(M,H),d(H,K),d(M,c),z&&z.m(M,null),d(r,k),d(r,R),d(R,O);for(let W=0;W<5;W+=1)Z[W]&&Z[W].m(R,null);d(r,F),I.m(r,null),N=!0,X||($=[me(n,"click",t[9]),me(q,"click",t[12])],X=!0)},p(C,[G]){if(C[3]?v?(v.p(C,G),G&8&&re(v,1)):(v=Di(C),v.c(),re(v,1),v.m(n,null)):v&&(zt(),he(v,1,1,()=>{v=null}),Rt()),(!N||G&1)&&a!==(a=C[10](C[0].url)+"")&&(o.innerHTML=a),(!N||G&1&&l!==(l=C[0].url))&&b(s,"title",l),(!N||G&3)&&g!==(g=(C[0].name?C[0].name.replaceAll(C[1],`<mark>${C[1]}</mark>`):"")+"")&&(u.innerHTML=g),(!N||G&2&&m!==(m=fi(C[1]==""?"hideOnSmall":"")+" svelte-16ztcjr"))&&b(u,"class",m),(!N||G&258)&&y!==(y=C[8].replaceAll(C[1],`<mark>${C[1]}</mark>`)+"")&&(_.innerHTML=y),C[0].source?A?A.p(C,G):(A=Ni(C),A.c(),A.m(r,E)):A&&(A.d(1),A=null),(!N||G&128)&&at(q,"shake",C[7]),(!N||G&1&&f!==(f="https://ome.github.io/ome-ngff-validator/?source="+C[0].url))&&b(H,"href",f),C[0].origin?z?z.p(C,G):(z=Ui(C),z.c(),z.m(M,null)):z&&(z.d(1),z=null),G&1){U=Ne(["t","c","z","y","x"]);let W;for(W=0;W<5;W+=1){const ie=Fi(C,U,W);Z[W]?Z[W].p(ie,G):(Z[W]=ji(ie),Z[W].c(),Z[W].m(R,null))}for(;W<5;W+=1)Z[W].d(1)}Q===(Q=L(C))&&I?I.p(C,G):(I.d(1),I=Q(C),I&&(I.c(),I.m(r,null)))},i(C){N||(re(v),N=!0)},o(C){he(v),N=!1},d(C){C&&x(e),v&&v.d(),A&&A.d(),z&&z.d(),Ct(Z,C),I.d(),X=!1,Ye($)}}}function qi(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Ao(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e,a,l,h,u=1;const g=new AbortController;if(r.size_x&&r.size_y){let E=Math.max(r.size_x,r.size_y);for(h=0;E>256;)h+=1,E=E/2;u=r.size_x/r.size_y}function m(){console.log("Clicked on thumbnail"),Ae.setSelectedRow(r)}function p(E){if(s&&E.toLowerCase().includes(s.toLowerCase())){let q=E.toLowerCase(),ee=s.toLowerCase(),H=q.indexOf(ee),K=Math.max(0,Math.min(H,E.length-50)),T=E.substring(K,H);return T+="<mark>",T+=E.substring(H,H+ee.length),T+="</mark>",T+=E.substring(H+ee.length),T}return E.split("/").pop()}en(async()=>{let E=r.url;r.series0!==void 0&&(E+="/"+r.series0);let M=await qt(E,g.signal);n(3,a=M[0]),n(4,l=M[1]),M[2]}),xn(()=>{g.abort()});let _=!1;function y(E){var M=document.createElement("textarea");M.style.position="fixed",M.value=E,document.body.appendChild(M),M.focus(),M.select();let q=!1;try{q=document.execCommand("copy")}catch{console.log("Oops, unable to copy")}document.body.removeChild(M),q&&(n(7,_=!0),setTimeout(()=>n(7,_=!1),1e3))}const D=E=>y(r.url);return t.$$set=E=>{"rowData"in E&&n(0,r=E.rowData),"textFilter"in E&&n(1,s=E.textFilter),"sortedBy"in E&&n(2,o=E.sortedBy)},t.$$.update=()=>{var E;t.$$.dirty&3&&n(8,i=s!=""&&((E=r.description)!=null&&E.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,o,a,l,h,u,_,i,m,p,y,D]}class Io extends Je{constructor(e){super(),Ze(this,e,Ao,So,Be,{rowData:0,textFilter:1,sortedBy:2})}}function To(t){let e,n,i,r;return n=new Io({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=w("div"),Ke(n.$$.fragment),b(e,"slot","item"),b(e,"style",i=t[12]),b(e,"class","row svelte-1xlep2t")},m(s,o){V(s,e,o),Ve(n,e,null),r=!0},p(s,o){const a={};o&8193&&(a.rowData=s[0][s[13]]),o&2&&(a.textFilter=s[1]),o&4&&(a.sortedBy=s[2]),n.$set(a),(!r||o&4096&&i!==(i=s[12]))&&b(e,"style",i)},i(s){r||(re(n.$$.fragment,s),r=!0)},o(s){he(n.$$.fragment,s),r=!1},d(s){s&&x(e),We(n)}}}function zo(t){let e=!1,n=()=>{e=!1},i,r,s,o=`${t[5]}px`,a,l,h;return st(t[8]),st(t[9]),s=new bs({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[To,({style:u,index:g})=>({12:u,13:g}),({style:u,index:g})=>(u?4096:0)|(g?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=w("div"),Ke(s.$$.fragment),b(r,"class","imageListContainer svelte-1xlep2t"),le(r,"height",o)},m(u,g){V(u,r,g),Ve(s,r,null),t[10](r),a=!0,l||(h=[me(window,"resize",t[8]),me(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],l=!0)},p(u,[g]){g&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,u[4]),i=setTimeout(n,100));const m={};g&32&&(m.height=u[5]),g&1&&(m.itemCount=u[0].length),g&28679&&(m.$$scope={dirty:g,ctx:u}),s.$set(m),g&32&&o!==(o=`${u[5]}px`)&&le(r,"height",o)},i(u){a||(re(s.$$.fragment,u),a=!0)},o(u){he(s.$$.fragment,u),a=!1},d(u){u&&x(r),We(s),t[10](null),l=!1,Ye(h)}}}function Ro(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:o=void 0}=e;function a(y){return r[y].url}let l,h=0,u=0;function g(y){let E=l.offsetTop-20;y.detail.offset-u<0&&h>E&&n(4,h-=1),u=y.detail.offset}function m(){n(5,i=window.innerHeight)}function p(){n(4,h=window.pageYOffset)}function _(y){Tt[y?"unshift":"push"](()=>{l=y,n(3,l)})}return t.$$set=y=>{"tableRows"in y&&n(0,r=y.tableRows),"textFilter"in y&&n(1,s=y.textFilter),"sortedBy"in y&&n(2,o=y.sortedBy)},n(5,i=0),[r,s,o,l,h,i,a,g,m,p,_]}class Oo extends Je{constructor(e){super(),Ze(this,e,Ro,zo,Be,{tableRows:0,textFilter:1,sortedBy:2})}}function xi(t){let e,n;return e=new Cr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function Lo(t){let e,n,i=t[0]&&xi(t);return{c(){i&&i.c(),e=vn()},m(r,s){i&&i.m(r,s),V(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&re(i,1)):(i=xi(r),i.c(),re(i,1),i.m(e.parentNode,e)):i&&(zt(),he(i,1,1,()=>{i=null}),Rt())},i(r){n||(re(i),n=!0)},o(r){he(i),n=!1},d(r){r&&x(e),i&&i.d(r)}}}function Mo(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,o,a=1;if(i.size_x&&i.size_y){let l=Math.max(i.size_x,i.size_y);for(o=0;l>1024;)o+=1,l=l/2;a=i.size_x/i.size_y}else o=void 0,a=1;return en(async()=>{let l=await qt(i.url);n(0,r=l[0]),n(1,s=l[1]),l[2]}),t.$$set=l=>{"rowData"in l&&n(4,i=l.rowData)},[r,s,o,a,i]}class Fo extends Je{constructor(e){super(),Ze(this,e,Mo,Lo,Be,{rowData:4})}}function Hi(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function Vi(t){let e,n;return e=new Fo({props:{rowData:t[1]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function Wi(t){let e,n,i=t[2]&&Vi(t);return{c(){i&&i.c(),e=vn()},m(r,s){i&&i.m(r,s),V(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&re(i,1)):(i=Vi(r),i.c(),re(i,1),i.m(e.parentNode,e)):i&&(zt(),he(i,1,1,()=>{i=null}),Rt())},i(r){n||(re(i),n=!0)},o(r){he(i),n=!1},d(r){r&&x(e),i&&i.d(r)}}}function Gi(t){let e,n=Ne(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=Ki(Hi(t,n,r));return{c(){e=w("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){V(r,e,s);for(let o=0;o<i.length;o+=1)i[o]&&i[o].m(e,null)},p(r,s){if(s&2){n=Ne(Object.entries(r[1]));let o;for(o=0;o<n.length;o+=1){const a=Hi(r,n,o);i[o]?i[o].p(a,s):(i[o]=Ki(a),i[o].c(),i[o].m(e,null))}for(;o<i.length;o+=1)i[o].d(1);i.length=n.length}},d(r){r&&x(e),Ct(i,r)}}}function Ki(t){let e,n,i=t[5]+"",r,s,o=t[6]+"",a;return{c(){e=w("tr"),n=w("td"),r=j(i),s=w("td"),a=j(o)},m(l,h){V(l,e,h),d(e,n),d(n,r),d(e,s),d(s,a)},p(l,h){h&2&&i!==(i=l[5]+"")&&pe(r,i),h&2&&o!==(o=l[6]+"")&&pe(a,o)},d(l){l&&x(e)}}}function Do(t){let e,n,i,r,s=t[2],o,a,l,h,u=Wi(t),g=t[1]&&Gi(t);return{c(){e=w("div"),n=w("button"),n.textContent="×",i=B(),r=w("div"),u.c(),o=B(),g&&g.c(),b(n,"class","close svelte-1g3sjso"),b(n,"title","Close"),b(r,"class","scrollable svelte-1g3sjso"),b(e,"id","mypopover"),b(e,"popover",""),b(e,"class","svelte-1g3sjso")},m(m,p){V(m,e,p),d(e,n),d(e,i),d(e,r),u.m(r,null),d(r,o),g&&g.m(r,null),t[4](e),a=!0,l||(h=me(n,"click",t[3]),l=!0)},p(m,[p]){p&4&&Be(s,s=m[2])?(zt(),he(u,1,1,ke),Rt(),u=Wi(m),u.c(),re(u,1),u.m(r,o)):u.p(m,p),m[1]?g?g.p(m,p):(g=Gi(m),g.c(),g.m(r,null)):g&&(g.d(1),g=null)},i(m){a||(re(u),a=!0)},o(m){he(u),a=!1},d(m){m&&x(e),u.d(m),g&&g.d(),t[4](null),l=!1,h()}}}function No(t,e,n){let i,r,s;Ae.subscribeSelectedRow(l=>{console.log("Showing preview for",l),l&&(n(1,r=l),console.log("Showing Thumb preview for",l,r),n(2,s=r.url),i.showPopover())});function o(){i.hidePopover()}en(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",l=>{l.newState==="open"||(console.log("Popover has been hidden"),Ae.setSelectedRow(null))})});function a(l){Tt[l?"unshift":"push"](()=>{i=l,n(0,i)})}return[i,r,s,o,a]}class Po extends Je{constructor(e){super(),Ze(this,e,No,Do,Be,{})}}const Uo="https://ome.github.io/ome2024-ngff-challenge/selectCaret.svg",Bo="https://ome.github.io/ome2024-ngff-challenge/ome-main-nav.svg",jo="https://ome.github.io/ome2024-ngff-challenge/github-mark-white.svg";function qo(t){let e,n,i,r,s,o,a,l,h,u,g,m,p,_,y;return{c(){e=w("base"),n=B(),i=w("nav"),r=w("a"),s=w("img"),a=B(),l=w("a"),h=w("h2"),h.textContent="2024 NGFF Challenge",u=B(),g=w("div"),m=B(),p=w("a"),p.textContent="About",_=B(),y=w("a"),y.innerHTML=`<img alt="GitHub Logo" src="${jo}" class="svelte-1q2q39w"/>`,b(e,"href",t[0]),b(s,"alt","OME Logo"),Bt(s.src,o=Bo)||b(s,"src",o),b(s,"class","svelte-1q2q39w"),b(r,"class","logolink svelte-1q2q39w"),b(r,"href",t[0]),b(h,"class","svelte-1q2q39w"),b(l,"href",t[0]),b(l,"class","svelte-1q2q39w"),le(g,"flex","1"),b(p,"href","about/"),b(p,"class","svelte-1q2q39w"),b(y,"class","github svelte-1q2q39w"),b(y,"title","Open in GitHub"),b(y,"target","_blank"),b(y,"href","https://github.com/ome/ome2024-ngff-challenge/"),b(i,"class","svelte-1q2q39w")},m(D,E){V(D,e,E),V(D,n,E),V(D,i,E),d(i,r),d(r,s),d(i,a),d(i,l),d(l,h),d(i,u),d(i,g),d(i,m),d(i,p),d(i,_),d(i,y)},p:ke,i:ke,o:ke,d(D){D&&(x(e),x(n),x(i))}}}function xo(t){let e="https://ome.github.io/ome2024-ngff-challenge/";return console.log("Nav base",e),[e]}class Ho extends Je{constructor(e){super(),Ze(this,e,xo,qo,Be,{})}}function Zi(t){let e=t[0].plate_count+"",n,i;return{c(){n=j(e),i=j(" plates")},m(r,s){V(r,n,s),V(r,i,s)},p(r,s){s&1&&e!==(e=r[0].plate_count+"")&&pe(n,e)},d(r){r&&(x(n),x(i))}}}function Vo(t){let e,n,i,r,s,o,a,l=t[0].source+"",h,u,g,m,p,_,y=ct(t[0].bytes)+"",D,E,M,q,ee,H,K,T,f=t[0].image_count+"",c,k,R,O,F,N,X,$,v,A=t[0].plate_count&&Zi(t);return{c(){e=w("div"),n=w("label"),i=w("img"),o=B(),a=w("div"),h=j(l),u=B(),g=w("br"),m=B(),p=w("span"),_=j("("),D=j(y),E=j(")"),q=w("input"),H=B(),K=w("div"),A&&A.c(),T=B(),c=j(f),k=j(" images"),R=B(),O=w("label"),F=w("input"),N=B(),X=w("span"),X.textContent="×",b(i,"title",r=t[0].url),b(i,"class","sourceLogo svelte-1iuq3t7"),b(i,"alt","Source logo"),Bt(i.src,s=di(t[0].source))||b(i,"src",s),b(p,"title",M=t[0].child_csv.length+" collections"),b(q,"class","source svelte-1iuq3t7"),b(q,"type","radio"),b(q,"name","source"),q.value=ee=t[0].source,b(K,"class","tooltip svelte-1iuq3t7"),b(n,"class","svelte-1iuq3t7"),b(F,"type","radio"),b(F,"name","source"),F.value="",b(F,"class","svelte-1iuq3t7"),b(X,"title","Clear filter"),b(O,"class","clear svelte-1iuq3t7"),b(e,"class","source svelte-1iuq3t7")},m(z,U){V(z,e,U),d(e,n),d(n,i),d(n,o),d(n,a),d(a,h),d(a,u),d(a,g),d(a,m),d(a,p),d(p,_),d(p,D),d(p,E),d(a,q),d(a,H),d(a,K),A&&A.m(K,null),d(K,T),d(K,c),d(K,k),d(e,R),d(e,O),d(O,F),d(O,N),d(O,X),$||(v=[me(q,"change",function(){_n(t[1])&&t[1].apply(this,arguments)}),me(F,"change",function(){_n(t[1])&&t[1].apply(this,arguments)})],$=!0)},p(z,[U]){t=z,U&1&&r!==(r=t[0].url)&&b(i,"title",r),U&1&&!Bt(i.src,s=di(t[0].source))&&b(i,"src",s),U&1&&l!==(l=t[0].source+"")&&pe(h,l),U&1&&y!==(y=ct(t[0].bytes)+"")&&pe(D,y),U&1&&M!==(M=t[0].child_csv.length+" collections")&&b(p,"title",M),U&1&&ee!==(ee=t[0].source)&&(q.value=ee),t[0].plate_count?A?A.p(t,U):(A=Zi(t),A.c(),A.m(K,T)):A&&(A.d(1),A=null),U&1&&f!==(f=t[0].image_count+"")&&pe(c,f)},i:ke,o:ke,d(z){z&&x(e),A&&A.d(),$=!1,Ye(v)}}}function Wo(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Go extends Je{constructor(e){super(),Ze(this,e,Wo,Vo,Be,{source:0,handleFilter:1})}}function Ko(t,e,n){const i=t.slice();return i[31]=e[n],i}function Ji(t,e,n){const i=t.slice();return i[34]=e[n],i}function Yi(t,e,n){const i=t.slice();return i[34]=e[n],i}function Qi(t,e,n){const i=t.slice();return i[39]=e[n],i}function Xi(t,e,n){const i=t.slice();return i[42]=e[n],i}function Zo(t){let e,n,i,r=t[1].split("/").pop()+"",s,o,a=t[1]!=mn&&$i(t);return{c(){e=w("div"),n=j(`Showing Collection:
            `),i=w("a"),s=j(r),o=B(),a&&a.c(),b(i,"href",t[1]),le(e,"font-size","90%")},m(l,h){V(l,e,h),d(e,n),d(e,i),d(i,s),d(e,o),a&&a.m(e,null)},p(l,h){h[0]&2&&r!==(r=l[1].split("/").pop()+"")&&pe(s,r),h[0]&2&&b(i,"href",l[1]),l[1]!=mn?a?a.p(l,h):(a=$i(l),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},d(l){l&&x(e),a&&a.d()}}}function Jo(t){let e,n=ct(t[4])+"",i,r;return{c(){e=w("strong"),i=j(n),r=j(`
          of public bioimage data in the next major version of OME-Zarr,
          including Zarr v3 and sharding, with distributed hosting.`),le(e,"font-weight","600")},m(s,o){V(s,e,o),d(e,i),V(s,r,o)},p(s,o){o[0]&16&&n!==(n=ct(s[4])+"")&&pe(i,n)},d(s){s&&(x(e),x(r))}}}function $i(t){let e,n=ct(t[4])+"",i,r,s,o,a,l;return{c(){e=j("("),i=j(n),r=j(`)
              `),s=w("span"),s.textContent="  |  ",o=B(),a=w("a"),l=j("Show all collections"),le(s,"color","grey"),b(a,"href",window.location.origin+window.location.pathname)},m(h,u){V(h,e,u),V(h,i,u),V(h,r,u),V(h,s,u),V(h,o,u),V(h,a,u),d(a,l)},p(h,u){u[0]&16&&n!==(n=ct(h[4])+"")&&pe(i,n)},d(h){h&&(x(e),x(i),x(r),x(s),x(o),x(a))}}}function er(t){let e,n;return e=new Go({props:{source:t[42],handleFilter:t[17]}}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},p(i,r){const s={};r[0]&4&&(s.source=i[42]),e.$set(s)},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function tr(t){let e,n,i,r,s,o,a,l,h,u=Ne(Ae.getCsvSourceList(t[14])),g=[];for(let m=0;m<u.length;m+=1)g[m]=nr(Qi(t,u,m));return{c(){e=w("div"),n=w("select"),i=w("option"),i.textContent="Collection";for(let m=0;m<g.length;m+=1)g[m].c();r=B(),s=w("div"),o=w("button"),a=j("×"),i.__value="",Ce(i,i.__value),b(n,"name","collection"),b(n,"class","svelte-10h51w5"),t[12]===void 0&&st(()=>t[24].call(n)),b(o,"title","Clear Filter"),le(o,"visibility",t[12]!==""?"visible":"hidden"),b(o,"class","svelte-10h51w5"),b(s,"class","svelte-10h51w5"),b(e,"class","selectWrapper svelte-10h51w5")},m(m,p){V(m,e,p),d(e,n),d(n,i);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(n,null);ot(n,t[12],!0),d(e,r),d(e,s),d(s,o),d(o,a),l||(h=[me(n,"change",t[24]),me(n,"change",t[19]),me(o,"click",t[19])],l=!0)},p(m,p){if(p[0]&16384){u=Ne(Ae.getCsvSourceList(m[14]));let _;for(_=0;_<u.length;_+=1){const y=Qi(m,u,_);g[_]?g[_].p(y,p):(g[_]=nr(y),g[_].c(),g[_].m(n,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=u.length}p[0]&20480&&ot(n,m[12]),p[0]&4096&&le(o,"visibility",m[12]!==""?"visible":"hidden")},d(m){m&&x(e),Ct(g,m),l=!1,Ye(h)}}}function nr(t){let e,n=(t[39].source==t[14]?sr(t[39].url):t[39].source)+"",i,r,s=t[39].image_count+"",o,a,l;return{c(){e=w("option"),i=j(n),r=j(" ("),o=j(s),a=j(`)
                  `),e.__value=l=t[39].url,Ce(e,e.__value)},m(h,u){V(h,e,u),d(e,i),d(e,r),d(e,o),d(e,a)},p(h,u){u[0]&16384&&n!==(n=(h[39].source==h[14]?sr(h[39].url):h[39].source)+"")&&pe(i,n),u[0]&16384&&s!==(s=h[39].image_count+"")&&pe(o,s),u[0]&16384&&l!==(l=h[39].url)&&(e.__value=l,Ce(e,e.__value))},d(h){h&&x(e)}}}function ir(t){let e,n=t[34]+"",i,r;return{c(){e=w("option"),i=j(n),e.__value=r=t[5][t[34]],Ce(e,e.__value)},m(s,o){V(s,e,o),d(e,i)},p(s,o){o[0]&32&&n!==(n=s[34]+"")&&pe(i,n),o[0]&32&&r!==(r=s[5][s[34]])&&(e.__value=r,Ce(e,e.__value))},d(s){s&&x(e)}}}function rr(t,e){let n,i=e[34]+"",r,s;return{key:t,first:null,c(){n=w("option"),r=j(i),n.__value=s=e[6][e[34]],Ce(n,n.__value),this.first=n},m(o,a){V(o,n,a),d(n,r)},p(o,a){e=o,a[0]&64&&i!==(i=e[34]+"")&&pe(r,i),a[0]&64&&s!==(s=e[6][e[34]])&&(n.__value=s,Ce(n,n.__value))},d(o){o&&x(n)}}}function Yo(t){let e;return{c(){e=w("option"),e.textContent=`Size: ${t[31].toUpperCase()}`,e.__value="size_"+t[31],Ce(e,e.__value)},m(n,i){V(n,e,i)},p:ke,d(n){n&&x(e)}}}function Qo(t){let e,n,i,r,s,o,a,l,h,u,g,m,p,_,y,D,E,M,q,ee=t[14]!==""&&Ae.getCsvSourceList(t[14]).length>0,H,K,T,f,c=t[13]!==""?"All Dimensions":"Dimension Count",k,R,O,F,N,X,$,v,A,z,U,Z,L,Q,I=t[11]==""?"Organism":"All Organisms",C,G,W,ie,P,Y,ue,de,te,be,ge=t[10]==""?"Imaging Modality":"All Modalities",ce,Pe,ve=[],je=new Map,Ge,ze,se,we,Qe,ae,tt,qe,Xe,Oe,Se,Le,Me,ft,Ie,nt,$e,ei,rn,ht,ti,vt,it,ni,sn=t[0].length+"",yn,ii,kn,ri,si,dt,xe,En,oi;e=new Po({});function li(S,J){return S[1]==mn?Jo:Zo}let on=li(t),et=on(t),gt=Ne(t[2]),ye=[];for(let S=0;S<gt.length;S+=1)ye[S]=er(Xi(t,gt,S));const Sr=S=>he(ye[S],1,1,()=>{ye[S]=null});let Ue=ee&&tr(t),wt=Ne(Object.keys(t[5]).sort()),Fe=[];for(let S=0;S<wt.length;S+=1)Fe[S]=ir(Yi(t,wt,S));let ln=Ne(Object.keys(t[6]).sort());const ai=S=>S[34];for(let S=0;S<ln.length;S+=1){let J=Ji(t,ln,S),_e=ai(J);je.set(_e,ve[S]=rr(_e,J))}let Ar=Ne(["x","y","z","c","t"]),Lt=[];for(let S=0;S<5;S+=1)Lt[S]=Yo(Ko(t,Ar,S));return ht=new us({props:{toggleAscending:t[15],sortAscending:t[8]}}),dt=new Oo({props:{tableRows:t[0],textFilter:t[9],sortedBy:t[7]}}),{c(){Ke(e.$$.fragment),n=B(),i=w("main"),r=w("div"),s=w("h3"),et.c(),o=B(),a=w("div"),l=w("input"),h=B(),u=w("button"),g=j("×"),m=B(),p=w("div");for(let S=0;S<ye.length;S+=1)ye[S].c();_=B(),y=w("div"),D=w("div"),E=w("div"),M=w("div"),M.textContent="Filter by:",q=B(),Ue&&Ue.c(),H=B(),K=w("div"),T=w("select"),f=w("option"),k=j(c),R=w("hr"),O=w("option"),O.textContent="2D",F=w("option"),F.textContent="3D",N=w("option"),N.textContent="4D",X=w("option"),X.textContent="5D",$=B(),v=w("div"),A=w("button"),z=j("×"),U=B(),Z=w("div"),L=w("select"),Q=w("option"),C=j(I),G=w("hr");for(let S=0;S<Fe.length;S+=1)Fe[S].c();W=B(),ie=w("div"),P=w("button"),Y=j("×"),ue=B(),de=w("div"),te=w("select"),be=w("option"),ce=j(ge),Pe=w("hr");for(let S=0;S<ve.length;S+=1)ve[S].c();Ge=B(),ze=w("div"),se=w("button"),we=j("×"),Qe=B(),ae=w("div"),tt=B(),qe=w("div"),qe.textContent="Sort by:",Xe=B(),Oe=w("div"),Se=w("select"),Le=w("option"),Le.textContent="--",Me=w("hr");for(let S=0;S<5;S+=1)Lt[S].c();ft=w("hr"),Ie=w("option"),Ie.textContent="Data Size (bytes)",nt=w("option"),nt.textContent="Chunk Size (pixels)",$e=w("option"),$e.textContent="Shard Size (pixels)",ei=B(),rn=w("div"),Ke(ht.$$.fragment),ti=B(),vt=w("div"),it=w("h3"),ni=j("Showing "),yn=j(sn),ii=j(" out of "),kn=j(t[3]),ri=j(" images"),si=B(),Ke(dt.$$.fragment),le(s,"text-align","center"),b(l,"placeholder","Filter by Name or Description"),b(l,"name","textFilter"),b(l,"class","svelte-10h51w5"),b(u,"title","Clear Filter"),le(u,"visibility",t[9]!==""?"visible":"hidden"),b(u,"class","svelte-10h51w5"),b(a,"class","textInputWrapper svelte-10h51w5"),b(p,"class","sources svelte-10h51w5"),b(r,"class","summary svelte-10h51w5"),le(M,"white-space","nowrap"),f.__value="",Ce(f,f.__value),O.__value="2",Ce(O,O.__value),F.__value="3",Ce(F,F.__value),N.__value="4",Ce(N,N.__value),X.__value="5",Ce(X,X.__value),b(T,"class","svelte-10h51w5"),t[13]===void 0&&st(()=>t[25].call(T)),b(A,"title","Clear Filter"),le(A,"visibility",t[13]!==""?"visible":"hidden"),b(A,"class","svelte-10h51w5"),b(v,"class","svelte-10h51w5"),b(K,"class","selectWrapper svelte-10h51w5"),Q.__value="",Ce(Q,Q.__value),b(L,"class","svelte-10h51w5"),t[11]===void 0&&st(()=>t[26].call(L)),b(P,"title","Clear Filter"),le(P,"visibility",t[11]!==""?"visible":"hidden"),b(P,"class","svelte-10h51w5"),b(ie,"class","svelte-10h51w5"),b(Z,"class","selectWrapper svelte-10h51w5"),be.__value="",Ce(be,be.__value),b(te,"class","svelte-10h51w5"),t[10]===void 0&&st(()=>t[27].call(te)),b(se,"title","Clear Filter"),le(se,"visibility",t[10]!==""?"visible":"hidden"),b(se,"class","svelte-10h51w5"),b(ze,"class","svelte-10h51w5"),b(de,"class","selectWrapper svelte-10h51w5"),b(ae,"class","clear"),Le.__value="",Ce(Le,Le.__value),Ie.__value="written",Ce(Ie,Ie.__value),nt.__value="chunk_pixels",Ce(nt,nt.__value),$e.__value="shard_pixels",Ce($e,$e.__value),b(Se,"class","svelte-10h51w5"),b(rn,"class","svelte-10h51w5"),b(Oe,"class","selectWrapper svelte-10h51w5"),b(E,"class","filters svelte-10h51w5"),b(D,"class","sidebar svelte-10h51w5"),le(it,"margin-left","15px"),b(it,"class","svelte-10h51w5"),b(vt,"class","results svelte-10h51w5"),b(y,"class","sidebarContainer svelte-10h51w5"),le(i,"--form-select-bg-img","url('"+Uo+"')"),b(i,"class","svelte-10h51w5")},m(S,J){Ve(e,S,J),V(S,n,J),V(S,i,J),d(i,r),d(r,s),et.m(s,null),d(r,o),d(r,a),d(a,l),Ce(l,t[9]),d(a,h),d(a,u),d(u,g),d(r,m),d(r,p);for(let _e=0;_e<ye.length;_e+=1)ye[_e]&&ye[_e].m(p,null);d(i,_),d(i,y),d(y,D),d(D,E),d(E,M),d(E,q),Ue&&Ue.m(E,null),d(E,H),d(E,K),d(K,T),d(T,f),d(f,k),d(T,R),d(T,O),d(T,F),d(T,N),d(T,X),ot(T,t[13],!0),d(K,$),d(K,v),d(v,A),d(A,z),d(E,U),d(E,Z),d(Z,L),d(L,Q),d(Q,C),d(L,G);for(let _e=0;_e<Fe.length;_e+=1)Fe[_e]&&Fe[_e].m(L,null);ot(L,t[11],!0),d(Z,W),d(Z,ie),d(ie,P),d(P,Y),d(E,ue),d(E,de),d(de,te),d(te,be),d(be,ce),d(te,Pe);for(let _e=0;_e<ve.length;_e+=1)ve[_e]&&ve[_e].m(te,null);ot(te,t[10],!0),d(de,Ge),d(de,ze),d(ze,se),d(se,we),d(E,Qe),d(E,ae),d(E,tt),d(E,qe),d(E,Xe),d(E,Oe),d(Oe,Se),d(Se,Le),d(Se,Me);for(let _e=0;_e<5;_e+=1)Lt[_e]&&Lt[_e].m(Se,null);d(Se,ft),d(Se,Ie),d(Se,nt),d(Se,$e),d(Oe,ei),d(Oe,rn),Ve(ht,rn,null),d(y,ti),d(y,vt),d(vt,it),d(it,ni),d(it,yn),d(it,ii),d(it,kn),d(it,ri),d(vt,si),Ve(dt,vt,null),xe=!0,En||(oi=[me(l,"input",t[23]),me(l,"input",t[22]),me(u,"click",t[22]),me(T,"change",t[25]),me(T,"change",t[18]),me(A,"click",t[18]),me(L,"change",t[26]),me(L,"change",t[20]),me(P,"click",t[20]),me(te,"change",t[27]),me(te,"change",t[21]),me(se,"click",t[21]),me(Se,"change",t[16])],En=!0)},p(S,J){if(on===(on=li(S))&&et?et.p(S,J):(et.d(1),et=on(S),et&&(et.c(),et.m(s,null))),J[0]&512&&l.value!==S[9]&&Ce(l,S[9]),(!xe||J[0]&512)&&le(u,"visibility",S[9]!==""?"visible":"hidden"),J[0]&131076){gt=Ne(S[2]);let fe;for(fe=0;fe<gt.length;fe+=1){const Mt=Xi(S,gt,fe);ye[fe]?(ye[fe].p(Mt,J),re(ye[fe],1)):(ye[fe]=er(Mt),ye[fe].c(),re(ye[fe],1),ye[fe].m(p,null))}for(zt(),fe=gt.length;fe<ye.length;fe+=1)Sr(fe);Rt()}if(J[0]&16384&&(ee=S[14]!==""&&Ae.getCsvSourceList(S[14]).length>0),ee?Ue?Ue.p(S,J):(Ue=tr(S),Ue.c(),Ue.m(E,H)):Ue&&(Ue.d(1),Ue=null),(!xe||J[0]&8192)&&c!==(c=S[13]!==""?"All Dimensions":"Dimension Count")&&pe(k,c),J[0]&8192&&ot(T,S[13]),(!xe||J[0]&8192)&&le(A,"visibility",S[13]!==""?"visible":"hidden"),(!xe||J[0]&2048)&&I!==(I=S[11]==""?"Organism":"All Organisms")&&pe(C,I),J[0]&32){wt=Ne(Object.keys(S[5]).sort());let fe;for(fe=0;fe<wt.length;fe+=1){const Mt=Yi(S,wt,fe);Fe[fe]?Fe[fe].p(Mt,J):(Fe[fe]=ir(Mt),Fe[fe].c(),Fe[fe].m(L,null))}for(;fe<Fe.length;fe+=1)Fe[fe].d(1);Fe.length=wt.length}J[0]&2080&&ot(L,S[11]),(!xe||J[0]&2048)&&le(P,"visibility",S[11]!==""?"visible":"hidden"),(!xe||J[0]&1024)&&ge!==(ge=S[10]==""?"Imaging Modality":"All Modalities")&&pe(ce,ge),J[0]&64&&(ln=Ne(Object.keys(S[6]).sort()),ve=fr(ve,J,ai,1,S,ln,je,te,Br,rr,null,Ji)),J[0]&1088&&ot(te,S[10]),(!xe||J[0]&1024)&&le(se,"visibility",S[10]!==""?"visible":"hidden");const _e={};J[0]&256&&(_e.sortAscending=S[8]),ht.$set(_e),(!xe||J[0]&1)&&sn!==(sn=S[0].length+"")&&pe(yn,sn),(!xe||J[0]&8)&&pe(kn,S[3]);const an={};J[0]&1&&(an.tableRows=S[0]),J[0]&512&&(an.textFilter=S[9]),J[0]&128&&(an.sortedBy=S[7]),dt.$set(an)},i(S){if(!xe){re(e.$$.fragment,S);for(let J=0;J<gt.length;J+=1)re(ye[J]);re(ht.$$.fragment,S),re(dt.$$.fragment,S),xe=!0}},o(S){he(e.$$.fragment,S),ye=ye.filter(Boolean);for(let J=0;J<ye.length;J+=1)he(ye[J]);he(ht.$$.fragment,S),he(dt.$$.fragment,S),xe=!1},d(S){S&&(x(n),x(i)),We(e,S),et.d(),Ct(ye,S),Ue&&Ue.d(),Ct(Fe,S);for(let J=0;J<ve.length;J+=1)ve[J].d();Ct(Lt,S),We(ht),We(dt),En=!1,Ye(oi)}}}function sr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function Xo(t,e,n){let i,r,s,o,a,l,u=new URLSearchParams(window.location.search).get("csv");try{new URL(u)}catch{u=mn}let g=[],m=[],p=0,_=0,y={},D={};Ae.subscribe(v=>{n(0,g=H(v)),n(2,m=Ae.getCsvSourceList()),n(3,p=v.length),n(4,_=v.reduce((A,z)=>A+parseInt(z.written)||0,0))}),pr.subscribe(v=>{let A={};for(const[z,U]of Object.entries(v))A[U]=z;n(5,y=A)}),br.subscribe(v=>{let A={};for(const[z,U]of Object.entries(v))A[U]=z;n(6,D=A)}),u&&dr(u,Ae);let E="",M=!1;function q(){n(8,M=!M),Ae.sortTable(E,M)}function ee(v){n(7,E=v.target.value),E===""?Ae.sortTable("index",!0):Ae.sortTable(E,M)}function H(v){if(i!==""&&(v=v.filter(A=>A.dim_count==i)),s!=="")v=v.filter(A=>A.csv==s);else if(r!==""){let A=Ae.getCsvSourceList(r),z=[r,...A.map(U=>U.source)];v=v.filter(U=>z.includes(U.source))}if(o!==""&&(v=v.filter(A=>A.organismId==o)),a!=""&&(v=v.filter(A=>A.fbbiId==a)),l&&l!=""){let A=l.toLowerCase();v=v.filter(z=>{var U,Z;return z.url.toLowerCase().includes(A)||((U=z.description)==null?void 0:U.toLowerCase().includes(A))||((Z=z.name)==null?void 0:Z.toLowerCase().includes(A))})}return v}function K(v){n(14,r=v.target.value||""),n(12,s=""),console.log("filterSource",r,s),n(0,g=H(Ae.getRows()))}function T(v){n(13,i=v.target.value||""),n(0,g=H(Ae.getRows()))}function f(v){n(12,s=v.target.value||""),n(0,g=H(Ae.getRows()))}function c(v){n(11,o=v.target.value||""),n(0,g=H(Ae.getRows()))}function k(v){n(10,a=v.target.value||""),n(0,g=H(Ae.getRows()))}function R(v){n(9,l=v.target.value),n(0,g=H(Ae.getRows()))}function O(){l=this.value,n(9,l)}function F(){s=cn(this),n(12,s),n(14,r)}function N(){i=cn(this),n(13,i)}function X(){o=cn(this),n(11,o),n(5,y)}function $(){a=cn(this),n(10,a),n(6,D)}return t.$$.update=()=>{t.$$.dirty[0]&1&&g.some(v=>v.source)},n(13,i=""),n(14,r=""),n(12,s=""),n(11,o=""),n(10,a=""),n(9,l=""),[g,u,m,p,_,y,D,E,M,l,a,o,s,i,r,q,ee,K,T,f,c,k,R,O,F,N,X,$]}class $o extends Je{constructor(e){super(),Ze(this,e,Xo,Qo,Be,{},null,[-1,-1])}}const el="https://ome.github.io/ome2024-ngff-challenge/nfdi_rgb_Wortmarke_Zusatz_quer.png",tl="https://ome.github.io/ome2024-ngff-challenge/czi-logo-chan-zuckerberg-initiative-logo.png";function nl(t){let e,n,i;return{c(){e=w("base"),n=B(),i=w("div"),i.innerHTML=`<h2>Introduction</h2> <p>The <a href="https://forum.image.sc/t/ome2024-ngff-challenge/97363">2024 OME-NGFF Challenge</a>
    was conceived at the
    <a href="https://www.openmicroscopy.org/events/ome-community-meeting-2024/">OME Annual Community Meeting</a>
    in Dundee in May 2024. The stated goals of Challenge were:</p> <ul><li>Advancing the status of OME-Zarr specification proposals —
      <a href="https://ngff.openmicroscopy.org/rfc/">Requests for Comment (RFC)</a> —
      especially the adoption of the Zarr V3 specification</li> <li>Collecting the URLs of converted examples of OME-Zarr from multiple modalities, use cases, and
      institutions, all hosted by each participant themselves</li> <li>Testing the level of maturity of OME-Zarr conversion tools, image viewers,
      and metadata in general</li></ul> <p>The inspiration for the Challenge came from presentations at the OME Meeting
    that demonstrated the level of adoption of OME-Zarr and the relative ease of
    conversion for some community members, but highlighted the often poor findability of the data
    and the need for driving the OME-Zarr specification towards version 1.0.
  </p><p>A lofty goal of 1 Petabyte (PB) of data was set, mostly to make clear the scale of what <em>could be</em>.</p> <p>Work on the challenge started in earnest in July 2024. All progress is
    tracked in the <a href="https://github.com/ome/ome2024-ngff-challenge">ome2024-ngff-challenge</a>
    repository. It was agreed that the deadline for submission would be such that the results
    of the OME-NGFF Challenge could be presented at the
    <a href="https://globalbioimaging.org/exchange-of-experience/exchange-of-experience-ix">2024 Global BioImaging Meeting</a>.</p> <h2>Process</h2> <p>The Challenge was run via a series of virtual meetings open to all which were coordinated on the
    Image.sc Forums, with all
    <a href="https://hackmd.io/3emKqKQsT_2U35vLepzDEQ">notes and lists of participants</a>
    available. Initial meetings including that at OME2024 focused on defining the scope of
    changes that would be made to the OME-Zarr format. A Python-based tool to convert data
    to this format was built. Submissions were then collected in simple CSV files with a Zarr
    URL per row.</p> <h2>Results</h2> <p>At the outset, it was unclear how much OME-Zarr data was available, if it
    could be converted to Zarr V3, and how many organisations would participate.
    In the end, we are pleased with the more than 500 Terabytes of data which
    have been made available, across a wide range of modalities.</p> <p>To make the collection as accessible as possible, the
  <a href="https://ome.github.io/ome2024-ngff-challenge">OME-NGFF Challenge Viewer</a>,
    parses submissions from contributors and provides a single view across
    all Zarr files. Data can be searched by key-word,
    filtered and sorted by various metadata and browsed with thumbnails,
    all generated on the fly. Links allow opening of datasets with the OME NGFF
    Validator for metadata validation and viewing.
    Please let us know on image.sc or GitHub if you have any issues
    or ideas.</p> <p>Looking back, perhaps the most rewarding outcome of the Challenge is that with a remarkably
    modest investment of time and cloud resources, we have almost inadvertently prototyped
    a federated bioimage data system based on OME-Zarr, the largest one we know of.
    We hope future challenges will continue to push the state-of-the-art forward.</p> <h2>Acknowledgements</h2> <p>Coordination of the challenge has been supported by the <a href="https://www.nfdi.de/">German National Research Data
    Initiative (NFDI)</a> and the <a href="https://chanzuckerberg.com/">Chan Zuckerberg Initiative</a>:</p> <table><tr><td><img src="${el}" width="45%"/></td> <td><img src="${tl}" width="45%"/></td></tr></table>`,b(e,"href",t[0]),b(i,"class","svelte-zlrnwt")},m(r,s){V(r,e,s),V(r,n,s),V(r,i,s)},p:ke,i:ke,o:ke,d(r){r&&(x(e),x(n),x(i))}}}function il(t){return["https://ome.github.io/ome2024-ngff-challenge/"]}class rl extends Je{constructor(e){super(),Ze(this,e,il,nl,Be,{})}}function sl(t){let e,n;return e=new $o({}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function ol(t){let e,n;return e=new rl({}),{c(){Ke(e.$$.fragment)},m(i,r){Ve(e,i,r),n=!0},i(i){n||(re(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function ll(t){let e,n,i,r,s,o;n=new Ho({});const a=[ol,sl],l=[];function h(u,g){return u[0].endsWith("/about/")?0:1}return r=h(t),s=l[r]=a[r](t),{c(){e=w("div"),Ke(n.$$.fragment),i=B(),s.c(),b(e,"class","app svelte-1mc4mod")},m(u,g){V(u,e,g),Ve(n,e,null),d(e,i),l[r].m(e,null),o=!0},p:ke,i(u){o||(re(n.$$.fragment,u),re(s),o=!0)},o(u){he(n.$$.fragment,u),he(s),o=!1},d(u){u&&x(e),We(n),l[r].d()}}}function al(t){return[window.location.pathname]}class ul extends Je{constructor(e){super(),Ze(this,e,al,ll,Be,{})}}new ul({target:document.getElementById("app")});
