const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/blosc-E49GQuAK.js","assets/chunk-INHXZS53-D3tQiqtZ.js","assets/gzip-CF-9a_hd.js","assets/browser-B-ZyVB-j.js","assets/lz4-BIGKWw27.js","assets/zlib-CBiqHlio.js","assets/zstd-IvP746pw.js"])))=>i.map(i=>d[i]);
var Dr=Object.defineProperty;var gi=t=>{throw TypeError(t)};var Nr=(t,e,n)=>e in t?Dr(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var le=(t,e,n)=>Nr(t,typeof e!="symbol"?e+"":e,n),Tn=(t,e,n)=>e.has(t)||gi("Cannot "+n);var $=(t,e,n)=>(Tn(t,e,"read from private field"),n?n.call(t):e.get(t)),Ie=(t,e,n)=>e.has(t)?gi("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(t):e.set(t,n),ke=(t,e,n,i)=>(Tn(t,e,"write to private field"),i?i.call(t,n):e.set(t,n),n),On=(t,e,n)=>(Tn(t,e,"access private method"),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();function ye(){}function Pr(t,e){for(const n in e)t[n]=e[n];return t}function mr(t){return t()}function mi(){return Object.create(null)}function nt(t){t.forEach(mr)}function wn(t){return typeof t=="function"}function xe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}let _n;function Ln(t,e){return t===e?!0:(_n||(_n=document.createElement("a")),_n.href=e,t===_n.href)}function Ur(t){return Object.keys(t).length===0}function Br(t,...e){if(t==null){for(const i of e)i(void 0);return ye}const n=t.subscribe(...e);return n.unsubscribe?()=>n.unsubscribe():n}function xt(t){let e;return Br(t,n=>e=n)(),e}function Mn(t,e,n,i){if(t){const r=pr(t,e,n,i);return t[0](r)}}function pr(t,e,n,i){return t[1]&&i?Pr(n.ctx.slice(),t[1](i(e))):n.ctx}function Fn(t,e,n,i){if(t[2]&&i){const r=t[2](i(n));if(e.dirty===void 0)return r;if(typeof r=="object"){const s=[],l=Math.max(e.dirty.length,r.length);for(let a=0;a<l;a+=1)s[a]=e.dirty[a]|r[a];return s}return e.dirty|r}return e.dirty}function Dn(t,e,n,i,r,s){if(r){const l=pr(e,n,i,s);t.p(l,r)}}function Nn(t){if(t.ctx.length>32){const e=[],n=t.ctx.length/32;for(let i=0;i<n;i++)e[i]=-1;return e}return-1}function pi(t){return t??""}function d(t,e){t.appendChild(e)}function V(t,e,n){t.insertBefore(e,n||null)}function x(t){t.parentNode&&t.parentNode.removeChild(t)}function Ot(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function k(t){return document.createElement(t)}function B(t){return document.createTextNode(t)}function q(){return B(" ")}function En(){return B("")}function be(t,e,n,i){return t.addEventListener(e,n,i),()=>t.removeEventListener(e,n,i)}function b(t,e,n){n==null?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function jr(t){return Array.from(t.childNodes)}function me(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ee(t,e){t.value=e??""}function ae(t,e,n,i){n==null?t.style.removeProperty(e):t.style.setProperty(e,n,"")}function ot(t,e,n){for(let i=0;i<t.options.length;i+=1){const r=t.options[i];if(r.__value===e){r.selected=!0;return}}(!n||e!==void 0)&&(t.selectedIndex=-1)}function gn(t){const e=t.querySelector(":checked");return e&&e.__value}function Tt(t,e,n){t.classList.toggle(e,!!n)}function qr(t,e,{bubbles:n=!1,cancelable:i=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:i})}let Gt;function Wt(t){Gt=t}function Gn(){if(!Gt)throw new Error("Function called outside component initialization");return Gt}function on(t){Gn().$$.on_mount.push(t)}function Kn(t){Gn().$$.on_destroy.push(t)}function xr(){const t=Gn();return(e,n,{cancelable:i=!1}={})=>{const r=t.$$.callbacks[e];if(r){const s=qr(e,n,{cancelable:i});return r.slice().forEach(l=>{l.call(t,s)}),!s.defaultPrevented}return!0}}const It=[],Mt=[];let Rt=[];const bi=[],Vr=Promise.resolve();let Pn=!1;function Hr(){Pn||(Pn=!0,Vr.then(Ne))}function lt(t){Rt.push(t)}const Rn=new Set;let St=0;function Ne(){if(St!==0)return;const t=Gt;do{try{for(;St<It.length;){const e=It[St];St++,Wt(e),Wr(e.$$)}}catch(e){throw It.length=0,St=0,e}for(Wt(null),It.length=0,St=0;Mt.length;)Mt.pop()();for(let e=0;e<Rt.length;e+=1){const n=Rt[e];Rn.has(n)||(Rn.add(n),n())}Rt.length=0}while(It.length);for(;bi.length;)bi.pop()();Pn=!1,Rn.clear(),Wt(t)}function Wr(t){if(t.fragment!==null){t.update(),nt(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(lt)}}function Gr(t){const e=[],n=[];Rt.forEach(i=>t.indexOf(i)===-1?e.push(i):n.push(i)),n.forEach(i=>i()),Rt=e}const pn=new Set;let gt;function Ft(){gt={r:0,c:[],p:gt}}function Dt(){gt.r||nt(gt.c),gt=gt.p}function se(t,e){t&&t.i&&(pn.delete(t),t.i(e))}function he(t,e,n,i){if(t&&t.o){if(pn.has(t))return;pn.add(t),gt.c.push(()=>{pn.delete(t),i&&(n&&t.d(1),i())}),t.o(e)}else i&&i()}function Pe(t){return(t==null?void 0:t.length)!==void 0?t:Array.from(t)}function Kr(t,e){t.d(1),e.delete(t.key)}function Jr(t,e){he(t,1,1,()=>{e.delete(t.key)})}function br(t,e,n,i,r,s,l,a,o,h,f,g){let m=t.length,p=s.length,_=m;const y={};for(;_--;)y[t[_].key]=_;const U=[],F=new Map,L=new Map,Y=[];for(_=p;_--;){const z=g(r,s,_),u=n(z);let c=l.get(u);c?Y.push(()=>c.p(z,e)):(c=h(u,z),c.c()),F.set(u,U[_]=c),u in y&&L.set(u,Math.abs(_-y[u]))}const W=new Set,X=new Set;function Z(z){se(z,1),z.m(a,f),l.set(z.key,z),f=z.first,p--}for(;m&&p;){const z=U[p-1],u=t[m-1],c=z.key,E=u.key;z===u?(f=z.first,m--,p--):F.has(E)?!l.has(c)||W.has(c)?Z(z):X.has(E)?m--:L.get(c)>L.get(E)?(X.add(c),Z(z)):(W.add(E),m--):(o(u,l),m--)}for(;m--;){const z=t[m];F.has(z.key)||o(z,l)}for(;p;)Z(U[p-1]);return nt(Y),U}function Je(t){t&&t.c()}function He(t,e,n){const{fragment:i,after_update:r}=t.$$;i&&i.m(e,n),lt(()=>{const s=t.$$.on_mount.map(mr).filter(wn);t.$$.on_destroy?t.$$.on_destroy.push(...s):nt(s),t.$$.on_mount=[]}),r.forEach(lt)}function We(t,e){const n=t.$$;n.fragment!==null&&(Gr(n.after_update),nt(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function Zr(t,e){t.$$.dirty[0]===-1&&(It.push(t),Hr(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function Ze(t,e,n,i,r,s,l=null,a=[-1]){const o=Gt;Wt(t);const h=t.$$={fragment:null,ctx:[],props:s,update:ye,not_equal:r,bound:mi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(o?o.$$.context:[])),callbacks:mi(),dirty:a,skip_bound:!1,root:e.target||o.$$.root};l&&l(h.root);let f=!1;if(h.ctx=n?n(t,e.props||{},(g,m,...p)=>{const _=p.length?p[0]:m;return h.ctx&&r(h.ctx[g],h.ctx[g]=_)&&(!h.skip_bound&&h.bound[g]&&h.bound[g](_),f&&Zr(t,g)),m}):[],h.update(),f=!0,nt(h.before_update),h.fragment=i?i(h.ctx):!1,e.target){if(e.hydrate){const g=jr(e.target);h.fragment&&h.fragment.l(g),g.forEach(x)}else h.fragment&&h.fragment.c();e.intro&&se(t.$$.fragment),He(t,e.target,e.anchor),Ne()}Wt(o)}class Ye{constructor(){le(this,"$$");le(this,"$$set")}$destroy(){We(this,1),this.$destroy=ye}$on(e,n){if(!wn(n))return ye;const i=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return i.push(n),()=>{const r=i.indexOf(n);r!==-1&&i.splice(r,1)}}$set(e){this.$$set&&!Ur(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const Yr="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Yr);const At=[];function Un(t,e=ye){let n;const i=new Set;function r(a){if(xe(t,a)&&(t=a,n)){const o=!At.length;for(const h of i)h[1](),At.push(h,t);if(o){for(let h=0;h<At.length;h+=2)At[h][0](At[h+1]);At.length=0}}}function s(a){r(a(t))}function l(a,o=ye){const h=[a,o];return i.add(h),i.size===1&&(n=e(r,s)||ye),a(t),()=>{i.delete(h),i.size===0&&n&&(n(),n=null)}}return{set:r,update:s,subscribe:l}}var Qr=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xr(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var vr={exports:{}};/* @license
Papa Parse
v5.4.1
https://github.com/mholt/PapaParse
License: MIT
*/(function(t,e){(function(n,i){t.exports=i()})(Qr,function n(){var i=typeof self<"u"?self:typeof window<"u"?window:i!==void 0?i:{},r=!i.document&&!!i.postMessage,s=i.IS_PAPA_WORKER||!1,l={},a=0,o={parse:function(u,c){var E=(c=c||{}).dynamicTyping||!1;if(z(E)&&(c.dynamicTypingFunction=E,E={}),c.dynamicTyping=E,c.transform=!!z(c.transform)&&c.transform,c.worker&&o.WORKERS_SUPPORTED){var A=function(){if(!o.WORKERS_SUPPORTED)return!1;var R=(Q=i.URL||i.webkitURL||null,j=n.toString(),o.BLOB_URL||(o.BLOB_URL=Q.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",j,")();"],{type:"text/javascript"})))),P=new i.Worker(R),Q,j;return P.onmessage=L,P.id=a++,l[P.id]=P}();return A.userStep=c.step,A.userChunk=c.chunk,A.userComplete=c.complete,A.userError=c.error,c.step=z(c.step),c.chunk=z(c.chunk),c.complete=z(c.complete),c.error=z(c.error),delete c.worker,void A.postMessage({input:u,config:c,workerId:A.id})}var T=null;return o.NODE_STREAM_INPUT,typeof u=="string"?(u=function(R){return R.charCodeAt(0)===65279?R.slice(1):R}(u),T=c.download?new g(c):new p(c)):u.readable===!0&&z(u.read)&&z(u.on)?T=new _(c):(i.File&&u instanceof File||u instanceof Object)&&(T=new m(c)),T.stream(u)},unparse:function(u,c){var E=!1,A=!0,T=",",R=`\r
`,P='"',Q=P+P,j=!1,w=null,S=!1;(function(){if(typeof c=="object"){if(typeof c.delimiter!="string"||o.BAD_DELIMITERS.filter(function(O){return c.delimiter.indexOf(O)!==-1}).length||(T=c.delimiter),(typeof c.quotes=="boolean"||typeof c.quotes=="function"||Array.isArray(c.quotes))&&(E=c.quotes),typeof c.skipEmptyLines!="boolean"&&typeof c.skipEmptyLines!="string"||(j=c.skipEmptyLines),typeof c.newline=="string"&&(R=c.newline),typeof c.quoteChar=="string"&&(P=c.quoteChar),typeof c.header=="boolean"&&(A=c.header),Array.isArray(c.columns)){if(c.columns.length===0)throw new Error("Option columns is empty");w=c.columns}c.escapeChar!==void 0&&(Q=c.escapeChar+P),(typeof c.escapeFormulae=="boolean"||c.escapeFormulae instanceof RegExp)&&(S=c.escapeFormulae instanceof RegExp?c.escapeFormulae:/^[=+\-@\t\r].*$/)}})();var I=new RegExp(U(P),"g");if(typeof u=="string"&&(u=JSON.parse(u)),Array.isArray(u)){if(!u.length||Array.isArray(u[0]))return M(null,u,j);if(typeof u[0]=="object")return M(w||Object.keys(u[0]),u,j)}else if(typeof u=="object")return typeof u.data=="string"&&(u.data=JSON.parse(u.data)),Array.isArray(u.data)&&(u.fields||(u.fields=u.meta&&u.meta.fields||w),u.fields||(u.fields=Array.isArray(u.data[0])?u.fields:typeof u.data[0]=="object"?Object.keys(u.data[0]):[]),Array.isArray(u.data[0])||typeof u.data[0]=="object"||(u.data=[u.data])),M(u.fields||[],u.data||[],j);throw new Error("Unable to serialize unrecognized input");function M(O,J,v){var D="";typeof O=="string"&&(O=JSON.parse(O)),typeof J=="string"&&(J=JSON.parse(J));var H=Array.isArray(O)&&0<O.length,ie=!Array.isArray(J[0]);if(H&&A){for(var ne=0;ne<O.length;ne++)0<ne&&(D+=T),D+=ee(O[ne],ne);0<J.length&&(D+=R)}for(var N=0;N<J.length;N++){var G=H?O.length:J[N].length,oe=!1,pe=H?Object.keys(J[N]).length===0:J[N].length===0;if(v&&!H&&(oe=v==="greedy"?J[N].join("").trim()==="":J[N].length===1&&J[N][0].length===0),v==="greedy"&&H){for(var ue=[],Se=0;Se<G;Se++){var de=ie?O[Se]:Se;ue.push(J[N][de])}oe=ue.join("").trim()===""}if(!oe){for(var re=0;re<G;re++){0<re&&!pe&&(D+=T);var Ue=H&&ie?O[re]:re;D+=ee(J[N][Ue],re)}N<J.length-1&&(!v||0<G&&!pe)&&(D+=R)}}return D}function ee(O,J){if(O==null)return"";if(O.constructor===Date)return JSON.stringify(O).slice(1,25);var v=!1;S&&typeof O=="string"&&S.test(O)&&(O="'"+O,v=!0);var D=O.toString().replace(I,Q);return(v=v||E===!0||typeof E=="function"&&E(O,J)||Array.isArray(E)&&E[J]||function(H,ie){for(var ne=0;ne<ie.length;ne++)if(-1<H.indexOf(ie[ne]))return!0;return!1}(D,o.BAD_DELIMITERS)||-1<D.indexOf(T)||D.charAt(0)===" "||D.charAt(D.length-1)===" ")?P+D+P:D}}};if(o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!r&&!!i.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=F,o.ParserHandle=y,o.NetworkStreamer=g,o.FileStreamer=m,o.StringStreamer=p,o.ReadableStreamStreamer=_,i.jQuery){var h=i.jQuery;h.fn.parse=function(u){var c=u.config||{},E=[];return this.each(function(R){if(!(h(this).prop("tagName").toUpperCase()==="INPUT"&&h(this).attr("type").toLowerCase()==="file"&&i.FileReader)||!this.files||this.files.length===0)return!0;for(var P=0;P<this.files.length;P++)E.push({file:this.files[P],inputElem:this,instanceConfig:h.extend({},c)})}),A(),this;function A(){if(E.length!==0){var R,P,Q,j,w=E[0];if(z(u.before)){var S=u.before(w.file,w.inputElem);if(typeof S=="object"){if(S.action==="abort")return R="AbortError",P=w.file,Q=w.inputElem,j=S.reason,void(z(u.error)&&u.error({name:R},P,Q,j));if(S.action==="skip")return void T();typeof S.config=="object"&&(w.instanceConfig=h.extend(w.instanceConfig,S.config))}else if(S==="skip")return void T()}var I=w.instanceConfig.complete;w.instanceConfig.complete=function(M){z(I)&&I(M,w.file,w.inputElem),T()},o.parse(w.file,w.instanceConfig)}else z(u.complete)&&u.complete()}function T(){E.splice(0,1),A()}}}function f(u){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(c){var E=X(c);E.chunkSize=parseInt(E.chunkSize),c.step||c.chunk||(E.chunkSize=null),this._handle=new y(E),(this._handle.streamer=this)._config=E}).call(this,u),this.parseChunk=function(c,E){if(this.isFirstChunk&&z(this._config.beforeFirstChunk)){var A=this._config.beforeFirstChunk(c);A!==void 0&&(c=A)}this.isFirstChunk=!1,this._halted=!1;var T=this._partialLine+c;this._partialLine="";var R=this._handle.parse(T,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var P=R.meta.cursor;this._finished||(this._partialLine=T.substring(P-this._baseIndex),this._baseIndex=P),R&&R.data&&(this._rowCount+=R.data.length);var Q=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(s)i.postMessage({results:R,workerId:o.WORKER_ID,finished:Q});else if(z(this._config.chunk)&&!E){if(this._config.chunk(R,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);R=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(R.data),this._completeResults.errors=this._completeResults.errors.concat(R.errors),this._completeResults.meta=R.meta),this._completed||!Q||!z(this._config.complete)||R&&R.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Q||R&&R.meta.paused||this._nextChunk(),R}this._halted=!0},this._sendError=function(c){z(this._config.error)?this._config.error(c):s&&this._config.error&&i.postMessage({workerId:o.WORKER_ID,error:c,finished:!1})}}function g(u){var c;(u=u||{}).chunkSize||(u.chunkSize=o.RemoteChunkSize),f.call(this,u),this._nextChunk=r?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(E){this._input=E,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(c=new XMLHttpRequest,this._config.withCredentials&&(c.withCredentials=this._config.withCredentials),r||(c.onload=Z(this._chunkLoaded,this),c.onerror=Z(this._chunkError,this)),c.open(this._config.downloadRequestBody?"POST":"GET",this._input,!r),this._config.downloadRequestHeaders){var E=this._config.downloadRequestHeaders;for(var A in E)c.setRequestHeader(A,E[A])}if(this._config.chunkSize){var T=this._start+this._config.chunkSize-1;c.setRequestHeader("Range","bytes="+this._start+"-"+T)}try{c.send(this._config.downloadRequestBody)}catch(R){this._chunkError(R.message)}r&&c.status===0&&this._chunkError()}},this._chunkLoaded=function(){c.readyState===4&&(c.status<200||400<=c.status?this._chunkError():(this._start+=this._config.chunkSize?this._config.chunkSize:c.responseText.length,this._finished=!this._config.chunkSize||this._start>=function(E){var A=E.getResponseHeader("Content-Range");return A===null?-1:parseInt(A.substring(A.lastIndexOf("/")+1))}(c),this.parseChunk(c.responseText)))},this._chunkError=function(E){var A=c.statusText||E;this._sendError(new Error(A))}}function m(u){var c,E;(u=u||{}).chunkSize||(u.chunkSize=o.LocalChunkSize),f.call(this,u);var A=typeof FileReader<"u";this.stream=function(T){this._input=T,E=T.slice||T.webkitSlice||T.mozSlice,A?((c=new FileReader).onload=Z(this._chunkLoaded,this),c.onerror=Z(this._chunkError,this)):c=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var T=this._input;if(this._config.chunkSize){var R=Math.min(this._start+this._config.chunkSize,this._input.size);T=E.call(T,this._start,R)}var P=c.readAsText(T,this._config.encoding);A||this._chunkLoaded({target:{result:P}})},this._chunkLoaded=function(T){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(T.target.result)},this._chunkError=function(){this._sendError(c.error)}}function p(u){var c;f.call(this,u=u||{}),this.stream=function(E){return c=E,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var E,A=this._config.chunkSize;return A?(E=c.substring(0,A),c=c.substring(A)):(E=c,c=""),this._finished=!c,this.parseChunk(E)}}}function _(u){f.call(this,u=u||{});var c=[],E=!0,A=!1;this.pause=function(){f.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){f.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(T){this._input=T,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){A&&c.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),c.length?this.parseChunk(c.shift()):E=!0},this._streamData=Z(function(T){try{c.push(typeof T=="string"?T:T.toString(this._config.encoding)),E&&(E=!1,this._checkIsFinished(),this.parseChunk(c.shift()))}catch(R){this._streamError(R)}},this),this._streamError=Z(function(T){this._streamCleanUp(),this._sendError(T)},this),this._streamEnd=Z(function(){this._streamCleanUp(),A=!0,this._streamData("")},this),this._streamCleanUp=Z(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function y(u){var c,E,A,T=Math.pow(2,53),R=-T,P=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,Q=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,j=this,w=0,S=0,I=!1,M=!1,ee=[],O={data:[],errors:[],meta:{}};if(z(u.step)){var J=u.step;u.step=function(N){if(O=N,H())D();else{if(D(),O.data.length===0)return;w+=N.data.length,u.preview&&w>u.preview?E.abort():(O.data=O.data[0],J(O,j))}}}function v(N){return u.skipEmptyLines==="greedy"?N.join("").trim()==="":N.length===1&&N[0].length===0}function D(){return O&&A&&(ne("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),A=!1),u.skipEmptyLines&&(O.data=O.data.filter(function(N){return!v(N)})),H()&&function(){if(!O)return;function N(oe,pe){z(u.transformHeader)&&(oe=u.transformHeader(oe,pe)),ee.push(oe)}if(Array.isArray(O.data[0])){for(var G=0;H()&&G<O.data.length;G++)O.data[G].forEach(N);O.data.splice(0,1)}else O.data.forEach(N)}(),function(){if(!O||!u.header&&!u.dynamicTyping&&!u.transform)return O;function N(oe,pe){var ue,Se=u.header?{}:[];for(ue=0;ue<oe.length;ue++){var de=ue,re=oe[ue];u.header&&(de=ue>=ee.length?"__parsed_extra":ee[ue]),u.transform&&(re=u.transform(re,de)),re=ie(de,re),de==="__parsed_extra"?(Se[de]=Se[de]||[],Se[de].push(re)):Se[de]=re}return u.header&&(ue>ee.length?ne("FieldMismatch","TooManyFields","Too many fields: expected "+ee.length+" fields but parsed "+ue,S+pe):ue<ee.length&&ne("FieldMismatch","TooFewFields","Too few fields: expected "+ee.length+" fields but parsed "+ue,S+pe)),Se}var G=1;return!O.data.length||Array.isArray(O.data[0])?(O.data=O.data.map(N),G=O.data.length):O.data=N(O.data,0),u.header&&O.meta&&(O.meta.fields=ee),S+=G,O}()}function H(){return u.header&&ee.length===0}function ie(N,G){return oe=N,u.dynamicTypingFunction&&u.dynamicTyping[oe]===void 0&&(u.dynamicTyping[oe]=u.dynamicTypingFunction(oe)),(u.dynamicTyping[oe]||u.dynamicTyping)===!0?G==="true"||G==="TRUE"||G!=="false"&&G!=="FALSE"&&(function(pe){if(P.test(pe)){var ue=parseFloat(pe);if(R<ue&&ue<T)return!0}return!1}(G)?parseFloat(G):Q.test(G)?new Date(G):G===""?null:G):G;var oe}function ne(N,G,oe,pe){var ue={type:N,code:G,message:oe};pe!==void 0&&(ue.row=pe),O.errors.push(ue)}this.parse=function(N,G,oe){var pe=u.quoteChar||'"';if(u.newline||(u.newline=function(de,re){de=de.substring(0,1048576);var Ue=new RegExp(U(re)+"([^]*?)"+U(re),"gm"),Me=(de=de.replace(Ue,"")).split("\r"),Te=de.split(`
`),ve=1<Te.length&&Te[0].length<Me[0].length;if(Me.length===1||ve)return`
`;for(var Ae=0,fe=0;fe<Me.length;fe++)Me[fe][0]===`
`&&Ae++;return Ae>=Me.length/2?`\r
`:"\r"}(N,pe)),A=!1,u.delimiter)z(u.delimiter)&&(u.delimiter=u.delimiter(N),O.meta.delimiter=u.delimiter);else{var ue=function(de,re,Ue,Me,Te){var ve,Ae,fe,ge;Te=Te||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var et=0;et<Te.length;et++){var te=Te[et],it=0,Ge=0,Ke=0;fe=void 0;for(var Oe=new F({comments:Me,delimiter:te,newline:re,preview:10}).parse(de),Qe=0;Qe<Oe.data.length;Qe++)if(Ue&&v(Oe.data[Qe]))Ke++;else{var Xe=Oe.data[Qe].length;Ge+=Xe,fe!==void 0?0<Xe&&(it+=Math.abs(Xe-fe),fe=Xe):fe=Xe}0<Oe.data.length&&(Ge/=Oe.data.length-Ke),(Ae===void 0||it<=Ae)&&(ge===void 0||ge<Ge)&&1.99<Ge&&(Ae=it,ve=te,ge=Ge)}return{successful:!!(u.delimiter=ve),bestDelimiter:ve}}(N,u.newline,u.skipEmptyLines,u.comments,u.delimitersToGuess);ue.successful?u.delimiter=ue.bestDelimiter:(A=!0,u.delimiter=o.DefaultDelimiter),O.meta.delimiter=u.delimiter}var Se=X(u);return u.preview&&u.header&&Se.preview++,c=N,E=new F(Se),O=E.parse(c,G,oe),D(),I?{meta:{paused:!0}}:O||{meta:{paused:!1}}},this.paused=function(){return I},this.pause=function(){I=!0,E.abort(),c=z(u.chunk)?"":c.substring(E.getCharIndex())},this.resume=function(){j.streamer._halted?(I=!1,j.streamer.parseChunk(c,!0)):setTimeout(j.resume,3)},this.aborted=function(){return M},this.abort=function(){M=!0,E.abort(),O.meta.aborted=!0,z(u.complete)&&u.complete(O),c=""}}function U(u){return u.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function F(u){var c,E=(u=u||{}).delimiter,A=u.newline,T=u.comments,R=u.step,P=u.preview,Q=u.fastMode,j=c=u.quoteChar===void 0||u.quoteChar===null?'"':u.quoteChar;if(u.escapeChar!==void 0&&(j=u.escapeChar),(typeof E!="string"||-1<o.BAD_DELIMITERS.indexOf(E))&&(E=","),T===E)throw new Error("Comment character same as delimiter");T===!0?T="#":(typeof T!="string"||-1<o.BAD_DELIMITERS.indexOf(T))&&(T=!1),A!==`
`&&A!=="\r"&&A!==`\r
`&&(A=`
`);var w=0,S=!1;this.parse=function(I,M,ee){if(typeof I!="string")throw new Error("Input must be a string");var O=I.length,J=E.length,v=A.length,D=T.length,H=z(R),ie=[],ne=[],N=[],G=w=0;if(!I)return Re();if(u.header&&!M){var oe=I.split(A)[0].split(E),pe=[],ue={},Se=!1;for(var de in oe){var re=oe[de];z(u.transformHeader)&&(re=u.transformHeader(re,de));var Ue=re,Me=ue[re]||0;for(0<Me&&(Se=!0,Ue=re+"_"+Me),ue[re]=Me+1;pe.includes(Ue);)Ue=Ue+"_"+Me;pe.push(Ue)}if(Se){var Te=I.split(A);Te[0]=pe.join(E),I=Te.join(A)}}if(Q||Q!==!1&&I.indexOf(c)===-1){for(var ve=I.split(A),Ae=0;Ae<ve.length;Ae++){if(N=ve[Ae],w+=N.length,Ae!==ve.length-1)w+=A.length;else if(ee)return Re();if(!T||N.substring(0,D)!==T){if(H){if(ie=[],Ke(N.split(E)),ct(),S)return Re()}else Ke(N.split(E));if(P&&P<=Ae)return ie=ie.slice(0,P),Re(!0)}}return Re()}for(var fe=I.indexOf(E,w),ge=I.indexOf(A,w),et=new RegExp(U(j)+U(c),"g"),te=I.indexOf(c,w);;)if(I[w]!==c)if(T&&N.length===0&&I.substring(w,w+D)===T){if(ge===-1)return Re();w=ge+v,ge=I.indexOf(A,w),fe=I.indexOf(E,w)}else if(fe!==-1&&(fe<ge||ge===-1))N.push(I.substring(w,fe)),w=fe+J,fe=I.indexOf(E,w);else{if(ge===-1)break;if(N.push(I.substring(w,ge)),Xe(ge+v),H&&(ct(),S))return Re();if(P&&ie.length>=P)return Re(!0)}else for(te=w,w++;;){if((te=I.indexOf(c,te+1))===-1)return ee||ne.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:ie.length,index:w}),Qe();if(te===O-1)return Qe(I.substring(w,te).replace(et,c));if(c!==j||I[te+1]!==j){if(c===j||te===0||I[te-1]!==j){fe!==-1&&fe<te+1&&(fe=I.indexOf(E,te+1)),ge!==-1&&ge<te+1&&(ge=I.indexOf(A,te+1));var it=Oe(ge===-1?fe:Math.min(fe,ge));if(I.substr(te+1+it,J)===E){N.push(I.substring(w,te).replace(et,c)),I[w=te+1+it+J]!==c&&(te=I.indexOf(c,w)),fe=I.indexOf(E,w),ge=I.indexOf(A,w);break}var Ge=Oe(ge);if(I.substring(te+1+Ge,te+1+Ge+v)===A){if(N.push(I.substring(w,te).replace(et,c)),Xe(te+1+Ge+v),fe=I.indexOf(E,w),te=I.indexOf(c,w),H&&(ct(),S))return Re();if(P&&ie.length>=P)return Re(!0);break}ne.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:ie.length,index:w}),te++}}else te++}return Qe();function Ke(ze){ie.push(ze),G=w}function Oe(ze){var Pt=0;if(ze!==-1){var tt=I.substring(te+1,ze);tt&&tt.trim()===""&&(Pt=tt.length)}return Pt}function Qe(ze){return ee||(ze===void 0&&(ze=I.substring(w)),N.push(ze),w=O,Ke(N),H&&ct()),Re()}function Xe(ze){w=ze,Ke(N),N=[],ge=I.indexOf(A,w)}function Re(ze){return{data:ie,errors:ne,meta:{delimiter:E,linebreak:A,aborted:S,truncated:!!ze,cursor:G+(M||0)}}}function ct(){R(Re()),ie=[],ne=[]}},this.abort=function(){S=!0},this.getCharIndex=function(){return w}}function L(u){var c=u.data,E=l[c.workerId],A=!1;if(c.error)E.userError(c.error,c.file);else if(c.results&&c.results.data){var T={abort:function(){A=!0,Y(c.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(z(E.userStep)){for(var R=0;R<c.results.data.length&&(E.userStep({data:c.results.data[R],errors:c.results.errors,meta:c.results.meta},T),!A);R++);delete c.results}else z(E.userChunk)&&(E.userChunk(c.results,T,c.file),delete c.results)}c.finished&&!A&&Y(c.workerId,c.results)}function Y(u,c){var E=l[u];z(E.userComplete)&&E.userComplete(c),E.terminate(),delete l[u]}function W(){throw new Error("Not implemented.")}function X(u){if(typeof u!="object"||u===null)return u;var c=Array.isArray(u)?[]:{};for(var E in u)c[E]=X(u[E]);return c}function Z(u,c){return function(){u.apply(c,arguments)}}function z(u){return typeof u=="function"}return s&&(i.onmessage=function(u){var c=u.data;if(o.WORKER_ID===void 0&&c&&(o.WORKER_ID=c.workerId),typeof c.input=="string")i.postMessage({workerId:o.WORKER_ID,results:o.parse(c.input,c.config),finished:!0});else if(i.File&&c.input instanceof File||c.input instanceof Object){var E=o.parse(c.input,c.config);E&&i.postMessage({workerId:o.WORKER_ID,results:E,finished:!0})}}),(g.prototype=Object.create(f.prototype)).constructor=g,(m.prototype=Object.create(f.prototype)).constructor=m,(p.prototype=Object.create(p.prototype)).constructor=p,(_.prototype=Object.create(f.prototype)).constructor=_,o})})(vr);var $r=vr.exports;const es=Xr($r),ts="https://ome.github.io/ome2024-ngff-challenge/idr-mark.svg",ns="https://ome.github.io/ome2024-ngff-challenge/nfdi4bioimage.png",Vt="https://raw.githubusercontent.com/ome/ome2024-ngff-challenge/main/samples/ngff_samples.csv";let is={IDR:"https://idr.openmicroscopy.org",Webknossos:"https://scalableminds.com",JAX:"http://jax.org","BioImage Archive":"https://www.ebi.ac.uk",Crick:"https://www.crick.ac.uk/","University of Muenster":"https://nfdi4bioimage.de/",Göttingen:"https://nfdi4bioimage.de/",Jülich:"https://nfdi4bioimage.de/",NFDI4BIOIMAGE:"https://nfdi4bioimage.de/",RIKEN:"https://www.riken.jp/"};function vi(t){if(t==="IDR")return ts;let e=is[t];return e?e==="https://nfdi4bioimage.de/"?ns:`https://t2.gstatic.com/faviconV2?client=SOCIAL&type=FAVICON&fallback_opts=TYPE,SIZE,URL&url=${e}&size=24`:null}function wr(t,e,n={}){es.parse(t,{header:!1,download:!0,skipEmptyLines:"greedy",complete:function(i){let r=["url"],s=i.data[0];s.length>1&&(r=s,i.data.shift());let l=i.data.map(p=>{let _={...n};for(let y=0;y<r.length;y++)_[r[y]]=p[y];return _}),a=l.filter(p=>{var _;return!((_=p.url)!=null&&_.endsWith(".csv"))}),o={};a.forEach(p=>{if(o[p.url]){console.warn("Removing duplicate URL:",p.url);return}o[p.url]=p}),a=Object.values(o);let h=l.filter(p=>{var _;return(_=p.url)==null?void 0:_.includes(".csv")}),f=a.reduce((p,_)=>_.wells?p+1:p,0),g=a.reduce((p,_)=>p+parseInt(_.written||0),0),m=a.length;f>0&&(m=a.reduce((p,_)=>p+parseInt(_.images||1),0)),e.addCsv(t,h,m,f,g),e.addRows(a),h.forEach(p=>{let _=p.url;p.csv=_,wr(_,e,p)})}})}async function yr(t){return await fetch(t).then(e=>e.json())}function ft(t){if(!t)return"";const e=2;return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(e)+" KB":t<1024*1024*1024?(t/(1024*1024)).toFixed(e)+" MB":t<1024*1024*1024*1024?(t/(1024*1024*1024)).toFixed(e)+" GB":t<1024*1024*1024*1024*1024?(t/(1024*1024*1024*1024)).toFixed(e)+" TB":(t/(1024*1024*1024*1024*1024)).toFixed(e)+" PB"}function rs(t,e){return Array.from({length:e-t},(n,i)=>i+t)}function ss(t,e,n){const i=t[0].shape,r=i[0],s=i[1],l=r*s;e||(e=t.map(kr));let a=performance.now(),o=new Uint8ClampedArray(4*r*s).fill(0),h=0;for(let f=0;f<l;f++){for(let g=0;g<t.length;g++){let m=n[g],p=t[g].data,_=e[g],U=(p[f]-_[0])/(_[1]-_[0]);for(let F=0;F<3;F++){let L=U*m[F]<<0;o[h*4+F]=Math.max(o[h*4+F],L)}}o[h*4+3]=255,h+=1}return performance.now()-a<100&&os(o,5)[4]<1&&(o=ls(o,2)),o}function ls(t,e){for(let n=0;n<t.length/4;n++)for(let i=0;i<3;i++){let r=t[n*4+i];r=Math.min(255,r*e),t[n*4+i]=r}return t}function os(t,e=5){let n=new Array(e).fill(0);const i=256/e;let r=t.length/4;for(let s=0;s<r;s++){let l=t[s*4];l=Math.max(t[s*4+1],l),l=Math.max(t[s*4+2],l);let a=Math.floor(l/i);n[a]+=1}return n=n.map(s=>100*s/r),n}function kr(t){const e=t.data;let n=0,i=1/0,r=t.data.length;for(let s=0;s<r;s++){let l=e[s];n=Math.max(n,l),i=Math.min(i,l)}return[i,n]}const bn=4,ut={cyan:"#00FFFF",yellow:"#FFFF00",magenta:"#FF00FF",red:"#FF0000",green:"#00FF00",blue:"#0000FF",white:"#FFFFFF"},as=[ut.magenta,ut.green],us=[ut.red,ut.green,ut.blue],wi=Object.values(ut).slice(0,-2);function fs(t){let e;return t<=bn?e=Array(t).fill(!0):e=[...Array(bn).fill(!0),...Array(t-bn).fill(!1)],e}function cs(t,e){let n=[];if(t==1)n=[ut.white];else if(t==2)n=as;else if(t===3)n=us;else if(t<=bn)n=wi.slice(0,t);else{n=Array(t).fill(ut.white);const i=e.flatMap((r,s)=>r?s:[]);for(const[r,s]of i.entries())n[s]=wi[r]}return n.map(Er)}function Er(t){t.startsWith("#")&&(t=t.slice(1));const e=parseInt(t.slice(0,2),16),n=parseInt(t.slice(2,4),16),i=parseInt(t.slice(4,6),16);return[e,n,i]}class Cr{constructor(){this.store=Un({})}async lookupOntologyTerm(e){let n=e.replace("NCBI:txid","");return(await yr(`https://rest.ensembl.org/taxonomy/id/${n}?content-type=application/json`)).name||e}addTerms(e){let n=xt(this.store);[...new Set(e)].forEach(r=>{r&&(n[r]||(n[r]="Loading...",setTimeout(()=>{this.lookupOntologyTerm(r).then(s=>{this.addEntry(r,s)})},Math.random()*5e3)))})}addEntry(e,n){this.store.update(i=>(i[e]=n,i))}subscribe(e){return this.store.subscribe(e)}}class hs extends Cr{constructor(){super()}async lookupOntologyTerm(e){const n=e.replace("obo:","");return(await yr(`https://www.ebi.ac.uk/ols4/api/ontologies/fbbi/terms/http%253A%252F%252Fpurl.obolibrary.org%252Fobo%252F${n}`)).label||e}}const Sr=new Cr,Ar=new hs,yi=5;async function Kt(t,e){var r;let n=await fetch(`${t}/zarr.json`,{signal:e}).then(s=>{if(s.status===404)throw new Error(`${t}/zarr.json not found`);return s.json()}).catch(s=>[void 0,t]);const i=(r=n==null?void 0:n.attributes)==null?void 0:r.ome;if(!i)return[void 0,t];if(i.multiscales)return[i,t];if(i.plate){let s=i.plate.wells[0],l=`${t}/${s.path}/0`,[a,o]=await Kt(l);return[a,o,i.plate]}else if(i["bioformats2raw.layout"]){let s=`${t}/0`;return await Kt(s)}}class ds{constructor(e="index",n=!0){this.store=Un([]),this.selectedRow=Un(null),this.sortColumn=e,this.sortAscending=n,this.csvFiles=[]}getCsvSourceList(e){let n;if(!e)n=this.csvFiles[0];else for(let r of this.csvFiles){if(r.source===e){n=r;break}for(let s of r.child_csv){if(s.source===e){n=s;break}for(let l of s.child_csv)if(l.source===e){n=l;break}}}return n?n.child_csv.map(r=>{let s=r.image_count||0,l=r.plate_count||0,a=r.bytes||0;for(let o of r.child_csv)s+=o.image_count||0,l+=o.plate_count||0,a+=o.bytes||0;return{...r,image_count:s,plate_count:l,bytes:a}}):[]}addCsv(e,n,i,r,s){n=n.map(a=>({...a,child_csv:[]}));let l;for(let a of this.csvFiles){if(a.url===e){l=a;break}for(let o of a.child_csv){if(o.url===e){l=o;break}for(let h of o.child_csv)if(h.url===e){l=h;break}}}l?(l.image_count=i,l.plate_count=r,l.bytes=s,l.child_csv=n):(l={url:e,image_count:i,plate_count:r,bytes:s,child_csv:n},this.csvFiles.push(l))}addRows(e){e=e.map((r,s)=>{if(r.written&&(r.written=parseFloat(r.written)),r.shape){let l=r.shape.split(",").map(o=>parseInt(o)),a;r.dimension_names?a=r.dimension_names.split(","):l.length==5&&(a=["t","c","z","y","x"]),a&&a.length==l.length&&a.forEach((o,h)=>r["size_"+o]=l[h]),r.dim_count=l.reduce((o,h)=>o+(h>1?1:0),0)}if(r.chunks){let l=r.chunks.split(",").map(a=>parseInt(a));r.chunk_pixels=l.reduce((a,o)=>a*o,1)}if(r.shards){let l=r.shards.split(",").map(a=>parseInt(a));r.shard_pixels=l.reduce((a,o)=>a*o,1)}return r.index=Math.random()*(1+s),r}),console.log("Adding rows",e),this.store.update(r=>(r.push(...e),r.sort((s,l)=>this.compareRows(s,l,!0)),r));let n=e.map(r=>r.organismId);Sr.addTerms(n);let i=e.map(r=>r.fbbiId);Ar.addTerms(i)}populateRow(e,n){this.store.update(i=>(i=i.map(r=>(r.url===e&&(r={...r,...n}),r)),i))}async loadNgffMetadata(e){var m;const[n,i,r]=await Kt(e);let s=[],l=0,a=0,o=!1,h=!0,f={multiscales:n},g=i;if(r&&(l=r.wells.length,a=r.field_count||1),n){const p=(m=n[0])==null?void 0:m.datasets[0],_=p==null?void 0:p.path;if(_){const y=await fetch(`${i}/${_}/zarr.json`).then(U=>U.json()).catch(U=>{console.log(`----> Failed to parse ${i}/${_}/zarr.json`,U)});s=y==null?void 0:y.shape}}else console.log("No multiscales found"),o=!0,s=[0];this.populateRow(e,{image_attrs:f,image_url:g,shape:s,well_count:l,field_count:a,load_failed:o,loaded:h})}async loadRocrateJsonAllRows(){let e=xt(this.store);for(let n=0;n<e.length;n=n+yi){let i=rs(n,Math.min(n+yi,e.length)).map(r=>this.loadRocrateJson(e[r].url));await Promise.all(i)}}compareRows(e,n,i=!1){let r=e[this.sortColumn],s=n[this.sortColumn];if(i)return r===void 0&&(r=0),s===void 0&&(s=0),r<s?this.sortAscending?-1:1:r>s?this.sortAscending?1:-1:0;r===void 0&&(r=""),s===void 0&&(s="");let l=0;return i?l=r-s:l=r.localeCompare(s),this.sortAscending?l:-l}sortTable(e,n=!0){console.log("sortTable",e,n),this.sortColumn=e,this.sortAscending=n;let i=this.isColumnNumeric(e);this.store.update(r=>(r.sort((s,l)=>this.compareRows(s,l,i)),r))}isColumnNumeric(e){let n=xt(this.store);for(let i of n){let r=i[e];if(r!==void 0&&r!=="")return!isNaN(r)}}emptyTable(){this.store.set([])}subscribe(e){return this.store.subscribe(e)}getRows(){return xt(this.store)}getRow(e){return xt(this.store)[e]}subscribeSelectedRow(e){return this.selectedRow.subscribe(e)}setSelectedRow(e){this.selectedRow.set(e)}}const Ce=new ds;function _s(t){let e,n,i,r,s,l;return{c(){e=k("button"),n=k("span"),n.textContent="^",i=q(),r=k("span"),r.textContent="^",b(n,"class","acc svelte-17vd65t"),Tt(n,"strong",t[1]),b(r,"class","dec svelte-17vd65t"),Tt(r,"strong",!t[1]),b(e,"class","svelte-17vd65t")},m(a,o){V(a,e,o),d(e,n),d(e,i),d(e,r),s||(l=be(e,"click",t[2]),s=!0)},p(a,[o]){o&2&&Tt(n,"strong",a[1]),o&2&&Tt(r,"strong",!a[1])},i:ye,o:ye,d(a){a&&x(e),s=!1,l()}}}function gs(t,e,n){let{toggleAscending:i}=e,{sortAscending:r}=e;const s=()=>i();return t.$$set=l=>{"toggleAscending"in l&&n(0,i=l.toggleAscending),"sortAscending"in l&&n(1,r=l.sortAscending)},[i,r,s]}class ms extends Ye{constructor(e){super(),Ze(this,e,gs,_s,xe,{toggleAscending:0,sortAscending:1})}}const mn={AUTO:"auto",START:"start",CENTER:"center",END:"end"},st={HORIZONTAL:"horizontal",VERTICAL:"vertical"},jt={OBSERVED:0,REQUESTED:1},ps={[st.VERTICAL]:"top",[st.HORIZONTAL]:"left"},ki={[st.VERTICAL]:"scrollTop",[st.HORIZONTAL]:"scrollLeft"};class bs{constructor({itemSize:e,itemCount:n,estimatedItemSize:i}){this.itemSize=e,this.itemCount=n,this.estimatedItemSize=i,this.itemSizeAndPositionData={},this.lastMeasuredIndex=-1,this.checkForMismatchItemSizeAndItemCount(),this.justInTime||this.computeTotalSizeAndPositionData()}get justInTime(){return typeof this.itemSize=="function"}updateConfig({itemSize:e,itemCount:n,estimatedItemSize:i}){n!=null&&(this.itemCount=n),i!=null&&(this.estimatedItemSize=i),e!=null&&(this.itemSize=e),this.checkForMismatchItemSizeAndItemCount(),this.justInTime&&this.totalSize!=null?this.totalSize=void 0:this.computeTotalSizeAndPositionData()}checkForMismatchItemSizeAndItemCount(){if(Array.isArray(this.itemSize)&&this.itemSize.length<this.itemCount)throw Error("When itemSize is an array, itemSize.length can't be smaller than itemCount")}getSize(e){const{itemSize:n}=this;return typeof n=="function"?n(e):Array.isArray(n)?n[e]:n}computeTotalSizeAndPositionData(){let e=0;for(let n=0;n<this.itemCount;n++){const i=this.getSize(n),r=e;e+=i,this.itemSizeAndPositionData[n]={offset:r,size:i}}this.totalSize=e}getLastMeasuredIndex(){return this.lastMeasuredIndex}getSizeAndPositionForIndex(e){if(e<0||e>=this.itemCount)throw Error(`Requested index ${e} is outside of range 0..${this.itemCount}`);return this.justInTime?this.getJustInTimeSizeAndPositionForIndex(e):this.itemSizeAndPositionData[e]}getJustInTimeSizeAndPositionForIndex(e){if(e>this.lastMeasuredIndex){const n=this.getSizeAndPositionOfLastMeasuredItem();let i=n.offset+n.size;for(let r=this.lastMeasuredIndex+1;r<=e;r++){const s=this.getSize(r);if(s==null||isNaN(s))throw Error(`Invalid size returned for index ${r} of value ${s}`);this.itemSizeAndPositionData[r]={offset:i,size:s},i+=s}this.lastMeasuredIndex=e}return this.itemSizeAndPositionData[e]}getSizeAndPositionOfLastMeasuredItem(){return this.lastMeasuredIndex>=0?this.itemSizeAndPositionData[this.lastMeasuredIndex]:{offset:0,size:0}}getTotalSize(){if(this.totalSize)return this.totalSize;const e=this.getSizeAndPositionOfLastMeasuredItem();return e.offset+e.size+(this.itemCount-this.lastMeasuredIndex-1)*this.estimatedItemSize}getUpdatedOffsetForIndex({align:e=mn.START,containerSize:n,currentOffset:i,targetIndex:r}){if(n<=0)return 0;const s=this.getSizeAndPositionForIndex(r),l=s.offset,a=l-n+s.size;let o;switch(e){case mn.END:o=a;break;case mn.CENTER:o=l-(n-s.size)/2;break;case mn.START:o=l;break;default:o=Math.max(a,Math.min(l,i))}const h=this.getTotalSize();return Math.max(0,Math.min(h-n,o))}getVisibleRange({containerSize:e=0,offset:n,overscanCount:i}){if(this.getTotalSize()===0)return{};const s=n+e;let l=this.findNearestItem(n);if(l===void 0)throw Error(`Invalid offset ${n} specified`);const a=this.getSizeAndPositionForIndex(l);n=a.offset+a.size;let o=l;for(;n<s&&o<this.itemCount-1;)o++,n+=this.getSizeAndPositionForIndex(o).size;return i&&(l=Math.max(0,l-i),o=Math.min(o+i,this.itemCount-1)),{start:l,stop:o}}resetItem(e){this.lastMeasuredIndex=Math.min(this.lastMeasuredIndex,e-1)}findNearestItem(e){if(isNaN(e))throw Error(`Invalid offset ${e} specified`);e=Math.max(0,e);const n=this.getSizeAndPositionOfLastMeasuredItem(),i=Math.max(0,this.lastMeasuredIndex);return n.offset>=e?this.binarySearch({high:i,low:0,offset:e}):this.exponentialSearch({index:i,offset:e})}binarySearch({low:e,high:n,offset:i}){let r=0,s=0;for(;e<=n;){if(r=e+Math.floor((n-e)/2),s=this.getSizeAndPositionForIndex(r).offset,s===i)return r;s<i?e=r+1:s>i&&(n=r-1)}return e>0?e-1:0}exponentialSearch({index:e,offset:n}){let i=1;for(;e<this.itemCount&&this.getSizeAndPositionForIndex(e).offset<n;)e+=i,i*=2;return this.binarySearch({high:Math.min(e,this.itemCount-1),low:Math.floor(e/2),offset:n})}}const vs=t=>({}),Ei=t=>({});function Ci(t,e,n){const i=t.slice();return i[37]=e[n],i}const ws=t=>({style:t[0]&4,index:t[0]&4}),Si=t=>({style:t[37].style,index:t[37].index}),ys=t=>({}),Ai=t=>({});function Ii(t,e){let n,i;const r=e[21].item,s=Mn(r,e,e[20],Si);return{key:t,first:null,c(){n=En(),s&&s.c(),this.first=n},m(l,a){V(l,n,a),s&&s.m(l,a),i=!0},p(l,a){e=l,s&&s.p&&(!i||a[0]&1048580)&&Dn(s,r,e,e[20],i?Fn(r,e[20],a,ws):Nn(e[20]),Si)},i(l){i||(se(s,l),i=!0)},o(l){he(s,l),i=!1},d(l){l&&x(n),s&&s.d(l)}}}function ks(t){let e,n,i,r=[],s=new Map,l,a;const o=t[21].header,h=Mn(o,t,t[20],Ai);let f=Pe(t[2]);const g=_=>_[0]?_[0](_[37].index):_[37].index;for(let _=0;_<f.length;_+=1){let y=Ci(t,f,_),U=g(y);s.set(U,r[_]=Ii(U,y))}const m=t[21].footer,p=Mn(m,t,t[20],Ei);return{c(){e=k("div"),h&&h.c(),n=q(),i=k("div");for(let _=0;_<r.length;_+=1)r[_].c();l=q(),p&&p.c(),b(i,"class","virtual-list-inner svelte-dwpad5"),b(i,"style",t[4]),b(e,"class","virtual-list-wrapper svelte-dwpad5"),b(e,"style",t[3])},m(_,y){V(_,e,y),h&&h.m(e,null),d(e,n),d(e,i);for(let U=0;U<r.length;U+=1)r[U]&&r[U].m(i,null);d(e,l),p&&p.m(e,null),t[22](e),a=!0},p(_,y){h&&h.p&&(!a||y[0]&1048576)&&Dn(h,o,_,_[20],a?Fn(o,_[20],y,ys):Nn(_[20]),Ai),y[0]&1048581&&(f=Pe(_[2]),Ft(),r=br(r,y,g,1,_,f,s,i,Jr,Ii,null,Ci),Dt()),(!a||y[0]&16)&&b(i,"style",_[4]),p&&p.p&&(!a||y[0]&1048576)&&Dn(p,m,_,_[20],a?Fn(m,_[20],y,vs):Nn(_[20]),Ei),(!a||y[0]&8)&&b(e,"style",_[3])},i(_){if(!a){se(h,_);for(let y=0;y<f.length;y+=1)se(r[y]);se(p,_),a=!0}},o(_){he(h,_);for(let y=0;y<r.length;y+=1)he(r[y]);he(p,_),a=!1},d(_){_&&x(e),h&&h.d(_);for(let y=0;y<r.length;y+=1)r[y].d();p&&p.d(_),t[22](null)}}}const Es=(()=>{let t=!1;try{const e=Object.defineProperty({},"passive",{get(){return t={passive:!0},!0}});window.addEventListener("testpassive",e,e),window.remove("testpassive",e,e)}catch{}return t})();function Cs(t,e,n){let{$$slots:i={},$$scope:r}=e,{height:s}=e,{width:l="100%"}=e,{itemCount:a}=e,{itemSize:o}=e,{estimatedItemSize:h=null}=e,{stickyIndices:f=null}=e,{getKey:g=null}=e,{scrollDirection:m=st.VERTICAL}=e,{scrollOffset:p=null}=e,{scrollToIndex:_=null}=e,{scrollToAlignment:y=null}=e,{scrollToBehaviour:U="instant"}=e,{overscanCount:F=3}=e;const L=xr(),Y=new bs({itemCount:a,itemSize:o,estimatedItemSize:ee()});let W=!1,X,Z=[],z={offset:p||_!=null&&Z.length&&S(_)||0,scrollChangeReason:jt.REQUESTED},u=z,c={scrollToIndex:_,scrollToAlignment:y,scrollOffset:p,itemCount:a,itemSize:o,estimatedItemSize:h},E={},A="",T="";Q(),on(()=>{n(18,W=!0),X.addEventListener("scroll",I,Es),p!=null?j(p):_!=null&&j(S(_))}),Kn(()=>{W&&X.removeEventListener("scroll",I)});function R(){if(!W)return;const v=c.scrollToIndex!==_||c.scrollToAlignment!==y,D=c.itemCount!==a||c.itemSize!==o||c.estimatedItemSize!==h;D&&(Y.updateConfig({itemSize:o,itemCount:a,estimatedItemSize:ee()}),w()),c.scrollOffset!==p?n(19,z={offset:p||0,scrollChangeReason:jt.REQUESTED}):typeof _=="number"&&(v||D)&&n(19,z={offset:S(_,y,a),scrollChangeReason:jt.REQUESTED}),c={scrollToIndex:_,scrollToAlignment:y,scrollOffset:p,itemCount:a,itemSize:o,estimatedItemSize:h}}function P(){if(!W)return;const{offset:v,scrollChangeReason:D}=z;(u.offset!==v||u.scrollChangeReason!==D)&&Q(),u.offset!==v&&D===jt.REQUESTED&&j(v),u=z}function Q(){const{offset:v}=z,{start:D,stop:H}=Y.getVisibleRange({containerSize:m===st.VERTICAL?s:l,offset:v,overscanCount:F});let ie=[];const ne=Y.getTotalSize();m===st.VERTICAL?(n(3,A=`height:${s}${typeof s=="number"?"px":""};width:${l};`),n(4,T=`flex-direction:column;height:${ne}px;`)):(n(3,A=`height:${s};width:${l}${typeof l=="number"?"px":""}`),n(4,T=`min-height:100%;width:${ne}px;`));const N=f!=null&&f.length!==0;if(N)for(let G=0;G<f.length;G++){const oe=f[G];ie.push({index:oe,style:O(oe,!0)})}if(D!==void 0&&H!==void 0){for(let G=D;G<=H;G++)N&&f.includes(G)||ie.push({index:G,style:O(G,!1)});L("itemsUpdated",{start:D,end:H})}n(2,Z=ie)}function j(v){"scroll"in X?X.scroll({[ps[m]]:v,behavior:U}):n(1,X[ki[m]]=v,X)}function w(v=0){E={},Y.resetItem(v),Q()}function S(v,D=y,H=a){return(v<0||v>=H)&&(v=0),Y.getUpdatedOffsetForIndex({align:D,containerSize:m===st.VERTICAL?s:l,currentOffset:z.offset||0,targetIndex:v})}function I(v){const D=M();D<0||z.offset===D||v.target!==X||(n(19,z={offset:D,scrollChangeReason:jt.OBSERVED}),L("afterScroll",{offset:D,event:v}))}function M(){return X[ki[m]]}function ee(){return h||typeof o=="number"&&o||50}function O(v,D){if(E[v])return E[v];const{size:H,offset:ie}=Y.getSizeAndPositionForIndex(v);let ne;return m===st.VERTICAL?(ne=`left:0;width:100%;height:${H}px;`,D?ne+=`position:sticky;flex-grow:0;z-index:1;top:0;margin-top:${ie}px;margin-bottom:${-(ie+H)}px;`:ne+=`position:absolute;top:${ie}px;`):(ne=`top:0;width:${H}px;`,D?ne+=`position:sticky;z-index:1;left:0;margin-left:${ie}px;margin-right:${-(ie+H)}px;`:ne+=`position:absolute;height:100%;left:${ie}px;`),E[v]=ne}function J(v){Mt[v?"unshift":"push"](()=>{X=v,n(1,X)})}return t.$$set=v=>{"height"in v&&n(5,s=v.height),"width"in v&&n(6,l=v.width),"itemCount"in v&&n(7,a=v.itemCount),"itemSize"in v&&n(8,o=v.itemSize),"estimatedItemSize"in v&&n(9,h=v.estimatedItemSize),"stickyIndices"in v&&n(10,f=v.stickyIndices),"getKey"in v&&n(0,g=v.getKey),"scrollDirection"in v&&n(11,m=v.scrollDirection),"scrollOffset"in v&&n(12,p=v.scrollOffset),"scrollToIndex"in v&&n(13,_=v.scrollToIndex),"scrollToAlignment"in v&&n(14,y=v.scrollToAlignment),"scrollToBehaviour"in v&&n(15,U=v.scrollToBehaviour),"overscanCount"in v&&n(16,F=v.overscanCount),"$$scope"in v&&n(20,r=v.$$scope)},t.$$.update=()=>{t.$$.dirty[0]&29568&&R(),t.$$.dirty[0]&524288&&P(),t.$$.dirty[0]&263264&&W&&w(0)},[g,X,Z,A,T,s,l,a,o,h,f,m,p,_,y,U,F,w,W,z,r,i,J]}class Ss extends Ye{constructor(e){super(),Ze(this,e,Cs,ks,xe,{height:5,width:6,itemCount:7,itemSize:8,estimatedItemSize:9,stickyIndices:10,getKey:0,scrollDirection:11,scrollOffset:12,scrollToIndex:13,scrollToAlignment:14,scrollToBehaviour:15,overscanCount:16,recomputeSizes:17},null,[-1,-1])}get height(){return this.$$.ctx[5]}set height(e){this.$$set({height:e}),Ne()}get width(){return this.$$.ctx[6]}set width(e){this.$$set({width:e}),Ne()}get itemCount(){return this.$$.ctx[7]}set itemCount(e){this.$$set({itemCount:e}),Ne()}get itemSize(){return this.$$.ctx[8]}set itemSize(e){this.$$set({itemSize:e}),Ne()}get estimatedItemSize(){return this.$$.ctx[9]}set estimatedItemSize(e){this.$$set({estimatedItemSize:e}),Ne()}get stickyIndices(){return this.$$.ctx[10]}set stickyIndices(e){this.$$set({stickyIndices:e}),Ne()}get getKey(){return this.$$.ctx[0]}set getKey(e){this.$$set({getKey:e}),Ne()}get scrollDirection(){return this.$$.ctx[11]}set scrollDirection(e){this.$$set({scrollDirection:e}),Ne()}get scrollOffset(){return this.$$.ctx[12]}set scrollOffset(e){this.$$set({scrollOffset:e}),Ne()}get scrollToIndex(){return this.$$.ctx[13]}set scrollToIndex(e){this.$$set({scrollToIndex:e}),Ne()}get scrollToAlignment(){return this.$$.ctx[14]}set scrollToAlignment(e){this.$$set({scrollToAlignment:e}),Ne()}get scrollToBehaviour(){return this.$$.ctx[15]}set scrollToBehaviour(e){this.$$set({scrollToBehaviour:e}),Ne()}get overscanCount(){return this.$$.ctx[16]}set overscanCount(e){this.$$set({overscanCount:e}),Ne()}get recomputeSizes(){return this.$$.ctx[17]}}class an extends Error{constructor(e,n={}){super(`Node not found: ${e}`,n),this.name="NodeNotFoundError"}}class Jn extends Error{constructor(e){super(`Missing key: ${e}`),this.name="KeyError"}}const As="modulepreload",Is=function(t){return"https://ome.github.io/ome2024-ngff-challenge/"+t},Ti={},qt=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));r=Promise.all(n.map(a=>{if(a=Is(a),a in Ti)return;Ti[a]=!0;const o=a.endsWith(".css"),h=o?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${h}`))return;const f=document.createElement("link");if(f.rel=o?"stylesheet":As,o||(f.as="script"),f.crossOrigin="",f.href=a,l&&f.setAttribute("nonce",l),document.head.appendChild(f),o)return new Promise((g,m)=>{f.addEventListener("load",g),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}return r.then(()=>e()).catch(s=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s})};var Ve;class Ir{constructor(e,n,i){Ie(this,Ve);typeof e=="number"?ke(this,Ve,new Uint8Array(e)):e instanceof ArrayBuffer?ke(this,Ve,new Uint8Array(e,n,i)):ke(this,Ve,new Uint8Array(Array.from(e,r=>r?1:0)))}get BYTES_PER_ELEMENT(){return 1}get byteOffset(){return $(this,Ve).byteOffset}get byteLength(){return $(this,Ve).byteLength}get buffer(){return $(this,Ve).buffer}get length(){return $(this,Ve).length}get(e){let n=$(this,Ve)[e];return typeof n=="number"?n!==0:n}set(e,n){$(this,Ve)[e]=n?1:0}fill(e){$(this,Ve).fill(e?1:0)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}Ve=new WeakMap;var zt;class Zn{constructor(e,n,i,r){le(this,"_data");le(this,"chars");Ie(this,zt);if(this.chars=e,ke(this,zt,new TextEncoder),typeof n=="number")this._data=new Uint8Array(n*e);else if(n instanceof ArrayBuffer)r&&(r=r*e),this._data=new Uint8Array(n,i,r);else{let s=Array.from(n);this._data=new Uint8Array(s.length*e);for(let l=0;l<s.length;l++)this.set(l,s[l])}}get BYTES_PER_ELEMENT(){return this.chars}get byteOffset(){return this._data.byteOffset}get byteLength(){return this._data.byteLength}get buffer(){return this._data.buffer}get length(){return this.byteLength/this.BYTES_PER_ELEMENT}get(e){const n=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);return new TextDecoder().decode(n).replace(/\x00/g,"")}set(e,n){const i=new Uint8Array(this.buffer,this.byteOffset+this.chars*e,this.chars);i.fill(0),i.set($(this,zt).encode(n))}fill(e){const n=$(this,zt).encode(e);for(let i=0;i<this.length;i++)this._data.set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}}zt=new WeakMap;var Le;const ti=class ti{constructor(e,n,i,r){Ie(this,Le);le(this,"chars");if(this.chars=e,typeof n=="number")ke(this,Le,new Int32Array(n*e));else if(n instanceof ArrayBuffer)r&&(r*=e),ke(this,Le,new Int32Array(n,i,r));else{const s=n,l=new ti(e,1);ke(this,Le,new Int32Array(function*(){for(let a of s)l.set(0,a),yield*$(l,Le)}()))}}get BYTES_PER_ELEMENT(){return $(this,Le).BYTES_PER_ELEMENT*this.chars}get byteLength(){return $(this,Le).byteLength}get byteOffset(){return $(this,Le).byteOffset}get buffer(){return $(this,Le).buffer}get length(){return $(this,Le).length/this.chars}get(e){const n=this.chars*e;let i="";for(let r=0;r<this.chars;r++)i+=String.fromCodePoint($(this,Le)[n+r]);return i.replace(/\u0000/g,"")}set(e,n){const i=this.chars*e,r=$(this,Le).subarray(i,i+this.chars);r.fill(0);for(let s=0;s<this.chars;s++)r[s]=n.codePointAt(s)??0}fill(e){this.set(0,e);let n=$(this,Le).subarray(0,this.chars);for(let i=1;i<this.length;i++)$(this,Le).set(n,i*this.chars)}*[Symbol.iterator](){for(let e=0;e<this.length;e++)yield this.get(e)}};Le=new WeakMap;let Jt=ti;function un(t){const e=new TextDecoder().decode(t);return JSON.parse(e)}function Oi(t,e){const n=e/2,i=e-1;let r=0;for(let s=0;s<t.length;s+=e)for(let l=0;l<n;l+=1)r=t[s+l],t[s+l]=t[s+i-l],t[s+i-l]=r}const Ts={int8:Int8Array,int16:Int16Array,int32:Int32Array,int64:globalThis.BigInt64Array,uint8:Uint8Array,uint16:Uint16Array,uint32:Uint32Array,uint64:globalThis.BigUint64Array,float32:Float32Array,float64:Float64Array,bool:Ir},Os=/v2:([US])(\d+)/;function Tr(t){if(t==="v2:object")return globalThis.Array;let e=t.match(Os);if(e){let[,i,r]=e;return(i==="U"?Jt:Zn).bind(null,Number(r))}let n=Ts[t];if(!n)throw new Error(`Unknown or unsupported data_type: ${t}`);return n}function bt(t,e){return(e==="C"?Rs:zs)(t)}function Rs(t){const e=t.length,n=globalThis.Array(e);for(let i=e-1,r=1;i>=0;i--)n[i]=r,r*=t[i];return n}function zs(t){const e=t.length,n=globalThis.Array(e);for(let i=0,r=1;i<e;i++)n[i]=r,r*=t[i];return n}function Ls({name:t,configuration:e}){if(t==="default"){const n=(e==null?void 0:e.separator)??"/";return i=>["c",...i].join(n)}if(t==="v2"){const n=(e==null?void 0:e.separator)??".";return i=>i.join(n)||"0"}throw new Error(`Unknown chunk key encoding: ${t}`)}function Bn(t){var n;const e=t.find(i=>i.name==="transpose");return((n=e==null?void 0:e.configuration)==null?void 0:n.order)==="F"?"F":"C"}const Ms=/^([<|>])(.*)$/;function Fs(t){if(t==="|O")return{data_type:"v2:object"};let e=t.match(Ms);if(!e)throw new Error(`Invalid dtype: ${t}`);let[,n,i]=e,r={b1:"bool",i1:"int8",u1:"uint8",i2:"int16",u2:"uint16",i4:"int32",u4:"uint32",i8:"int64",u8:"uint64",f4:"float32",f8:"float64"}[i]??(i.startsWith("S")||i.startsWith("U")?`v2:${i}`:void 0);if(!r)throw new Error(`Unsupported or unknown dtype: ${t}`);return n==="|"?{data_type:r}:{data_type:r,endian:n==="<"?"little":"big"}}function Ds(t,e={}){let n=[],i=Fs(t.dtype);t.order==="F"&&n.push({name:"transpose",configuration:{order:"F"}}),"endian"in i&&i.endian==="big"&&n.push({name:"bytes",configuration:{endian:"big"}});for(let{id:r,...s}of t.filters??[])n.push({name:r,configuration:s});if(t.compressor){let{id:r,...s}=t.compressor;n.push({name:r,configuration:s})}return{zarr_format:3,node_type:"array",shape:t.shape,data_type:i.data_type,chunk_grid:{name:"regular",configuration:{chunk_shape:t.chunks}},chunk_key_encoding:{name:"v2",configuration:{separator:t.dimension_separator??"."}},codecs:n,fill_value:t.fill_value,attributes:e}}function Ns(t,e={}){return{zarr_format:3,node_type:"group",attributes:e}}function Ps(t,e){if(e!=="number"&&e!=="bigint"&&e!=="boolean"&&e!=="object"&&e!=="string")return t===e;let n=t==="bool";if(e==="boolean")return n;let i=t.startsWith("v2:U")||t.startsWith("v2:S");if(e==="string")return i;let r=t==="int64"||t==="uint64";if(e==="bigint")return r;let s=t==="v2:object";return e==="object"?s:!i&&!r&&!n&&!s}function Us(t){return(t==null?void 0:t.name)==="sharding_indexed"}function Or(t){return(t.data_type==="uint64"||t.data_type==="int64")&&t.fill_value!=null?BigInt(t.fill_value):t.fill_value}const Ri=Bs();function Bs(){const t=new Uint32Array([305419896]);return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)[0]!==18}function zi(t){return"BYTES_PER_ELEMENT"in t?t.BYTES_PER_ELEMENT:4}var Zt,at,Yt,Qt,Lt;const ni=class ni{constructor(e,n){le(this,"kind","array_to_bytes");Ie(this,Zt);Ie(this,at);Ie(this,Yt);Ie(this,Qt);Ie(this,Lt);ke(this,Lt,e==null?void 0:e.endian),ke(this,at,Tr(n.data_type)),ke(this,Qt,n.shape),ke(this,Zt,bt(n.shape,Bn(n.codecs)));const i=new($(this,at))(0);ke(this,Yt,i.BYTES_PER_ELEMENT)}static fromConfig(e,n){return new ni(e,n)}encode(e){let n=new Uint8Array(e.data.buffer);return Ri&&$(this,Lt)==="big"&&Oi(n,zi($(this,at))),n}decode(e){return Ri&&$(this,Lt)==="big"&&Oi(e,zi($(this,at))),{data:new($(this,at))(e.buffer,e.byteOffset,e.byteLength/$(this,Yt)),shape:$(this,Qt),stride:$(this,Zt)}}};Zt=new WeakMap,at=new WeakMap,Yt=new WeakMap,Qt=new WeakMap,Lt=new WeakMap;let yn=ni;class Yn{constructor(){le(this,"kind","bytes_to_bytes")}static fromConfig(){return new Yn}encode(e){throw new Error("Not implemented")}decode(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength-4)}}function js(t,e){if(Number.isNaN(e))throw new Error("JsonCodec allow_nan is false but NaN was encountered during encoding.");if(e===Number.POSITIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but Infinity was encountered during encoding.");if(e===Number.NEGATIVE_INFINITY)throw new Error("JsonCodec allow_nan is false but -Infinity was encountered during encoding.");return e}function qs(t,e){return e instanceof Object&&!Array.isArray(e)?Object.keys(e).sort().reduce((n,i)=>(n[i]=e[i],n),{}):e}var Xt,$t;const ii=class ii{constructor(e={}){le(this,"configuration");le(this,"kind","array_to_bytes");Ie(this,Xt);Ie(this,$t);this.configuration=e;const{encoding:n="utf-8",skipkeys:i=!1,ensure_ascii:r=!0,check_circular:s=!0,allow_nan:l=!0,sort_keys:a=!0,indent:o,strict:h=!0}=e;let f=e.separators;f||(o?f=[", ",": "]:f=[",",":"]),ke(this,Xt,{encoding:n,skipkeys:i,ensure_ascii:r,check_circular:s,allow_nan:l,indent:o,separators:f,sort_keys:a}),ke(this,$t,{strict:h})}static fromConfig(e){return new ii(e)}encode(e){const{indent:n,encoding:i,ensure_ascii:r,check_circular:s,allow_nan:l,sort_keys:a}=$(this,Xt);if(i!=="utf-8")throw new Error("JsonCodec does not yet support non-utf-8 encoding.");const o=[];if(!s)throw new Error("JsonCodec does not yet support skipping the check for circular references during encoding.");l||o.push(js),a&&o.push(qs);const h=Array.from(e.data);h.push("|O"),h.push(e.shape);let f;o.length&&(f=(m,p)=>{let _=p;for(let y of o)_=y(m,_);return _});let g=JSON.stringify(h,f,n);return r&&(g=g.replace(/[\u007F-\uFFFF]/g,m=>{const p=`0000${m.charCodeAt(0).toString(16)}`;return`\\u${p.substring(p.length-4)}`})),new TextEncoder().encode(g)}decode(e){const{strict:n}=$(this,$t);if(!n)throw new Error("JsonCodec does not yet support non-strict decoding.");const i=un(e),r=i.pop();if(i.pop(),!r)throw new Error("0D not implemented for JsonCodec.");const s=bt(r,"C");return{data:i,shape:r,stride:s}}};Xt=new WeakMap,$t=new WeakMap;let jn=ii;function Li(t){return t instanceof Ir||t instanceof Zn||t instanceof Jt?new Proxy(t,{get(n,i){return n.get(Number(i))},set(n,i,r){return n.set(Number(i),r),!0}}):t}function xs(t,e){let n;return t.data instanceof Zn||t.data instanceof Jt?n=new t.constructor(t.data.length,t.data.chars):n=new t.constructor(t.data.length),{data:n,shape:t.shape,stride:bt(t.shape,e)}}function Vs(t,e){let n=xs(t,e),i=t.shape.length,r=t.data.length,s=Array(i).fill(0),l=Li(t.data),a=Li(n.data);for(let o=0;o<r;o++){let h=0;for(let f=0;f<i;f++)h+=s[f]*n.stride[f];a[h]=l[o],s[0]+=1;for(let f=0;f<i;f++)if(s[f]===t.shape[f]){if(f+1===i)break;s[f]=0,s[f+1]+=1}}return n}function Hs(t){if(!t.stride)return"C";let e=bt(t.shape,"C");return t.stride.every((n,i)=>n===e[i])?"C":"F"}class Qn{constructor(e){le(this,"configuration");le(this,"kind","array_to_array");this.configuration=e}static fromConfig(e){return new Qn(e)}encode(e){var n,i;return Hs(e)===((n=this.configuration)==null?void 0:n.order)?e:Vs(e,((i=this.configuration)==null?void 0:i.order)??"C")}decode(e){return e}}var en,tn;const ri=class ri{constructor(e){le(this,"kind","array_to_bytes");Ie(this,en);Ie(this,tn);ke(this,en,e),ke(this,tn,bt(e,"C"))}static fromConfig(e,n){return new ri(n.shape)}encode(e){throw new Error("Method not implemented.")}decode(e){let n=new TextDecoder,i=new DataView(e.buffer),r=Array(i.getUint32(0,!0)),s=4;for(let l=0;l<r.length;l++){let a=i.getUint32(s,!0);s+=4,r[l]=n.decode(e.buffer.slice(s,s+a)),s+=a}return{data:r,shape:$(this,en),stride:$(this,tn)}}};en=new WeakMap,tn=new WeakMap;let qn=ri;function Ws(){return new Map().set("blosc",()=>qt(()=>import("./blosc-E49GQuAK.js"),__vite__mapDeps([0,1])).then(t=>t.default)).set("gzip",()=>qt(()=>import("./gzip-CF-9a_hd.js"),__vite__mapDeps([2,3])).then(t=>t.default)).set("lz4",()=>qt(()=>import("./lz4-BIGKWw27.js"),__vite__mapDeps([4,1])).then(t=>t.default)).set("zlib",()=>qt(()=>import("./zlib-CBiqHlio.js"),__vite__mapDeps([5,3])).then(t=>t.default)).set("zstd",()=>qt(()=>import("./zstd-IvP746pw.js"),__vite__mapDeps([6,1])).then(t=>t.default)).set("transpose",()=>Qn).set("bytes",()=>yn).set("crc32c",()=>Yn).set("vlen-utf8",()=>qn).set("json2",()=>jn)}const Gs=Ws();function xn(t){let e;return{async encode(n){e||(e=await Mi(t));for(const r of e.array_to_array)n=await r.encode(n);let i=await e.array_to_bytes.encode(n);for(const r of e.bytes_to_bytes)i=await r.encode(i);return i},async decode(n){e||(e=await Mi(t));for(let r=e.bytes_to_bytes.length-1;r>=0;r--)n=await e.bytes_to_bytes[r].decode(n);let i=await e.array_to_bytes.decode(n);for(let r=e.array_to_array.length-1;r>=0;r--)i=await e.array_to_array[r].decode(i);return i}}}async function Mi(t){let e=t.codecs.map(async s=>{var a;let l=await((a=Gs.get(s.name))==null?void 0:a());if(!l)throw new Error(`Unknown codec: ${s.name}`);return{Codec:l,meta:s}}),n=[],i,r=[];for await(let{Codec:s,meta:l}of e){let a=s.fromConfig(l.configuration,t);switch(a.kind){case"array_to_array":n.push(a);break;case"array_to_bytes":i=a;break;default:r.push(a)}}if(!i){if(!Ks(t))throw new Error(`Cannot encode ${t.data_type} to bytes without a codec`);i=yn.fromConfig({endian:"little"},t)}return{array_to_array:n,array_to_bytes:i,bytes_to_bytes:r}}function Ks(t){return t.data_type!=="v2:object"}const Fi=18446744073709551615n;function Js(t,e,n,i){if(t.store.getRange===void 0)throw new Error("Store does not support range requests");let r=t.store.getRange.bind(t.store),s=e.map((o,h)=>o/i.chunk_shape[h]),l=xn({data_type:"uint64",shape:[...s,2],codecs:i.index_codecs}),a={};return async o=>{let h=o.map((L,Y)=>Math.floor(L/s[Y])),f=t.resolve(n(h)).path,g;if(f in a)g=a[f];else{let L=4,Y=16*s.reduce((X,Z)=>X*Z,1),W=await r(f,{suffixLength:Y+L});g=a[f]=W?await l.decode(W):null}if(g===null)return;let{data:m,shape:p,stride:_}=g,y=o.map((L,Y)=>L%p[Y]).reduce((L,Y,W)=>L+Y*_[W],0),U=m[y],F=m[y+1];if(!(U===Fi&&F===Fi))return r(f,{offset:Number(U),length:Number(F)})}}class Nt{constructor(e,n="/"){le(this,"store");le(this,"path");this.store=e,this.path=n}resolve(e){let n=new URL(`file://${this.path.endsWith("/")?this.path:`${this.path}/`}`);return new Nt(this.store,new URL(e,n).pathname)}}var nn;class Xn extends Nt{constructor(n,i,r){super(n,i);le(this,"kind","group");Ie(this,nn);ke(this,nn,r)}get attrs(){return $(this,nn).attributes}}nn=new WeakMap;const Ht=Symbol("zarrita.context");function Zs(t){return t[Ht]}function Ys(t,e){let{configuration:n}=e.codecs.find(Us)??{},i={encode_chunk_key:Ls(e.chunk_key_encoding),TypedArray:Tr(e.data_type),fill_value:e.fill_value};if(n){let s=Bn(n.codecs);return{...i,kind:"sharded",chunk_shape:n.chunk_shape,codec:xn({data_type:e.data_type,shape:n.chunk_shape,codecs:n.codecs}),get_strides(l,a){return bt(l,a??s)},get_chunk_bytes:Js(t,e.chunk_grid.configuration.chunk_shape,i.encode_chunk_key,n)}}let r=Bn(e.codecs);return{...i,kind:"regular",chunk_shape:e.chunk_grid.configuration.chunk_shape,codec:xn({data_type:e.data_type,shape:e.chunk_grid.configuration.chunk_shape,codecs:e.codecs}),get_strides(s,l){return bt(s,l??r)},async get_chunk_bytes(s,l){let a=i.encode_chunk_key(s),o=t.resolve(a).path;return t.store.get(o,l)}}}var dr,_r,pt,gr;let kn=(gr=class extends(_r=Nt,dr=Ht,_r){constructor(n,i,r){super(n,i);le(this,"kind","array");Ie(this,pt);le(this,dr);ke(this,pt,{...r,fill_value:Or(r)}),this[Ht]=Ys(this,r)}get attrs(){return $(this,pt).attributes}get shape(){return $(this,pt).shape}get chunks(){return this[Ht].chunk_shape}get dtype(){return $(this,pt).data_type}async getChunk(n,i){let r=this[Ht],s=await r.get_chunk_bytes(n,i);if(!s){let l=r.chunk_shape.reduce((o,h)=>o*h,1),a=new r.TypedArray(l);return a.fill(r.fill_value),{data:a,shape:r.chunk_shape,stride:r.get_strides(r.chunk_shape)}}return r.codec.decode(s)}is(n){return Ps(this.dtype,n)}},pt=new WeakMap,gr),Cn=Qs();function Qs(){let t=new WeakMap;function e(n){let i=t.get(n)??{v2:0,v3:0};return t.set(n,i),i}return{increment(n,i){e(n)[i]+=1},version_max(n){let i=e(n);return i.v3>i.v2?"v3":"v2"}}}async function Xs(t){let e=await t.store.get(t.resolve(".zattrs").path);return e?un(e):{}}async function $s(t,e={}){let n="store"in t?t:new Nt(t),i={};return(e.attrs??!0)&&(i=await Xs(n)),e.kind==="array"?Di(n,i):e.kind==="group"?Ni(n,i):Di(n,i).catch(r=>{if(r instanceof an)return Ni(n,i);throw r})}async function Di(t,e){let{path:n}=t.resolve(".zarray"),i=await t.store.get(n);if(!i)throw new an("v2 array",{cause:new Jn(n)});return Cn.increment(t.store,"v2"),new kn(t.store,t.path,Ds(un(i),e))}async function Ni(t,e){let{path:n}=t.resolve(".zgroup"),i=await t.store.get(n);if(!i)throw new an("v2 group",{cause:new Jn(n)});return Cn.increment(t.store,"v2"),new Xn(t.store,t.path,Ns(un(i),e))}async function el(t){let{store:e,path:n}=t.resolve("zarr.json"),i=await t.store.get(n);if(!i)throw new an("v3 array or group",{cause:new Jn(n)});let r=un(i);return r.node_type==="array"&&(r.fill_value=Or(r)),r.node_type==="array"?new kn(e,t.path,r):new Xn(e,t.path,r)}async function tl(t,e={}){let n="store"in t?t:new Nt(t),i=await el(n);if(Cn.increment(n.store,"v3"),e.kind===void 0||e.kind==="array"&&i instanceof kn||e.kind==="group"&&i instanceof Xn)return i;let r=i instanceof kn?"array":"group";throw new Error(`Expected node of kind ${e.kind}, found ${r}.`)}async function mt(t,e={}){let n="store"in t?t.store:t,i=Cn.version_max(n),r=i==="v2"?mt.v2:mt.v3,s=i==="v2"?mt.v3:mt.v2;return r(t,e).catch(l=>{if(l instanceof an)return s(t,e);throw l})}mt.v2=$s;mt.v3=tl;function*nl(t,e,n=1){e===void 0&&(e=t,t=0);for(let i=t;i<e;i+=n)yield i}function*il(...t){if(t.length===0)return;const e=t.map(i=>i[Symbol.iterator]()),n=e.map(i=>i.next());if(n.some(i=>i.done))throw new Error("Input contains an empty iterator.");for(let i=0;;){if(n[i].done){if(e[i]=t[i][Symbol.iterator](),n[i]=e[i].next(),++i>=e.length)return}else yield n.map(({value:r})=>r),i=0;n[i]=e[i].next()}}function rl({start:t,stop:e,step:n},i){if(n===0)throw new Error("slice step cannot be zero");n=n??1;const r=n<0,[s,l]=r?[-1,i-1]:[0,i];return t===null?t=r?l:s:t<0?(t+=i,t<s&&(t=s)):t>l&&(t=l),e===null?e=r?s:l:e<0?(e+=i,e<s&&(e=s)):e>l&&(e=l),[t,e,n]}function Vn(t,e,n=null){return e===void 0&&(e=t,t=null),{start:t,stop:e,step:n}}function sl(){const t=[];return{add:e=>t.push(e()),onIdle:()=>Promise.all(t)}}class $n extends Error{constructor(e){super(e),this.name="IndexError"}}function ll(t,e){throw new $n(`too many indicies for array; expected ${e.length}, got ${t.length}`)}function ol(t){throw new $n(`index out of bounds for dimension with length ${t}`)}function al(){throw new $n("only slices with step >= 1 are supported")}function ul(t,e){t.length>e.length&&ll(t,e)}function fl(t,e){return t=Math.trunc(t),t<0&&(t=e+t),(t>=e||t<0)&&ol(e),t}class cl{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){le(this,"dim_sel");le(this,"dim_len");le(this,"dim_chunk_len");le(this,"nitems");e=fl(e,n),this.dim_sel=e,this.dim_len=n,this.dim_chunk_len=i,this.nitems=1}*[Symbol.iterator](){const e=Math.floor(this.dim_sel/this.dim_chunk_len),n=e*this.dim_chunk_len,i=this.dim_sel-n;yield{dim_chunk_ix:e,dim_chunk_sel:i}}}class Pi{constructor({dim_sel:e,dim_len:n,dim_chunk_len:i}){le(this,"start");le(this,"stop");le(this,"step");le(this,"dim_len");le(this,"dim_chunk_len");le(this,"nitems");le(this,"nchunks");const[r,s,l]=rl(e,n);this.start=r,this.stop=s,this.step=l,this.step<1&&al(),this.dim_len=n,this.dim_chunk_len=i,this.nitems=Math.max(0,Math.ceil((this.stop-this.start)/this.step)),this.nchunks=Math.ceil(this.dim_len/this.dim_chunk_len)}*[Symbol.iterator](){const e=Math.floor(this.start/this.dim_chunk_len),n=Math.ceil(this.stop/this.dim_chunk_len);for(const i of nl(e,n)){const r=i*this.dim_chunk_len,s=Math.min(this.dim_len,(i+1)*this.dim_chunk_len),l=s-r;let a=0,o=0;if(this.start<r){const p=(r-this.start)%this.step;p&&(o+=this.step-p),a=Math.ceil((r-this.start)/this.step)}else o=this.start-r;const h=this.stop>s?l:this.stop-r,f=[o,h,this.step],g=Math.ceil((h-o)/this.step),m=[a,a+g,1];yield{dim_chunk_ix:i,dim_chunk_sel:f,dim_out_sel:m}}}}function hl(t,e){let n=[];return t===null?n=e.map(i=>Vn(null)):Array.isArray(t)&&(n=t.map(i=>i??Vn(null))),ul(n,e),n}class dl{constructor({selection:e,shape:n,chunk_shape:i}){le(this,"dim_indexers");le(this,"shape");this.dim_indexers=hl(e,n).map((r,s)=>new(typeof r=="number"?cl:Pi)({dim_sel:r,dim_len:n[s],dim_chunk_len:i[s]})),this.shape=this.dim_indexers.filter(r=>r instanceof Pi).map(r=>r.nitems)}*[Symbol.iterator](){for(const e of il(...this.dim_indexers)){const n=e.map(r=>r.dim_chunk_ix),i=e.map(r=>"dim_out_sel"in r?{from:r.dim_chunk_sel,to:r.dim_out_sel}:{from:r.dim_chunk_sel,to:null});yield{chunk_coords:n,mapping:i}}}}function _l(t,e){return"get"in t?t.get(e):t[e]}async function gl(t,e,n,i){var o;let r=Zs(t),s=new dl({selection:e,shape:t.shape,chunk_shape:t.chunks}),l=i.prepare(new r.TypedArray(s.shape.reduce((h,f)=>h*f,1)),s.shape,r.get_strides(s.shape,n.order)),a=((o=n.create_queue)==null?void 0:o.call(n))??sl();for(const{chunk_coords:h,mapping:f}of s)a.add(async()=>{let{data:g,shape:m,stride:p}=await t.getChunk(h,n.opts),_=i.prepare(g,m,p);i.set_from_chunk(l,_,f)});return await a.onIdle(),s.shape.length===0?_l(l.data,0):l}function ei(t,e=0,n){let i=n??t.length-e;return{length:i,subarray(r,s=i){return ei(t,e+r,s-r)},set(r,s=0){for(let l=0;l<r.length;l++)t[e+s+l]=r.get(l)},get(r){return t[e+r]}}}function zn(t){return globalThis.Array.isArray(t.data)?{data:ei(t.data),stride:t.stride,bytes_per_element:1}:{data:new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength),stride:t.stride,bytes_per_element:t.data.BYTES_PER_ELEMENT}}function ml(t){return"chars"in t?t.constructor.bind(null,t.chars):t.constructor}function pl(t,e){if(globalThis.Array.isArray(t.data))return ei([e]);let n=ml(t.data),i=new n([e]);return new Uint8Array(i.buffer,i.byteOffset,i.byteLength)}const bl={prepare(t,e,n){return{data:t,shape:e,stride:n}},set_scalar(t,e,n){let i=zn(t);Hn(i,e,pl(t,n),i.bytes_per_element)},set_from_chunk(t,e,n){let i=zn(t);vn(i,zn(e),i.bytes_per_element,n)}};async function vl(t,e=null,n={}){return gl(t,e,n,bl)}function Rr(t,e,n){return n<0&&e<t?Math.floor((t-e-1)/-n)+1:t<e?Math.floor((e-t-1)/n)+1:0}function Hn(t,e,n,i){if(e.length===0){t.data.set(n,0);return}const[r,...s]=e,[l,...a]=t.stride;if(typeof r=="number"){const m=t.data.subarray(l*r*i);Hn({data:m,stride:a},s,n,i);return}const[o,h,f]=r,g=Rr(o,h,f);if(s.length===0){for(let m=0;m<g;m++)t.data.set(n,l*(o+f*m)*i);return}for(let m=0;m<g;m++){const p=t.data.subarray(l*(o+f*m)*i);Hn({data:p,stride:a},s,n,i)}}function vn(t,e,n,i){const[r,...s]=i,[l,...a]=t.stride,[o,...h]=e.stride;if(r.from===null){if(s.length===0){t.data.set(e.data.subarray(0,n),r.to*n);return}vn({data:t.data.subarray(l*r.to*n),stride:a},e,n,s);return}if(r.to===null){if(s.length===0){let F=r.from*n;t.data.set(e.data.subarray(F,F+n),0);return}vn(t,{data:e.data.subarray(o*r.from*n),stride:h},n,s);return}const[f,g,m]=r.to,[p,_,y]=r.from,U=Rr(f,g,m);if(s.length===0){if(m===1&&y===1&&l===1&&o===1){let F=p*n,L=U*n;t.data.set(e.data.subarray(F,F+L),f*n);return}for(let F=0;F<U;F++){let L=o*(p+y*F)*n;t.data.set(e.data.subarray(L,L+n),l*(f+m*F)*n)}return}for(let F=0;F<U;F++)vn({data:t.data.subarray(l*(f+F*m)*n),stride:a},{data:e.data.subarray(o*(p+F*y)*n),stride:h},n,s)}function zr(t,e,n,i={}){return e!==void 0&&n!==void 0&&(i={...i,headers:{...i.headers,Range:`bytes=${e}-${e+n-1}`}}),fetch(t,i)}function wl(t,e){return{...t,...e,headers:{...t.headers,...e.headers}}}function Ui(t,e){const n=typeof t=="string"?new URL(t):t;n.pathname.endsWith("/")||(n.pathname+="/");const i=new URL(e.slice(1),n);return i.search=n.search,i}async function Bi(t){if(!(t.status===404||t.status===403)){if(t.status===200||t.status===206)return new Uint8Array(await t.arrayBuffer());throw new Error(`Unexpected response status ${t.status} ${t.statusText}`)}}async function yl(t,e,n,i){if(i)return fetch(t,{...n,headers:{...n.headers,Range:`bytes=-${e}`}});let r=await fetch(t,{...n,method:"HEAD"});if(!r.ok)return r;let s=r.headers.get("Content-Length"),l=Number(s);return zr(t,l-e,l,n)}var rn,sn,ln,Wn;class kl{constructor(e,n={}){Ie(this,ln);le(this,"url");Ie(this,rn);Ie(this,sn);this.url=e,ke(this,rn,n.overrides??{}),ke(this,sn,n.useSuffixRequest??!1)}async get(e,n={}){let i=Ui(this.url,e).href,r=await fetch(i,On(this,ln,Wn).call(this,n));return Bi(r)}async getRange(e,n,i={}){let r=Ui(this.url,e),s=On(this,ln,Wn).call(this,i),l;return"suffixLength"in n?l=await yl(r,n.suffixLength,s,$(this,sn)):l=await zr(r,n.offset,n.length,s),Bi(l)}}rn=new WeakMap,sn=new WeakMap,ln=new WeakSet,Wn=function(e){return wl($(this,rn),e)};function El(t){let e,n;return{c(){e=k("div"),n=k("canvas"),ae(n,"width",t[3]+"px"),ae(n,"height",t[4]+"px"),ae(n,"background-color","lightgrey"),b(n,"height",t[2]),b(n,"width",t[1]),b(n,"class","svelte-lwhhyg"),b(e,"class","canvasWrapper svelte-lwhhyg"),ae(e,"width",t[3]+"px"),ae(e,"height",t[4]+"px"),Tt(e,"spinner",t[5])},m(i,r){V(i,e,r),d(e,n),t[12](n)},p(i,[r]){r&8&&ae(n,"width",i[3]+"px"),r&16&&ae(n,"height",i[4]+"px"),r&4&&b(n,"height",i[2]),r&2&&b(n,"width",i[1]),r&8&&ae(e,"width",i[3]+"px"),r&16&&ae(e,"height",i[4]+"px"),r&32&&Tt(e,"spinner",i[5])},i:ye,o:ye,d(i){i&&x(e),t[12](null)}}}function Cl(t,e,n){let{source:i}=e,{attrs:r}=e,{thumbDatasetIndex:s=void 0}=e,{thumbAspectRatio:l=1}=e,{cssSize:a=120}=e,{max_size:o=512}=e,h,f=a,g=a;l>1?g=f/l:l<1&&(f=g*l);let m=f,p=g,_=!0;const y=new AbortController;async function U(){var I;let L=r.multiscales[0].datasets.map(M=>M.path),Y=r.multiscales[0].axes.map(M=>M.name),W=L.at(-1);s!=null&&s<L.length&&(W=L[s]);const X=new kl(i+"/"+W),Z=await mt.v3(X,{kind:"array"});let z=Y.indexOf("c"),u=Z.shape;if(u.at(-1)*u.at(-2)>o*o){console.log("Lowest resolution too large for Thumbnail: ",u,i);return}let c=u.length,E=u[z]||1,A,T;(I=r==null?void 0:r.omero)!=null&&I.channels?(A=r.omero.channels.map(M=>M.active),T=r.omero.channels.map(M=>Er(M.color))):(A=fs(E),T=cs(E,A)),T=T.filter((M,ee)=>A[ee]);let P=A.reduce((M,ee,O)=>(ee&&M.push(O),M),[]).map(M=>{let ee=u.map((O,J)=>J==z?M:J>=c-2?Vn(0,O):Y[J]=="z"||Y[J]=="t"?parseInt(O/2+""):0);return vl(Z,ee,{opts:{signal:y.signal}})}),Q=await Promise.all(P),j=Q.map(M=>kr(M)),w=ss(Q,j,T);n(1,f=u.at(-1)),n(2,g=u.at(-2));let S=f/a;g>f&&(S=g/a),n(3,m=f/S),n(4,p=g/S),setTimeout(()=>{const M=h.getContext("2d");n(5,_=!1),M.putImageData(new ImageData(w,f,g),0,0)},100)}on(()=>{U()}),Kn(()=>{y.abort()});function F(L){Mt[L?"unshift":"push"](()=>{h=L,n(0,h)})}return t.$$set=L=>{"source"in L&&n(6,i=L.source),"attrs"in L&&n(7,r=L.attrs),"thumbDatasetIndex"in L&&n(8,s=L.thumbDatasetIndex),"thumbAspectRatio"in L&&n(9,l=L.thumbAspectRatio),"cssSize"in L&&n(10,a=L.cssSize),"max_size"in L&&n(11,o=L.max_size)},[h,f,g,m,p,_,i,r,s,l,a,o,F]}class Lr extends Ye{constructor(e){super(),Ze(this,e,Cl,El,xe,{source:6,attrs:7,thumbDatasetIndex:8,thumbAspectRatio:9,cssSize:10,max_size:11})}}function ji(t,e,n){const i=t.slice();return i[12]=e[n],i}function qi(t){let e,n;return e=new Lr({props:{source:t[4],attrs:t[3],max_size:2e3,thumbDatasetIndex:t[5],thumbAspectRatio:t[6]}}),{c(){Je(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r&16&&(s.source=i[4]),r&8&&(s.attrs=i[3]),r&32&&(s.thumbDatasetIndex=i[5]),r&64&&(s.thumbAspectRatio=i[6]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function xi(t){let e,n,i,r,s,l,a,o=t[0].source+"",h,f,g=t[0].csv&&Vi(t);return{c(){e=k("div"),n=k("span"),n.textContent="Data",i=q(),g&&g.c(),r=q(),s=k("span"),s.textContent="provided by",l=q(),a=k("strong"),h=B(o),f=B("."),b(n,"class","hideOnSmall svelte-afrxqy"),b(s,"class","hideOnSmall svelte-afrxqy"),ae(a,"color","grey")},m(m,p){V(m,e,p),d(e,n),d(e,i),g&&g.m(e,null),d(e,r),d(e,s),d(e,l),d(e,a),d(a,h),d(e,f)},p(m,p){m[0].csv?g?g.p(m,p):(g=Vi(m),g.c(),g.m(e,r)):g&&(g.d(1),g=null),p&1&&o!==(o=m[0].source+"")&&me(h,o)},d(m){m&&x(e),g&&g.d()}}}function Vi(t){var a;let e,n,i,r=((a=t[0].csv)==null?void 0:a.split("/").pop().replace(".csv",""))+"",s,l;return{c(){e=k("span"),e.textContent="from collection",n=q(),i=k("a"),s=B(r),b(e,"class","hideOnSmall svelte-afrxqy"),b(i,"title","Show collection in a new tab"),b(i,"href",l=Ki(t[0])),b(i,"target","_blank")},m(o,h){V(o,e,h),V(o,n,h),V(o,i,h),d(i,s)},p(o,h){var f;h&1&&r!==(r=((f=o[0].csv)==null?void 0:f.split("/").pop().replace(".csv",""))+"")&&me(s,r),h&1&&l!==(l=Ki(o[0]))&&b(i,"href",l)},d(o){o&&(x(e),x(n),x(i))}}}function Hi(t){let e,n,i,r,s,l;return{c(){e=B("Browse "),n=k("a"),i=B("Original data"),l=B("."),b(n,"title",r="Link to original data: "+t[0].origin),b(n,"href",s=t[0].origin),b(n,"target","_blank")},m(a,o){V(a,e,o),V(a,n,o),d(n,i),V(a,l,o)},p(a,o){o&1&&r!==(r="Link to original data: "+a[0].origin)&&b(n,"title",r),o&1&&s!==(s=a[0].origin)&&b(n,"href",s)},d(a){a&&(x(e),x(n),x(l))}}}function Wi(t){let e=t[12].toUpperCase()+"",n,i,r=t[0][`size_${t[12]}`]+"",s,l;return{c(){n=B(e),i=B(":"),s=B(r),l=B("  ")},m(a,o){V(a,n,o),V(a,i,o),V(a,s,o),V(a,l,o)},p(a,o){o&1&&r!==(r=a[0][`size_${a[12]}`]+"")&&me(s,r)},d(a){a&&(x(n),x(i),x(s),x(l))}}}function Gi(t){let e,n=t[0][`size_${t[12]}`]!==void 0&&Wi(t);return{c(){n&&n.c(),e=En()},m(i,r){n&&n.m(i,r),V(i,e,r)},p(i,r){i[0][`size_${i[12]}`]!==void 0?n?n.p(i,r):(n=Wi(i),n.c(),n.m(e.parentNode,e)):n&&(n.d(1),n=null)},d(i){i&&x(e),n&&n.d(i)}}}function Sl(t){let e,n,i=ft(t[0].written)+"",r;return{c(){e=k("div"),n=B("Data size: "),r=B(i)},m(s,l){V(s,e,l),d(e,n),d(e,r)},p(s,l){l&1&&i!==(i=ft(s[0].written)+"")&&me(r,i)},d(s){s&&x(e)}}}function Al(t){let e,n,i=t[0].shards+"",r;return{c(){e=k("div"),n=B("Shard shape: "),r=B(i)},m(s,l){V(s,e,l),d(e,n),d(e,r)},p(s,l){l&1&&i!==(i=s[0].shards+"")&&me(r,i)},d(s){s&&x(e)}}}function Il(t){let e,n,i=t[0].chunks+"",r;return{c(){e=k("div"),n=B("Chunk shape: "),r=B(i)},m(s,l){V(s,e,l),d(e,n),d(e,r)},p(s,l){l&1&&i!==(i=s[0].chunks+"")&&me(r,i)},d(s){s&&x(e)}}}function Tl(t){let e,n,i,r,s,l,a=t[9](t[0].url)+"",o,h,f,g=(t[0].name?t[0].name.replaceAll(t[1],`<mark>${t[1]}</mark>`):"")+"",m,p,_,y=t[7].replaceAll(t[1],`<mark>${t[1]}</mark>`)+"",U,F,L,Y,W,X,Z,z,u,c,E,A,T,R,P,Q,j=t[3]&&qi(t),w=t[0].source&&xi(t),S=t[0].origin&&Hi(t),I=Pe(["t","c","z","y","x"]),M=[];for(let v=0;v<5;v+=1)M[v]=Gi(ji(t,I,v));function ee(v,D){return v[2]=="chunk_pixels"?Il:v[2]=="shard_pixels"?Al:Sl}let O=ee(t),J=O(t);return{c(){e=k("div"),n=k("div"),j&&j.c(),i=q(),r=k("div"),s=k("div"),l=k("strong"),h=q(),f=k("div"),p=q(),_=k("div"),U=q(),w&&w.c(),F=q(),L=k("div"),Y=B("Open in "),W=k("a"),X=B("OME-Validator."),u=q(),S&&S.c(),c=q(),E=k("div"),A=B(`Image size:
      `);for(let v=0;v<5;v+=1)M[v].c();T=q(),J.c(),b(n,"class","thumbWrapper svelte-afrxqy"),b(s,"title",o=t[0].url),b(f,"class",m=pi(t[1]==""?"hideOnSmall":"")+" svelte-afrxqy"),b(W,"title",Z="Open in Validator: "+t[0].url),b(W,"href",z="https://will-moore.github.io/ome-ngff-validator/?source="+t[0].url),b(W,"target","_blank"),b(e,"class","zarr-list-item svelte-afrxqy")},m(v,D){V(v,e,D),d(e,n),j&&j.m(n,null),d(e,i),d(e,r),d(r,s),d(s,l),l.innerHTML=a,d(r,h),d(r,f),f.innerHTML=g,d(r,p),d(r,_),_.innerHTML=y,d(r,U),w&&w.m(r,null),d(r,F),d(r,L),d(L,Y),d(L,W),d(W,X),d(L,u),S&&S.m(L,null),d(r,c),d(r,E),d(E,A);for(let H=0;H<5;H+=1)M[H]&&M[H].m(E,null);d(r,T),J.m(r,null),R=!0,P||(Q=be(n,"click",t[8]),P=!0)},p(v,[D]){if(v[3]?j?(j.p(v,D),D&8&&se(j,1)):(j=qi(v),j.c(),se(j,1),j.m(n,null)):j&&(Ft(),he(j,1,1,()=>{j=null}),Dt()),(!R||D&1)&&a!==(a=v[9](v[0].url)+"")&&(l.innerHTML=a),(!R||D&1&&o!==(o=v[0].url))&&b(s,"title",o),(!R||D&3)&&g!==(g=(v[0].name?v[0].name.replaceAll(v[1],`<mark>${v[1]}</mark>`):"")+"")&&(f.innerHTML=g),(!R||D&2&&m!==(m=pi(v[1]==""?"hideOnSmall":"")+" svelte-afrxqy"))&&b(f,"class",m),(!R||D&130)&&y!==(y=v[7].replaceAll(v[1],`<mark>${v[1]}</mark>`)+"")&&(_.innerHTML=y),v[0].source?w?w.p(v,D):(w=xi(v),w.c(),w.m(r,F)):w&&(w.d(1),w=null),(!R||D&1&&Z!==(Z="Open in Validator: "+v[0].url))&&b(W,"title",Z),(!R||D&1&&z!==(z="https://will-moore.github.io/ome-ngff-validator/?source="+v[0].url))&&b(W,"href",z),v[0].origin?S?S.p(v,D):(S=Hi(v),S.c(),S.m(L,null)):S&&(S.d(1),S=null),D&1){I=Pe(["t","c","z","y","x"]);let H;for(H=0;H<5;H+=1){const ie=ji(v,I,H);M[H]?M[H].p(ie,D):(M[H]=Gi(ie),M[H].c(),M[H].m(E,null))}for(;H<5;H+=1)M[H].d(1)}O===(O=ee(v))&&J?J.p(v,D):(J.d(1),J=O(v),J&&(J.c(),J.m(r,null)))},i(v){R||(se(j),R=!0)},o(v){he(j),R=!1},d(v){v&&x(e),j&&j.d(),w&&w.d(),S&&S.d(),Ot(M,v),J.d(),P=!1,Q()}}}function Ki(t){return window.location.origin+window.location.pathname+"?csv="+t.csv}function Ol(t,e,n){let i,{rowData:r}=e,{textFilter:s}=e,{sortedBy:l=void 0}=e,a,o,h,f=1;const g=new AbortController;if(r.size_x&&r.size_y){let _=Math.max(r.size_x,r.size_y);for(h=0;_>256;)h+=1,_=_/2;f=r.size_x/r.size_y}function m(){console.log("Clicked on thumbnail"),Ce.setSelectedRow(r)}function p(_){if(s&&_.toLowerCase().includes(s.toLowerCase())){let U=_.toLowerCase(),F=s.toLowerCase(),L=U.indexOf(F),Y=Math.max(0,Math.min(L,_.length-50)),W=_.substring(Y,L);return W+="<mark>",W+=_.substring(L,L+F.length),W+="</mark>",W+=_.substring(L+F.length),W}return _.split("/").pop()}return on(async()=>{let _=r.url;r.series0!==void 0&&(_+="/"+r.series0);let y=await Kt(_,g.signal);n(3,a=y[0]),n(4,o=y[1]),y[2]}),Kn(()=>{g.abort()}),t.$$set=_=>{"rowData"in _&&n(0,r=_.rowData),"textFilter"in _&&n(1,s=_.textFilter),"sortedBy"in _&&n(2,l=_.sortedBy)},t.$$.update=()=>{var _;t.$$.dirty&3&&n(7,i=s!=""&&((_=r.description)!=null&&_.toLowerCase().includes(s.toLowerCase()))?r.description:"")},[r,s,l,a,o,h,f,i,m,p]}class Rl extends Ye{constructor(e){super(),Ze(this,e,Ol,Tl,xe,{rowData:0,textFilter:1,sortedBy:2})}}function zl(t){let e,n,i,r;return n=new Rl({props:{rowData:t[0][t[13]],textFilter:t[1],sortedBy:t[2]}}),{c(){e=k("div"),Je(n.$$.fragment),b(e,"slot","item"),b(e,"style",i=t[12]),b(e,"class","row svelte-1xvcjxw")},m(s,l){V(s,e,l),He(n,e,null),r=!0},p(s,l){const a={};l&8193&&(a.rowData=s[0][s[13]]),l&2&&(a.textFilter=s[1]),l&4&&(a.sortedBy=s[2]),n.$set(a),(!r||l&4096&&i!==(i=s[12]))&&b(e,"style",i)},i(s){r||(se(n.$$.fragment,s),r=!0)},o(s){he(n.$$.fragment,s),r=!1},d(s){s&&x(e),We(n)}}}function Ll(t){let e=!1,n=()=>{e=!1},i,r,s,l=`${t[5]}px`,a,o,h;return lt(t[8]),lt(t[9]),s=new Ss({props:{width:"100%",height:t[5],itemCount:t[0].length,itemSize:160,getKey:t[6],$$slots:{item:[zl,({style:f,index:g})=>({12:f,13:g}),({style:f,index:g})=>(f?4096:0)|(g?8192:0)]},$$scope:{ctx:t}}}),s.$on("afterScroll",t[7]),{c(){r=k("div"),Je(s.$$.fragment),b(r,"class","imageListContainer svelte-1xvcjxw"),ae(r,"height",l)},m(f,g){V(f,r,g),He(s,r,null),t[10](r),a=!0,o||(h=[be(window,"resize",t[8]),be(window,"scroll",()=>{e=!0,clearTimeout(i),i=setTimeout(n,100),t[9]()})],o=!0)},p(f,[g]){g&16&&!e&&(e=!0,clearTimeout(i),scrollTo(window.pageXOffset,f[4]),i=setTimeout(n,100));const m={};g&32&&(m.height=f[5]),g&1&&(m.itemCount=f[0].length),g&28679&&(m.$$scope={dirty:g,ctx:f}),s.$set(m),g&32&&l!==(l=`${f[5]}px`)&&ae(r,"height",l)},i(f){a||(se(s.$$.fragment,f),a=!0)},o(f){he(s.$$.fragment,f),a=!1},d(f){f&&x(r),We(s),t[10](null),o=!1,nt(h)}}}function Ml(t,e,n){let i,{tableRows:r}=e,{textFilter:s}=e,{sortedBy:l=void 0}=e;function a(y){return r[y].url}let o,h=0,f=0;function g(y){let F=o.offsetTop-20;y.detail.offset-f<0&&h>F&&n(4,h-=1),f=y.detail.offset}function m(){n(5,i=window.innerHeight)}function p(){n(4,h=window.pageYOffset)}function _(y){Mt[y?"unshift":"push"](()=>{o=y,n(3,o)})}return t.$$set=y=>{"tableRows"in y&&n(0,r=y.tableRows),"textFilter"in y&&n(1,s=y.textFilter),"sortedBy"in y&&n(2,l=y.sortedBy)},n(5,i=0),[r,s,l,o,h,i,a,g,m,p,_]}class Fl extends Ye{constructor(e){super(),Ze(this,e,Ml,Ll,xe,{tableRows:0,textFilter:1,sortedBy:2})}}function Ji(t){let e,n;return e=new Lr({props:{source:t[1],attrs:t[0],cssSize:512,max_size:2e3,thumbDatasetIndex:t[2],thumbAspectRatio:t[3]}}),{c(){Je(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.source=i[1]),r&1&&(s.attrs=i[0]),r&4&&(s.thumbDatasetIndex=i[2]),r&8&&(s.thumbAspectRatio=i[3]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function Dl(t){let e,n,i=t[0]&&Ji(t);return{c(){i&&i.c(),e=En()},m(r,s){i&&i.m(r,s),V(r,e,s),n=!0},p(r,[s]){r[0]?i?(i.p(r,s),s&1&&se(i,1)):(i=Ji(r),i.c(),se(i,1),i.m(e.parentNode,e)):i&&(Ft(),he(i,1,1,()=>{i=null}),Dt())},i(r){n||(se(i),n=!0)},o(r){he(i),n=!1},d(r){r&&x(e),i&&i.d(r)}}}function Nl(t,e,n){let{rowData:i}=e;console.log("ThumbLoader",i);let r,s,l,a=1;if(i.size_x&&i.size_y){let o=Math.max(i.size_x,i.size_y);for(l=0;o>1024;)l+=1,o=o/2;a=i.size_x/i.size_y}else l=void 0,a=1;return on(async()=>{let o=await Kt(i.url);n(0,r=o[0]),n(1,s=o[1]),o[2]}),t.$$set=o=>{"rowData"in o&&n(4,i=o.rowData)},[r,s,l,a,i]}class Pl extends Ye{constructor(e){super(),Ze(this,e,Nl,Dl,xe,{rowData:4})}}function Zi(t,e,n){const i=t.slice();return i[5]=e[n][0],i[6]=e[n][1],i}function Yi(t){let e,n;return e=new Pl({props:{rowData:t[1]}}),{c(){Je(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r&2&&(s.rowData=i[1]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function Qi(t){let e,n,i=t[2]&&Yi(t);return{c(){i&&i.c(),e=En()},m(r,s){i&&i.m(r,s),V(r,e,s),n=!0},p(r,s){r[2]?i?(i.p(r,s),s&4&&se(i,1)):(i=Yi(r),i.c(),se(i,1),i.m(e.parentNode,e)):i&&(Ft(),he(i,1,1,()=>{i=null}),Dt())},i(r){n||(se(i),n=!0)},o(r){he(i),n=!1},d(r){r&&x(e),i&&i.d(r)}}}function Xi(t){let e,n=Pe(Object.entries(t[1])),i=[];for(let r=0;r<n.length;r+=1)i[r]=$i(Zi(t,n,r));return{c(){e=k("table");for(let r=0;r<i.length;r+=1)i[r].c()},m(r,s){V(r,e,s);for(let l=0;l<i.length;l+=1)i[l]&&i[l].m(e,null)},p(r,s){if(s&2){n=Pe(Object.entries(r[1]));let l;for(l=0;l<n.length;l+=1){const a=Zi(r,n,l);i[l]?i[l].p(a,s):(i[l]=$i(a),i[l].c(),i[l].m(e,null))}for(;l<i.length;l+=1)i[l].d(1);i.length=n.length}},d(r){r&&x(e),Ot(i,r)}}}function $i(t){let e,n,i=t[5]+"",r,s,l=t[6]+"",a;return{c(){e=k("tr"),n=k("td"),r=B(i),s=k("td"),a=B(l)},m(o,h){V(o,e,h),d(e,n),d(n,r),d(e,s),d(s,a)},p(o,h){h&2&&i!==(i=o[5]+"")&&me(r,i),h&2&&l!==(l=o[6]+"")&&me(a,l)},d(o){o&&x(e)}}}function Ul(t){let e,n,i,r,s=t[2],l,a,o,h,f=Qi(t),g=t[1]&&Xi(t);return{c(){e=k("div"),n=k("button"),n.textContent="×",i=q(),r=k("div"),f.c(),l=q(),g&&g.c(),b(n,"class","close svelte-1g3sjso"),b(n,"title","Close"),b(r,"class","scrollable svelte-1g3sjso"),b(e,"id","mypopover"),b(e,"popover",""),b(e,"class","svelte-1g3sjso")},m(m,p){V(m,e,p),d(e,n),d(e,i),d(e,r),f.m(r,null),d(r,l),g&&g.m(r,null),t[4](e),a=!0,o||(h=be(n,"click",t[3]),o=!0)},p(m,[p]){p&4&&xe(s,s=m[2])?(Ft(),he(f,1,1,ye),Dt(),f=Qi(m),f.c(),se(f,1),f.m(r,l)):f.p(m,p),m[1]?g?g.p(m,p):(g=Xi(m),g.c(),g.m(r,null)):g&&(g.d(1),g=null)},i(m){a||(se(f),a=!0)},o(m){he(f),a=!1},d(m){m&&x(e),f.d(m),g&&g.d(),t[4](null),o=!1,h()}}}function Bl(t,e,n){let i,r,s;Ce.subscribeSelectedRow(o=>{console.log("Showing preview for",o),o&&(n(1,r=o),console.log("Showing Thumb preview for",o,r),n(2,s=r.url),i.showPopover())});function l(){i.hidePopover()}on(()=>{console.log("Mounted popover",i),i&&i.addEventListener("toggle",o=>{o.newState==="open"||(console.log("Popover has been hidden"),Ce.setSelectedRow(null))})});function a(o){Mt[o?"unshift":"push"](()=>{i=o,n(0,i)})}return[i,r,s,l,a]}class jl extends Ye{constructor(e){super(),Ze(this,e,Bl,Ul,xe,{})}}const ql="https://ome.github.io/ome2024-ngff-challenge/selectCaret.svg",xl="https://ome.github.io/ome2024-ngff-challenge/ome-main-nav.svg",Vl="https://ome.github.io/ome2024-ngff-challenge/github-mark-white.svg";function Hl(t){let e,n,i,r,s,l,a,o,h,f,g,m,p,_,y;return{c(){e=k("base"),n=q(),i=k("nav"),r=k("a"),s=k("img"),a=q(),o=k("a"),h=k("h2"),h.textContent="2024 NGFF Challenge",f=q(),g=k("div"),m=q(),p=k("a"),p.textContent="About",_=q(),y=k("a"),y.innerHTML=`<img alt="GitHub Logo" src="${Vl}" class="svelte-1q2q39w"/>`,b(e,"href",t[0]),b(s,"alt","OME Logo"),Ln(s.src,l=xl)||b(s,"src",l),b(s,"class","svelte-1q2q39w"),b(r,"class","logolink svelte-1q2q39w"),b(r,"href",t[0]),b(h,"class","svelte-1q2q39w"),b(o,"href",t[0]),b(o,"class","svelte-1q2q39w"),ae(g,"flex","1"),b(p,"href","about/"),b(p,"class","svelte-1q2q39w"),b(y,"class","github svelte-1q2q39w"),b(y,"title","Open in GitHub"),b(y,"target","_blank"),b(y,"href","https://github.com/ome/ome2024-ngff-challenge/"),b(i,"class","svelte-1q2q39w")},m(U,F){V(U,e,F),V(U,n,F),V(U,i,F),d(i,r),d(r,s),d(i,a),d(i,o),d(o,h),d(i,f),d(i,g),d(i,m),d(i,p),d(i,_),d(i,y)},p:ye,i:ye,o:ye,d(U){U&&(x(e),x(n),x(i))}}}function Wl(t){let e="https://ome.github.io/ome2024-ngff-challenge/";return console.log("Nav base",e),[e]}class Gl extends Ye{constructor(e){super(),Ze(this,e,Wl,Hl,xe,{})}}function er(t){let e=t[0].plate_count+"",n,i;return{c(){n=B(e),i=B(" plates")},m(r,s){V(r,n,s),V(r,i,s)},p(r,s){s&1&&e!==(e=r[0].plate_count+"")&&me(n,e)},d(r){r&&(x(n),x(i))}}}function Kl(t){let e,n,i,r,s,l,a,o=t[0].source+"",h,f,g,m,p,_,y=ft(t[0].bytes)+"",U,F,L,Y,W,X,Z,z,u=t[0].image_count+"",c,E,A,T,R,P,Q,j,w,S=t[0].plate_count&&er(t);return{c(){e=k("div"),n=k("label"),i=k("img"),l=q(),a=k("div"),h=B(o),f=q(),g=k("br"),m=q(),p=k("span"),_=B("("),U=B(y),F=B(")"),Y=k("input"),X=q(),Z=k("div"),S&&S.c(),z=q(),c=B(u),E=B(" images"),A=q(),T=k("label"),R=k("input"),P=q(),Q=k("span"),Q.textContent="×",b(i,"title",r=t[0].url),b(i,"class","sourceLogo svelte-1iuq3t7"),b(i,"alt","Source logo"),Ln(i.src,s=vi(t[0].source))||b(i,"src",s),b(p,"title",L=t[0].child_csv.length+" collections"),b(Y,"class","source svelte-1iuq3t7"),b(Y,"type","radio"),b(Y,"name","source"),Y.value=W=t[0].source,b(Z,"class","tooltip svelte-1iuq3t7"),b(n,"class","svelte-1iuq3t7"),b(R,"type","radio"),b(R,"name","source"),R.value="",b(R,"class","svelte-1iuq3t7"),b(Q,"title","Clear filter"),b(T,"class","clear svelte-1iuq3t7"),b(e,"class","source svelte-1iuq3t7")},m(I,M){V(I,e,M),d(e,n),d(n,i),d(n,l),d(n,a),d(a,h),d(a,f),d(a,g),d(a,m),d(a,p),d(p,_),d(p,U),d(p,F),d(a,Y),d(a,X),d(a,Z),S&&S.m(Z,null),d(Z,z),d(Z,c),d(Z,E),d(e,A),d(e,T),d(T,R),d(T,P),d(T,Q),j||(w=[be(Y,"change",function(){wn(t[1])&&t[1].apply(this,arguments)}),be(R,"change",function(){wn(t[1])&&t[1].apply(this,arguments)})],j=!0)},p(I,[M]){t=I,M&1&&r!==(r=t[0].url)&&b(i,"title",r),M&1&&!Ln(i.src,s=vi(t[0].source))&&b(i,"src",s),M&1&&o!==(o=t[0].source+"")&&me(h,o),M&1&&y!==(y=ft(t[0].bytes)+"")&&me(U,y),M&1&&L!==(L=t[0].child_csv.length+" collections")&&b(p,"title",L),M&1&&W!==(W=t[0].source)&&(Y.value=W),t[0].plate_count?S?S.p(t,M):(S=er(t),S.c(),S.m(Z,z)):S&&(S.d(1),S=null),M&1&&u!==(u=t[0].image_count+"")&&me(c,u)},i:ye,o:ye,d(I){I&&x(e),S&&S.d(),j=!1,nt(w)}}}function Jl(t,e,n){let{source:i}=e,{handleFilter:r}=e;return t.$$set=s=>{"source"in s&&n(0,i=s.source),"handleFilter"in s&&n(1,r=s.handleFilter)},[i,r]}class Zl extends Ye{constructor(e){super(),Ze(this,e,Jl,Kl,xe,{source:0,handleFilter:1})}}function Yl(t,e,n){const i=t.slice();return i[31]=e[n],i}function tr(t,e,n){const i=t.slice();return i[34]=e[n],i}function nr(t,e,n){const i=t.slice();return i[34]=e[n],i}function ir(t,e,n){const i=t.slice();return i[39]=e[n],i}function rr(t,e,n){const i=t.slice();return i[42]=e[n],i}function sr(t){let e,n,i=ft(t[4])+"",r,s;return{c(){e=B(`In the summer of 2024, the OME-NGFF project generated
          `),n=k("strong"),r=B(i),s=B(" of data in Zarr v3 format"),ae(n,"font-weight","600")},m(l,a){V(l,e,a),V(l,n,a),d(n,r),V(l,s,a)},p(l,a){a[0]&16&&i!==(i=ft(l[4])+"")&&me(r,i)},d(l){l&&(x(e),x(n),x(s))}}}function lr(t){let e,n=ft(t[4])+"",i,r,s,l,a,o;return{c(){e=B("("),i=B(n),r=B(`)
              `),s=k("span"),s.textContent="  |  ",l=q(),a=k("a"),o=B("Show all collections"),ae(s,"color","grey"),b(a,"href",window.location.origin+window.location.pathname)},m(h,f){V(h,e,f),V(h,i,f),V(h,r,f),V(h,s,f),V(h,l,f),V(h,a,f),d(a,o)},p(h,f){f[0]&16&&n!==(n=ft(h[4])+"")&&me(i,n)},d(h){h&&(x(e),x(i),x(r),x(s),x(l),x(a))}}}function or(t){let e,n;return e=new Zl({props:{source:t[42],handleFilter:t[17]}}),{c(){Je(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},p(i,r){const s={};r[0]&4&&(s.source=i[42]),e.$set(s)},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function ar(t){let e,n,i,r,s,l,a,o,h,f=Pe(Ce.getCsvSourceList(t[14])),g=[];for(let m=0;m<f.length;m+=1)g[m]=ur(ir(t,f,m));return{c(){e=k("div"),n=k("select"),i=k("option"),i.textContent="Collection";for(let m=0;m<g.length;m+=1)g[m].c();r=q(),s=k("div"),l=k("button"),a=B("×"),i.__value="",Ee(i,i.__value),b(n,"name","collection"),b(n,"class","svelte-10h51w5"),t[12]===void 0&&lt(()=>t[24].call(n)),b(l,"title","Clear Filter"),ae(l,"visibility",t[12]!==""?"visible":"hidden"),b(l,"class","svelte-10h51w5"),b(s,"class","svelte-10h51w5"),b(e,"class","selectWrapper svelte-10h51w5")},m(m,p){V(m,e,p),d(e,n),d(n,i);for(let _=0;_<g.length;_+=1)g[_]&&g[_].m(n,null);ot(n,t[12],!0),d(e,r),d(e,s),d(s,l),d(l,a),o||(h=[be(n,"change",t[24]),be(n,"change",t[19]),be(l,"click",t[19])],o=!0)},p(m,p){if(p[0]&16384){f=Pe(Ce.getCsvSourceList(m[14]));let _;for(_=0;_<f.length;_+=1){const y=ir(m,f,_);g[_]?g[_].p(y,p):(g[_]=ur(y),g[_].c(),g[_].m(n,null))}for(;_<g.length;_+=1)g[_].d(1);g.length=f.length}p[0]&20480&&ot(n,m[12]),p[0]&4096&&ae(l,"visibility",m[12]!==""?"visible":"hidden")},d(m){m&&x(e),Ot(g,m),o=!1,nt(h)}}}function ur(t){let e,n=(t[39].source==t[14]?hr(t[39].url):t[39].source)+"",i,r,s=t[39].image_count+"",l,a,o;return{c(){e=k("option"),i=B(n),r=B(" ("),l=B(s),a=B(`)
                  `),e.__value=o=t[39].url,Ee(e,e.__value)},m(h,f){V(h,e,f),d(e,i),d(e,r),d(e,l),d(e,a)},p(h,f){f[0]&16384&&n!==(n=(h[39].source==h[14]?hr(h[39].url):h[39].source)+"")&&me(i,n),f[0]&16384&&s!==(s=h[39].image_count+"")&&me(l,s),f[0]&16384&&o!==(o=h[39].url)&&(e.__value=o,Ee(e,e.__value))},d(h){h&&x(e)}}}function fr(t){let e,n=t[34]+"",i,r;return{c(){e=k("option"),i=B(n),e.__value=r=t[5][t[34]],Ee(e,e.__value)},m(s,l){V(s,e,l),d(e,i)},p(s,l){l[0]&32&&n!==(n=s[34]+"")&&me(i,n),l[0]&32&&r!==(r=s[5][s[34]])&&(e.__value=r,Ee(e,e.__value))},d(s){s&&x(e)}}}function cr(t,e){let n,i=e[34]+"",r,s;return{key:t,first:null,c(){n=k("option"),r=B(i),n.__value=s=e[6][e[34]],Ee(n,n.__value),this.first=n},m(l,a){V(l,n,a),d(n,r)},p(l,a){e=l,a[0]&64&&i!==(i=e[34]+"")&&me(r,i),a[0]&64&&s!==(s=e[6][e[34]])&&(n.__value=s,Ee(n,n.__value))},d(l){l&&x(n)}}}function Ql(t){let e;return{c(){e=k("option"),e.textContent=`Size: ${t[31].toUpperCase()}`,e.__value="size_"+t[31],Ee(e,e.__value)},m(n,i){V(n,e,i)},p:ye,d(n){n&&x(e)}}}function Xl(t){let e,n,i,r,s,l,a,o,h,f=t[1].split("/").pop()+"",g,m,p,_,y,U,F,L,Y,W,X,Z,z,u,c,E,A=t[14]!==""&&Ce.getCsvSourceList(t[14]).length>0,T,R,P,Q,j=t[13]!==""?"All Dimensions":"Dimension Count",w,S,I,M,ee,O,J,v,D,H,ie,ne,N,G,oe=t[11]==""?"Organism":"All Organisms",pe,ue,Se,de,re,Ue,Me,Te,ve,Ae,fe=t[10]==""?"Imaging Modality":"All Modalities",ge,et,te=[],it=new Map,Ge,Ke,Oe,Qe,Xe,Re,ct,ze,Pt,tt,$e,vt,si,li,wt,yt,kt,oi,fn,ht,ai,Et,rt,ui,cn=t[0].length+"",Sn,fi,An,ci,hi,dt,Fe,In,di;e=new jl({});let Be=t[1]==Vt&&sr(t),je=t[1]!=Vt&&lr(t),_t=Pe(t[2]),we=[];for(let C=0;C<_t.length;C+=1)we[C]=or(rr(t,_t,C));const Mr=C=>he(we[C],1,1,()=>{we[C]=null});let qe=A&&ar(t),Ct=Pe(Object.keys(t[5]).sort()),De=[];for(let C=0;C<Ct.length;C+=1)De[C]=fr(nr(t,Ct,C));let hn=Pe(Object.keys(t[6]).sort());const _i=C=>C[34];for(let C=0;C<hn.length;C+=1){let K=tr(t,hn,C),_e=_i(K);it.set(_e,te[C]=cr(_e,K))}let Fr=Pe(["x","y","z","c","t"]),Ut=[];for(let C=0;C<5;C+=1)Ut[C]=Ql(Yl(t,Fr,C));return ht=new ms({props:{toggleAscending:t[15],sortAscending:t[8]}}),dt=new Fl({props:{tableRows:t[0],textFilter:t[9],sortedBy:t[7]}}),{c(){Je(e.$$.fragment),n=q(),i=k("main"),r=k("div"),s=k("h3"),Be&&Be.c(),l=q(),a=k("div"),o=B(`Showing Collection:
            `),h=k("a"),g=B(f),m=q(),je&&je.c(),p=q(),_=k("div"),y=k("input"),U=q(),F=k("button"),L=B("×"),Y=q(),W=k("div");for(let C=0;C<we.length;C+=1)we[C].c();X=q(),Z=k("div"),z=k("div"),u=k("div"),c=k("div"),c.textContent="Filter by:",E=q(),qe&&qe.c(),T=q(),R=k("div"),P=k("select"),Q=k("option"),w=B(j),S=k("hr"),I=k("option"),I.textContent="2D",M=k("option"),M.textContent="3D",ee=k("option"),ee.textContent="4D",O=k("option"),O.textContent="5D",J=q(),v=k("div"),D=k("button"),H=B("×"),ie=q(),ne=k("div"),N=k("select"),G=k("option"),pe=B(oe),ue=k("hr");for(let C=0;C<De.length;C+=1)De[C].c();Se=q(),de=k("div"),re=k("button"),Ue=B("×"),Me=q(),Te=k("div"),ve=k("select"),Ae=k("option"),ge=B(fe),et=k("hr");for(let C=0;C<te.length;C+=1)te[C].c();Ge=q(),Ke=k("div"),Oe=k("button"),Qe=B("×"),Xe=q(),Re=k("div"),ct=q(),ze=k("div"),ze.textContent="Sort by:",Pt=q(),tt=k("div"),$e=k("select"),vt=k("option"),vt.textContent="--",si=k("hr");for(let C=0;C<5;C+=1)Ut[C].c();li=k("hr"),wt=k("option"),wt.textContent="Data Size (bytes)",yt=k("option"),yt.textContent="Chunk Size (pixels)",kt=k("option"),kt.textContent="Shard Size (pixels)",oi=q(),fn=k("div"),Je(ht.$$.fragment),ai=q(),Et=k("div"),rt=k("h3"),ui=B("Showing "),Sn=B(cn),fi=B(" out of "),An=B(t[3]),ci=B(" images"),hi=q(),Je(dt.$$.fragment),b(h,"href",t[1]),ae(a,"font-size","90%"),ae(s,"text-align","center"),b(y,"placeholder","Filter by Name or Description"),b(y,"name","textFilter"),b(y,"class","svelte-10h51w5"),b(F,"title","Clear Filter"),ae(F,"visibility",t[9]!==""?"visible":"hidden"),b(F,"class","svelte-10h51w5"),b(_,"class","textInputWrapper svelte-10h51w5"),b(W,"class","sources svelte-10h51w5"),b(r,"class","summary svelte-10h51w5"),ae(c,"white-space","nowrap"),Q.__value="",Ee(Q,Q.__value),I.__value="2",Ee(I,I.__value),M.__value="3",Ee(M,M.__value),ee.__value="4",Ee(ee,ee.__value),O.__value="5",Ee(O,O.__value),b(P,"class","svelte-10h51w5"),t[13]===void 0&&lt(()=>t[25].call(P)),b(D,"title","Clear Filter"),ae(D,"visibility",t[13]!==""?"visible":"hidden"),b(D,"class","svelte-10h51w5"),b(v,"class","svelte-10h51w5"),b(R,"class","selectWrapper svelte-10h51w5"),G.__value="",Ee(G,G.__value),b(N,"class","svelte-10h51w5"),t[11]===void 0&&lt(()=>t[26].call(N)),b(re,"title","Clear Filter"),ae(re,"visibility",t[11]!==""?"visible":"hidden"),b(re,"class","svelte-10h51w5"),b(de,"class","svelte-10h51w5"),b(ne,"class","selectWrapper svelte-10h51w5"),Ae.__value="",Ee(Ae,Ae.__value),b(ve,"class","svelte-10h51w5"),t[10]===void 0&&lt(()=>t[27].call(ve)),b(Oe,"title","Clear Filter"),ae(Oe,"visibility",t[10]!==""?"visible":"hidden"),b(Oe,"class","svelte-10h51w5"),b(Ke,"class","svelte-10h51w5"),b(Te,"class","selectWrapper svelte-10h51w5"),b(Re,"class","clear"),vt.__value="",Ee(vt,vt.__value),wt.__value="written",Ee(wt,wt.__value),yt.__value="chunk_pixels",Ee(yt,yt.__value),kt.__value="shard_pixels",Ee(kt,kt.__value),b($e,"class","svelte-10h51w5"),b(fn,"class","svelte-10h51w5"),b(tt,"class","selectWrapper svelte-10h51w5"),b(u,"class","filters svelte-10h51w5"),b(z,"class","sidebar svelte-10h51w5"),ae(rt,"margin-left","15px"),b(rt,"class","svelte-10h51w5"),b(Et,"class","results svelte-10h51w5"),b(Z,"class","sidebarContainer svelte-10h51w5"),ae(i,"--form-select-bg-img","url('"+ql+"')"),b(i,"class","svelte-10h51w5")},m(C,K){He(e,C,K),V(C,n,K),V(C,i,K),d(i,r),d(r,s),Be&&Be.m(s,null),d(s,l),d(s,a),d(a,o),d(a,h),d(h,g),d(a,m),je&&je.m(a,null),d(r,p),d(r,_),d(_,y),Ee(y,t[9]),d(_,U),d(_,F),d(F,L),d(r,Y),d(r,W);for(let _e=0;_e<we.length;_e+=1)we[_e]&&we[_e].m(W,null);d(i,X),d(i,Z),d(Z,z),d(z,u),d(u,c),d(u,E),qe&&qe.m(u,null),d(u,T),d(u,R),d(R,P),d(P,Q),d(Q,w),d(P,S),d(P,I),d(P,M),d(P,ee),d(P,O),ot(P,t[13],!0),d(R,J),d(R,v),d(v,D),d(D,H),d(u,ie),d(u,ne),d(ne,N),d(N,G),d(G,pe),d(N,ue);for(let _e=0;_e<De.length;_e+=1)De[_e]&&De[_e].m(N,null);ot(N,t[11],!0),d(ne,Se),d(ne,de),d(de,re),d(re,Ue),d(u,Me),d(u,Te),d(Te,ve),d(ve,Ae),d(Ae,ge),d(ve,et);for(let _e=0;_e<te.length;_e+=1)te[_e]&&te[_e].m(ve,null);ot(ve,t[10],!0),d(Te,Ge),d(Te,Ke),d(Ke,Oe),d(Oe,Qe),d(u,Xe),d(u,Re),d(u,ct),d(u,ze),d(u,Pt),d(u,tt),d(tt,$e),d($e,vt),d($e,si);for(let _e=0;_e<5;_e+=1)Ut[_e]&&Ut[_e].m($e,null);d($e,li),d($e,wt),d($e,yt),d($e,kt),d(tt,oi),d(tt,fn),He(ht,fn,null),d(Z,ai),d(Z,Et),d(Et,rt),d(rt,ui),d(rt,Sn),d(rt,fi),d(rt,An),d(rt,ci),d(Et,hi),He(dt,Et,null),Fe=!0,In||(di=[be(y,"input",t[23]),be(y,"input",t[22]),be(F,"click",t[22]),be(P,"change",t[25]),be(P,"change",t[18]),be(D,"click",t[18]),be(N,"change",t[26]),be(N,"change",t[20]),be(re,"click",t[20]),be(ve,"change",t[27]),be(ve,"change",t[21]),be(Oe,"click",t[21]),be($e,"change",t[16])],In=!0)},p(C,K){if(C[1]==Vt?Be?Be.p(C,K):(Be=sr(C),Be.c(),Be.m(s,l)):Be&&(Be.d(1),Be=null),(!Fe||K[0]&2)&&f!==(f=C[1].split("/").pop()+"")&&me(g,f),(!Fe||K[0]&2)&&b(h,"href",C[1]),C[1]!=Vt?je?je.p(C,K):(je=lr(C),je.c(),je.m(a,null)):je&&(je.d(1),je=null),K[0]&512&&y.value!==C[9]&&Ee(y,C[9]),(!Fe||K[0]&512)&&ae(F,"visibility",C[9]!==""?"visible":"hidden"),K[0]&131076){_t=Pe(C[2]);let ce;for(ce=0;ce<_t.length;ce+=1){const Bt=rr(C,_t,ce);we[ce]?(we[ce].p(Bt,K),se(we[ce],1)):(we[ce]=or(Bt),we[ce].c(),se(we[ce],1),we[ce].m(W,null))}for(Ft(),ce=_t.length;ce<we.length;ce+=1)Mr(ce);Dt()}if(K[0]&16384&&(A=C[14]!==""&&Ce.getCsvSourceList(C[14]).length>0),A?qe?qe.p(C,K):(qe=ar(C),qe.c(),qe.m(u,T)):qe&&(qe.d(1),qe=null),(!Fe||K[0]&8192)&&j!==(j=C[13]!==""?"All Dimensions":"Dimension Count")&&me(w,j),K[0]&8192&&ot(P,C[13]),(!Fe||K[0]&8192)&&ae(D,"visibility",C[13]!==""?"visible":"hidden"),(!Fe||K[0]&2048)&&oe!==(oe=C[11]==""?"Organism":"All Organisms")&&me(pe,oe),K[0]&32){Ct=Pe(Object.keys(C[5]).sort());let ce;for(ce=0;ce<Ct.length;ce+=1){const Bt=nr(C,Ct,ce);De[ce]?De[ce].p(Bt,K):(De[ce]=fr(Bt),De[ce].c(),De[ce].m(N,null))}for(;ce<De.length;ce+=1)De[ce].d(1);De.length=Ct.length}K[0]&2080&&ot(N,C[11]),(!Fe||K[0]&2048)&&ae(re,"visibility",C[11]!==""?"visible":"hidden"),(!Fe||K[0]&1024)&&fe!==(fe=C[10]==""?"Imaging Modality":"All Modalities")&&me(ge,fe),K[0]&64&&(hn=Pe(Object.keys(C[6]).sort()),te=br(te,K,_i,1,C,hn,it,ve,Kr,cr,null,tr)),K[0]&1088&&ot(ve,C[10]),(!Fe||K[0]&1024)&&ae(Oe,"visibility",C[10]!==""?"visible":"hidden");const _e={};K[0]&256&&(_e.sortAscending=C[8]),ht.$set(_e),(!Fe||K[0]&1)&&cn!==(cn=C[0].length+"")&&me(Sn,cn),(!Fe||K[0]&8)&&me(An,C[3]);const dn={};K[0]&1&&(dn.tableRows=C[0]),K[0]&512&&(dn.textFilter=C[9]),K[0]&128&&(dn.sortedBy=C[7]),dt.$set(dn)},i(C){if(!Fe){se(e.$$.fragment,C);for(let K=0;K<_t.length;K+=1)se(we[K]);se(ht.$$.fragment,C),se(dt.$$.fragment,C),Fe=!0}},o(C){he(e.$$.fragment,C),we=we.filter(Boolean);for(let K=0;K<we.length;K+=1)he(we[K]);he(ht.$$.fragment,C),he(dt.$$.fragment,C),Fe=!1},d(C){C&&(x(n),x(i)),We(e,C),Be&&Be.d(),je&&je.d(),Ot(we,C),qe&&qe.d(),Ot(De,C);for(let K=0;K<te.length;K+=1)te[K].d();Ot(Ut,C),We(ht),We(dt),In=!1,nt(di)}}}function hr(t){return t.split("/").pop().replace(".csv","").replace("_samples","")}function $l(t,e,n){let i,r,s,l,a,o,f=new URLSearchParams(window.location.search).get("csv");try{new URL(f)}catch{f=Vt}let g=[],m=[],p=0,_=0,y={},U={};Ce.subscribe(w=>{n(0,g=X(w)),n(2,m=Ce.getCsvSourceList()),n(3,p=w.length),n(4,_=w.reduce((S,I)=>S+parseInt(I.written)||0,0))}),Sr.subscribe(w=>{let S={};for(const[I,M]of Object.entries(w))S[M]=I;n(5,y=S)}),Ar.subscribe(w=>{let S={};for(const[I,M]of Object.entries(w))S[M]=I;n(6,U=S)}),f&&wr(f,Ce);let F="",L=!1;function Y(){n(8,L=!L),Ce.sortTable(F,L)}function W(w){n(7,F=w.target.value),F===""?Ce.sortTable("index",!0):Ce.sortTable(F,L)}function X(w){if(i!==""&&(w=w.filter(S=>S.dim_count==i)),s!=="")w=w.filter(S=>S.csv==s);else if(r!==""){let S=Ce.getCsvSourceList(r),I=[r,...S.map(M=>M.source)];w=w.filter(M=>I.includes(M.source))}if(l!==""&&(w=w.filter(S=>S.organismId==l)),a!=""&&(w=w.filter(S=>S.fbbiId==a)),o&&o!=""){let S=o.toLowerCase();w=w.filter(I=>{var M,ee;return I.url.toLowerCase().includes(S)||((M=I.description)==null?void 0:M.toLowerCase().includes(S))||((ee=I.name)==null?void 0:ee.toLowerCase().includes(S))})}return w}function Z(w){n(14,r=w.target.value||""),n(12,s=""),console.log("filterSource",r,s),n(0,g=X(Ce.getRows()))}function z(w){n(13,i=w.target.value||""),n(0,g=X(Ce.getRows()))}function u(w){n(12,s=w.target.value||""),n(0,g=X(Ce.getRows()))}function c(w){n(11,l=w.target.value||""),n(0,g=X(Ce.getRows()))}function E(w){n(10,a=w.target.value||""),n(0,g=X(Ce.getRows()))}function A(w){n(9,o=w.target.value),n(0,g=X(Ce.getRows()))}function T(){o=this.value,n(9,o)}function R(){s=gn(this),n(12,s),n(14,r)}function P(){i=gn(this),n(13,i)}function Q(){l=gn(this),n(11,l),n(5,y)}function j(){a=gn(this),n(10,a),n(6,U)}return t.$$.update=()=>{t.$$.dirty[0]&1&&g.some(w=>w.source)},n(13,i=""),n(14,r=""),n(12,s=""),n(11,l=""),n(10,a=""),n(9,o=""),[g,f,m,p,_,y,U,F,L,o,a,l,s,i,r,Y,W,Z,z,u,c,E,A,T,R,P,Q,j]}class eo extends Ye{constructor(e){super(),Ze(this,e,$l,Xl,xe,{},null,[-1,-1])}}function to(t){let e;return{c(){e=k("div"),e.innerHTML=`<h2>Introduction</h2> <p>The <a href="https://forum.image.sc/t/ome2024-ngff-challenge/97363">2024 OME-NGFF Challenge</a>
    was conceived at the
    <a href="https://www.openmicroscopy.org/events/ome-community-meeting-2024/">OME Annual Community Meeting</a>
    in Dundee in May 2024. The stated goals of Challenge were:</p> <ul><li>Collect examples of OME-Zarr from multiple modalities, use cases, and
      institutions, available from a single location.</li> <li>Test the utility (and lack thereof) of existing OME-Zarr metadata and
      image viewers.</li> <li>Advance the adoption of the Zarr V3 specification, and also existing
      OME-Zarr RFCs.</li></ul> <p>The inspiration for the Challenge came from presentations at the OME Meeting
    that demonstrated the level of adoption of OME-Zarr, but highlighted the
    poor findability of the data.</p> <p>Work on the challenge started in earnest in July 2024. All progress is
    tracked in the <a href="https://github.com/ome/ome2024-ngff-challenge">ome2024-ngff-challenge</a>
    repo. It was agreed that the results
    of the OME-NGFF Challenge would be presented at the
    <a href="https://globalbioimaging.org/exchange-of-experience/exchange-of-experience-ix">2024 Global BioImaging Meeting</a>.</p> <h2>Process</h2> <p>The Challenge was run via a series of virtual meetings coordinated on the
    Image.sc Forums, with all
    <a href="https://hackmd.io/3emKqKQsT_2U35vLepzDEQ">notes and lists of participants</a>
    available.</p> <h2>Results</h2> <p>At the outset, we weren’t sure how much OME-Zarr data was available, if it
    could be converted to Zarr V3, or how many organisations would participate.
    In the end, we have far exceeded our expectations, with more than 0.5 PByte
    of OME-Zarr made available, across a wide range of modalities.</p> <p>To make the assembly as accessible as possible, we built the the OME-NGFF
    Challenge Viewer [URL?}, which incorporates a CSV with locations of
    datasets, and connects datasets to the OME NGFF Validator, for metadata
    validation and viewing.</p> <p>Perhaps the most important outcome of the Challenge is the establishment of
    a federated bioimage data system based on OME-Zarr. To our knowledge, this
    is the largest federated bioimage data collection ever assembled.</p>`,b(e,"class","svelte-1ivuwa5")},m(n,i){V(n,e,i)},p:ye,i:ye,o:ye,d(n){n&&x(e)}}}class no extends Ye{constructor(e){super(),Ze(this,e,null,to,xe,{})}}function io(t){let e,n;return e=new eo({}),{c(){Je(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function ro(t){let e,n;return e=new no({}),{c(){Je(e.$$.fragment)},m(i,r){He(e,i,r),n=!0},i(i){n||(se(e.$$.fragment,i),n=!0)},o(i){he(e.$$.fragment,i),n=!1},d(i){We(e,i)}}}function so(t){let e,n,i,r,s,l;n=new Gl({});const a=[ro,io],o=[];function h(f,g){return f[0].endsWith("/about/")?0:1}return r=h(t),s=o[r]=a[r](t),{c(){e=k("div"),Je(n.$$.fragment),i=q(),s.c(),b(e,"class","app svelte-1mc4mod")},m(f,g){V(f,e,g),He(n,e,null),d(e,i),o[r].m(e,null),l=!0},p:ye,i(f){l||(se(n.$$.fragment,f),se(s),l=!0)},o(f){he(n.$$.fragment,f),he(s),l=!1},d(f){f&&x(e),We(n),o[r].d()}}}function lo(t){return[window.location.pathname]}class oo extends Ye{constructor(e){super(),Ze(this,e,lo,so,xe,{})}}new oo({target:document.getElementById("app")});
